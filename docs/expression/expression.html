<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="description" content="openEHR Expression Language specification">
<meta name="keywords" content="openehr, expressions, rules">
<title>Expression Language and Model</title>
<link rel="stylesheet" href="https://www.openehr.org/releases/BASE/latest/resources/css/openehr.css">
<link rel="stylesheet" href="https://www.openehr.org/releases/BASE/latest/resources/css/pygments-default.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_expression_language_and_model">Expression Language and Model</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a>
<ul class="sectlevel2">
<li><a href="#_primary_author">Primary Author</a></li>
</ul>
</li>
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_related_documents">1.2. Related Documents</a></li>
<li><a href="#_status">1.3. Status</a></li>
<li><a href="#_conformance">1.4. Conformance</a></li>
</ul>
</li>
<li><a href="#_overview">2. Overview</a>
<ul class="sectlevel2">
<li><a href="#_design_background">2.1. Design Background</a></li>
<li><a href="#_requirements">2.2. Requirements</a></li>
<li><a href="#_design_paradigm">2.3. Design Paradigm</a></li>
<li><a href="#_expressions_and_ontic_truth">2.4. Expressions and Ontic Truth</a></li>
</ul>
</li>
<li><a href="#_el_basics">3. EL Basics</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">3.1. Overview</a></li>
<li><a href="#_syntax_style">3.2. Syntax style</a></li>
<li><a href="#_types">3.3. Types</a>
<ul class="sectlevel3">
<li><a href="#_primitive_types">3.3.1. Primitive Types</a></li>
<li><a href="#_container_types">3.3.2. Container Types</a></li>
<li><a href="#_interval_type">3.3.3. Interval Type</a></li>
<li><a href="#_complex_types">3.3.4. Complex Types</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_el_expressions">4. EL Expressions</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">4.1. Overview</a></li>
<li><a href="#_terminal_entities">4.2. Terminal Entities</a>
<ul class="sectlevel3">
<li><a href="#_literals">4.2.1. Literals</a></li>
<li><a href="#_constants">4.2.2. Constants</a></li>
<li><a href="#_variables">4.2.3. Variables</a></li>
<li><a href="#_function_calls">4.2.4. Function Calls</a></li>
<li><a href="#_built_in_functions">4.2.5. Built-in Functions</a></li>
</ul>
</li>
<li><a href="#_predicates">4.3. Predicates</a>
<ul class="sectlevel3">
<li><a href="#_check_predicate">4.3.1. check() Predicate</a></li>
<li><a href="#_defined_predicate">4.3.2. defined() Predicate</a></li>
</ul>
</li>
<li><a href="#_complex_expressions">4.4. Complex Expressions</a>
<ul class="sectlevel3">
<li><a href="#_equality_operator">4.4.1. Equality Operator</a></li>
<li><a href="#_primitive_operators">4.4.2. Primitive Operators</a>
<ul class="sectlevel4">
<li><a href="#_logical_negation">4.4.2.1. Logical Negation</a></li>
<li><a href="#_precedence_and_parentheses">4.4.2.2. Precedence and Parentheses</a></li>
</ul>
</li>
<li><a href="#_collection_operators">4.4.3. Collection Operators</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_el_statements">5. EL Statements</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">5.1. Overview</a></li>
<li><a href="#_declarations">5.2. Declarations</a>
<ul class="sectlevel3">
<li><a href="#_constants_2">5.2.1. Constants</a></li>
<li><a href="#_variables_2">5.2.2. Variables</a></li>
<li><a href="#_functions_and_procedures">5.2.3. Functions and Procedures</a></li>
</ul>
</li>
<li><a href="#_assignment">5.3. Assignment</a></li>
<li><a href="#_procedure_invocation">5.4. Procedure Invocation</a></li>
<li><a href="#_control_structures">5.5. Control Structures</a>
<ul class="sectlevel3">
<li><a href="#_if_then">5.5.1. If / then</a></li>
<li><a href="#_when_then">5.5.2. When / then</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_el_texts">6. EL Texts</a>
<ul class="sectlevel2">
<li><a href="#_overview_5">6.1. Overview</a></li>
</ul>
</li>
<li><a href="#_terminology">7. Terminology</a></li>
<li><a href="#_data_bindings">8. Data Bindings</a>
<ul class="sectlevel2">
<li><a href="#_binding_model">8.1. Binding Model</a>
<ul class="sectlevel3">
<li><a href="#_content_binding">8.1.1. Content Binding</a></li>
<li><a href="#_api_call_binding">8.1.2. API Call Binding</a></li>
<li><a href="#_query_binding">8.1.3. Query Binding</a></li>
<li><a href="#_interactive_binding">8.1.4. Interactive Binding</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_computing_bindings">9. Computing Bindings</a></li>
<li><a href="#_module_structure">10. Module Structure</a>
<ul class="sectlevel2">
<li><a href="#_el_text_identification">10.1. EL Text Identification</a></li>
</ul>
</li>
<li><a href="#_the_expression_language_object_model">11. The Expression Language Object Model</a>
<ul class="sectlevel2">
<li><a href="#_overview_6">11.1. Overview</a></li>
<li><a href="#_module_package">11.2. Module Package</a>
<ul class="sectlevel3">
<li><a href="#_class_descriptions">11.2.1. Class Descriptions</a>
<ul class="sectlevel4">
<li><a href="#_el_module_class">11.2.1.1. EL_MODULE Class</a></li>
<li><a href="#_el_model_ref_class">11.2.1.2. EL_MODEL_REF Class</a></li>
<li><a href="#_el_data_binding_class">11.2.1.3. EL_DATA_BINDING Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_elom_core_statements_and_expressions">11.3. ELOM core: statements and expressions</a></li>
<li><a href="#_statements">11.4. Statements</a>
<ul class="sectlevel3">
<li><a href="#_class_descriptions_2">11.4.1. Class Descriptions</a>
<ul class="sectlevel4">
<li><a href="#_el_statement_class">11.4.1.1. EL_STATEMENT Class</a></li>
<li><a href="#_el_assignment_class">11.4.1.2. EL_ASSIGNMENT Class</a></li>
<li><a href="#_el_routine_call_class">11.4.1.3. EL_ROUTINE_CALL Class</a></li>
<li><a href="#_el_procedure_call_class">11.4.1.4. EL_PROCEDURE_CALL Class</a></li>
<li><a href="#_el_choice_group_class">11.4.1.5. EL_CHOICE_GROUP Class</a></li>
<li><a href="#_el_choice_branch_class">11.4.1.6. EL_CHOICE_BRANCH Class</a></li>
<li><a href="#_el_condition_group_class">11.4.1.7. EL_CONDITION_GROUP Class</a></li>
<li><a href="#_el_condition_branch_class">11.4.1.8. EL_CONDITION_BRANCH Class</a></li>
<li><a href="#_el_decision_group_class">11.4.1.9. EL_DECISION_GROUP Class</a></li>
<li><a href="#_el_decision_branch_class">11.4.1.10. EL_DECISION_BRANCH Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_expressions">11.5. Expressions</a>
<ul class="sectlevel3">
<li><a href="#_class_descriptions_3">11.5.1. Class Descriptions</a>
<ul class="sectlevel4">
<li><a href="#_el_expression_class">11.5.1.1. EL_EXPRESSION Class</a></li>
<li><a href="#_el_operator_class">11.5.1.2. EL_OPERATOR Class</a></li>
<li><a href="#_el_unary_operator_class">11.5.1.3. EL_UNARY_OPERATOR Class</a></li>
<li><a href="#_el_binary_operator_class">11.5.1.4. EL_BINARY_OPERATOR Class</a></li>
<li><a href="#_el_terminal_class">11.5.1.5. EL_TERMINAL Class</a></li>
<li><a href="#_el_variable_ref_class">11.5.1.6. EL_VARIABLE_REF Class</a></li>
<li><a href="#_el_external_ref_class">11.5.1.7. EL_EXTERNAL_REF Class</a></li>
<li><a href="#_el_local_ref_class">11.5.1.8. EL_LOCAL_REF Class</a></li>
<li><a href="#_el_constant_ref_class">11.5.1.9. EL_CONSTANT_REF Class</a></li>
<li><a href="#_el_function_call_class">11.5.1.10. EL_FUNCTION_CALL Class</a></li>
<li><a href="#_el_literal_class">11.5.1.11. EL_LITERAL Class</a></li>
<li><a href="#_el_predicate_class">11.5.1.12. EL_PREDICATE Class</a></li>
<li><a href="#_el_check_class">11.5.1.13. EL_CHECK Class</a></li>
<li><a href="#_el_defined_class">11.5.1.14. EL_DEFINED Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_typing">11.6. Typing</a>
<ul class="sectlevel3">
<li><a href="#_class_descriptions_4">11.6.1. Class Descriptions</a>
<ul class="sectlevel4">
<li><a href="#_el_type_def_class">11.6.1.1. EL_TYPE_DEF Class</a></li>
<li><a href="#_type_def_boolean_class">11.6.1.2. TYPE_DEF_BOOLEAN Class</a></li>
<li><a href="#_type_def_integer_class">11.6.1.3. TYPE_DEF_INTEGER Class</a></li>
<li><a href="#_type_def_real_class">11.6.1.4. TYPE_DEF_REAL Class</a></li>
<li><a href="#_type_def_date_class">11.6.1.5. TYPE_DEF_DATE Class</a></li>
<li><a href="#_type_def_date_time_class">11.6.1.6. TYPE_DEF_DATE_TIME Class</a></li>
<li><a href="#_type_def_time_class">11.6.1.7. TYPE_DEF_TIME Class</a></li>
<li><a href="#_type_def_duration_class">11.6.1.8. TYPE_DEF_DURATION Class</a></li>
<li><a href="#_type_def_string_class">11.6.1.9. TYPE_DEF_STRING Class</a></li>
<li><a href="#_type_def_uri_class">11.6.1.10. TYPE_DEF_URI Class</a></li>
<li><a href="#_type_def_terminology_code_class">11.6.1.11. TYPE_DEF_TERMINOLOGY_CODE Class</a></li>
<li><a href="#_type_def_object_ref_class">11.6.1.12. TYPE_DEF_OBJECT_REF Class</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_syntax_specification">Appendix A: Syntax Specification</a></li>
<li><a href="#_references">References</a>
<ul class="sectlevel2">
<li><a href="#_general_it_publications">General IT Publications</a>
<ul class="sectlevel3">
<li><a href="#_articles_books">Articles, Books</a></li>
<li><a href="#_online_resources">Online Resources</a></li>
<li><a href="#_standards">Standards</a></li>
</ul>
</li>
<li><a href="#_publications_e_health">Publications - e-Health</a>
<ul class="sectlevel3">
<li><a href="#_articles_books_2">Articles, Books</a></li>
<li><a href="#_standards_2">Standards</a></li>
<li><a href="#_projects">Projects</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="/releases/BASE/latest/resources/images/openehr_logo_large.png" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_expression_language_and_model" class="sect0">Expression Language and Model</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2"><strong>Issuer</strong>: <a href="/programs/specification/">openEHR Specification Program</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Release</strong>: latest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: DEVELOPMENT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Keywords</strong>: openehr, expressions, rules</p></td>
</tr>
</tbody>
</table>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="diagrams/openehr_block_diagram.png" alt="openEHR components" width="60%">
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2016 - 2018 The openEHR Foundation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="/">The openEHR Foundation</a> is an independent, non-profit community organisation, facilitating the sharing of health records by consumers and clinicians via open-source, standards-based implementations.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="/releases/BASE/latest/resources/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://openehr.atlassian.net/browse/SPECPR/" class="bare">https://openehr.atlassian.net/browse/SPECPR/</a><br>
 Web: <a href="/">www.openehr.org</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record">Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 54.5454%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser, Implementer</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>2.0.0</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPECBASE-3">SPECBASE-3</a>. Major rewrite. Added external model use;<br>
 added <code>defined()</code> and <code>check()</code> predicates;<br>
 refined quantifiers;<br>
 add BMM integration;<br>
 added various kinds of binding.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>07 Sep 2018</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1.0</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPECPUB-6">SPECPUB-6</a>. Correct UML package nesting and paths in documents; insert <code>base</code> parent package; rename <code>expressions</code> package to <code>expression</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">27 Nov 2017</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Correct type of <code>OP_DEF_EXISTS.<em>evaluation_agent</em></code> to <code>FUNCTION&lt;&lt;Any&gt;, Boolean&gt;</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C Nanjo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">31 May 2016</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0.0</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Initial writing. Taken from AOM2 2.0.6.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 openEHR SEC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Feb 2016</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements">Acknowledgements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_primary_author">Primary Author</h3>
<div class="ulist">
<ul>
<li>
<p>Thomas Beale, Ars Semantica; openEHR Foundation Management Board.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose"><a class="anchor" href="#_purpose"></a>1.1. Purpose</h3>
<div class="paragraph">
<p>This document specifies the openEHR Expression Object Model (EOM) and an abstract syntax, denoted the openEHR Expression Language (openEHR EL). The EOM defines the semantics of a first order predicate style logic that can be used to express assertions (e.g. in archetypes) and rules. e.g. in decision support situations.</p>
</div>
<div class="paragraph">
<p>The intended audience includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Standards bodies producing health informatics standards;</p>
</li>
<li>
<p>Academic groups using openEHR;</p>
</li>
<li>
<p>Solution vendors.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents"><a class="anchor" href="#_related_documents"></a>1.2. Related Documents</h3>
<div class="paragraph">
<p>Prerequisite documents for reading this document include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="/releases/BASE/latest/architecture_overview.html">openEHR Architecture Overview</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Releated documents include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="/releases/AM/latest/AOM2.html">Archetype Object Model 2 (AOM2)</a>, Assertions section.</p>
</li>
<li>
<p>The <a href="/releases/CDS/latest/GDL.html">Guideline Definition Language (GDL)</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="anchor" href="#_status"></a>1.3. Status</h3>
<div class="paragraph">
<p>The contents of this specification were separated out from the <a href="/releases/AM/latest/AOM2.html">AOM2 specification</a> in order to provide a common model of expressions and rules structures for AOM, GDL and other specifications requiring it.</p>
</div>
<div class="paragraph">
<p>This specification is in the DEVELOPMENT state. The development version of this document can be found at <a href="/releases/BASE/latest/expression.html">www.openehr.org/releases/RM/latest/expression.html</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
<div class="paragraph">
<p>Users are encouraged to comment on and/or advise on these paragraphs as well as the main content.  Feedback should be provided either on the <a href="http://lists.openehr.org/mailman/listinfo/openehr-technical_lists.openehr.org">technical mailing list</a>, or on the <a href="https://openehr.atlassian.net/issues/?filter=11105">specifications issue tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conformance"><a class="anchor" href="#_conformance"></a>1.4. Conformance</h3>
<div class="paragraph">
<p>Conformance of a data or software artifact to an openEHR Reference Model specification is determined by a formal test of that artifact against the relevant openEHR Implementation Technology Specification(s) (ITSs), such as an IDL interface or an XML-schema. Since ITSs are formal, automated derivations from the Reference Model, ITS conformance indicates RM conformance.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>2. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The openEHR Expression Object Model (EOM) defines the semantics of all of the elements of computable expressions that are used in openEHR, and are likely to be used in healthcare and life sciences computing where rules and expressions are needed. The model is designed as an extensible core formalism suitable for use and extension in other formalisms.</p>
</div>
<div class="paragraph">
<p>The openEHR Expression Language (EL) specified here is an abstract syntax counterpart to the Expression Object Model, and may be considered a 'default syntax'. Other syntaxes or syntax variants are certainly possible, and other serialisation methods are possible, such as object graph serialisation into XML, JSON, YAML etc. The EL is provided firstly as a way of specifying and explaining the semantics of the EOM, and secondly, as one way of actually authoring expressions and rules in textual form. This approach is the same as with any programming language, where the usual form for learning and programming is the abstract language form, while the computational form is an abstract syntax tree (AST) or similar.</p>
</div>
<div class="paragraph">
<p>Accordingly, the EOM should be considered the normative definition of the openEHR Expression formalism, and indeed not all implementations need support the language: they might for example only serialse in JSON or use purely graphical visualisation.</p>
</div>
<div class="paragraph tbd">
<p>TBD: possibly the following is no longer true.</p>
</div>
<div class="paragraph">
<p>The formalism as defined here requires extensions for use, at a minimum to provide concrete value referencing.
Extensions would also typically provide more operators, functions, leaf types and other features that are needed in specific circumstances.</p>
</div>
<div class="paragraph">
<p>Key features of the formalism include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>variable declarations, assignments and expressions;</p>
</li>
<li>
<p>strong typing;</p>
</li>
<li>
<p>the ability to use externally defined information models;</p>
</li>
<li>
<p>standard logical operators including universal and existential quantification, as well as user-defined operators;</p>
</li>
<li>
<p>standard arithmetic and relational comparison operators, enabling the use of numerics;</p>
</li>
<li>
<p>parentheses for overridding operator precedence;</p>
</li>
<li>
<p>functions, including built-ins like <code>current_date</code>, standard functions like <code>max()</code> as well as user-defined functions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For reasons of comprehensibility and explanation, the Expression Language is defined first in this specification.</p>
</div>
<div class="sect2">
<h3 id="_design_background"><a class="anchor" href="#_design_background"></a>2.1. Design Background</h3>
<div class="paragraph">
<p>The openEHR Expression formalism is based on a limited first-order predicate logic language with extensions for numeric sub-expressions. It has similarities with OMG&#8217;s OCL (Object Constraint Language) syntax, and is also similar to the assertion syntax used in the <a href="#Object_Z">[Object_Z]</a> and <a href="#Eiffel">[Eiffel]</a> languages and tools for over a decade (see <a href="#Sowa">[Sowa]</a>, <a href="#Hein">[Hein]</a>, <a href="#Kilov_Ross">[Kilov_Ross]</a> for an explanation of predicate logic in information modelling). None of these languages has been used directly, for reasons including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OCL has a complex type system connected to the UML meta-model, and includes some undecidable procedural semantics;</p>
</li>
<li>
<p>none have adequate variable referencing mechanisms, such as to paths and external queries.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are also similarities with other languages developed in the health arena for expressing 'medical logic' (Arden <a href="#hl7_arden">[hl7_arden]</a>), guidelines (<a href="#GLIF">[GLIF]</a> and many others) and decision support (e.g. GELLO <a href="#hl7_gello">[hl7_gello]</a>). These languages were not directly used, for reasons including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>none have an easily extensible value referencing mechanism;</p>
</li>
<li>
<p>some are too procedural (Arden, GLIF);</p>
</li>
<li>
<p>current versions of some of these languages have been made specific to the HL7v3 RIM, a particular model of health information designed for message representation (GLIF 3.x, GELLO).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nevertheless, various elements of Arden and GELLO provided useful inspiration for the formalism described here.</p>
</div>
<div class="paragraph">
<p>Modern syntaxes that provide a more generic and minimal inspiration for the expression syntax described here include the <a href="https://www.w3.org/TR/xpath-31/">Xpath syntax</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_requirements"><a class="anchor" href="#_requirements"></a>2.2. Requirements</h3>
<div class="paragraph">
<p>The semantic requirements are for expressions including arithmetic, boolean, and relational operators, functions, logical quantifiers, operator precedence, constant values, and variables. However, there is no support in the core specification for procedural semantics or most of the other complexities of full-blown programming languages.</p>
</div>
<div class="paragraph">
<p>In addition, there is a need to be able to provide:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>multi-lingual translations for symbolic variables, in a similar way to the <a href="/releases/AM/latest/ADL2.html">openEHR Archetype Definition Language (ADL)</a>;</p>
</li>
<li>
<p>bindings that connect variables to external data sources;</p>
</li>
<li>
<p>an ability to use externally defined information models that supply types that may be used in EL statements.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_design_paradigm"><a class="anchor" href="#_design_paradigm"></a>2.3. Design Paradigm</h3>
<div class="paragraph">
<p>The assumed execution model of the Expression language is that EL statements are evaluated by an <em>evaluator</em> against a <em>data context</em>, which determines the truth values of the expression(s). The data context is the origin for some or all of the variables mentioned in the expressions, which may be read from and written to. It may concretely be a retrieved data structure, or data via an API call to the EHR, demographics, laboratory system etc.</p>
</div>
<div class="paragraph">
<p>The data context may be specified in two ways. It may be visible within the artefact or computing context in which the EL statements appear, or it may be specified explicitly. In the first case, the EL instance is minimally a value-returning logical proposition such as <code>$systolic_pressure &gt; 0</code>. This is shown below.</p>
</div>
<div id="EL_design_structure_implicit" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/EL_design_structure-implicit.svg" alt="EL design structure implicit">
</div>
<div class="title">Figure 1. EL design structure - implicit context</div>
</div>
<div class="paragraph">
<p>In the explicit form, an <em>EL text</em> consisting of multiple <em>statements</em> and an explicit context definition is used, as shown below.</p>
</div>
<div id="EL_design_structure_explicit" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/EL_design_structure-explicit.svg" alt="EL design structure explicit">
</div>
<div class="title">Figure 2. EL design structure - explicit context</div>
</div>
<div class="paragraph">
<p>In both cases, the result of parsing into computable form for evaluation must result in an instance of the Expression Object Model (EOM), which will include instances of BMM classes, as these are used to represent the definitions of which expression elements (function calls, variable references etc) are <em>uses</em>.</p>
</div>
<div class="paragraph">
<p>This specification first describes the elements of the EL expression syntax, then the EOM.</p>
</div>
</div>
<div class="sect2">
<h3 id="_expressions_and_ontic_truth"><a class="anchor" href="#_expressions_and_ontic_truth"></a>2.4. Expressions and Ontic Truth</h3>
<div class="paragraph">
<p>No assumption is made about whether the data context used is complete or faithful to reality. Consequently, the <em>expression universe</em> is technically speaking an 'open world' in the sense of the <a href="https://en.wikipedia.org/wiki//Open-world_assumption">open-world assumption</a>. However, higher-level applications or components (or users) may have sufficient knowledge about the data as to be able to treat it in a closed world fashion, for example to treat absence of X as negation of X.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_el_basics"><a class="anchor" href="#_el_basics"></a>3. EL Basics</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_2"><a class="anchor" href="#_overview_2"></a>3.1. Overview</h3>
<div class="paragraph">
<p>The openEHR Expression Language (EL) syntax is defined in a number of layers. The core of the language defines <em>expressions</em>, which are value-returning entities formed by reference or invocation of declared entities such as variables, functions and constants. Expressions may be used in isolation within some larger context in an openEHR system (e.g. Plan or Guideline), with the connection of variables to real-world data being determined implicitly, as described above.</p>
</div>
<div class="paragraph">
<p>The next layer includes non-expression elements, allowing explicit declarations, assignments and control structures, including rules. These are known as <em>statements</em>. A collection of statements may be used within another context in the same way as bare expressions.</p>
</div>
<div class="paragraph">
<p>The fullest form of EL syntax is an <em>EL Text</em> which provides all of the context, terminology, meta-data and so on, enabling the representation of fully-formed guidelines and other similar artefacts.</p>
</div>
<div class="paragraph">
<p>These layers are shown below.</p>
</div>
<div id="EL_language_structure" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/EL_language_structure.svg" alt="EL language structure">
</div>
<div class="title">Figure 3. EL language structure</div>
</div>
</div>
<div class="sect2">
<h3 id="_syntax_style"><a class="anchor" href="#_syntax_style"></a>3.2. Syntax style</h3>
<div class="paragraph">
<p>The syntax style used in EL is of the Pascal variety, i.e. words rather than programming symbols such as braces (<code>{}</code>). The intention is to provide a syntax that is more easily readable to non-IT professionals as well as IT professionals, since it is likely that healthcare professionals will be among the principle authors of EL texts. This choice leads to syntax such as the following.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    -- a universal quantifier expression
    if for_all v in $systolic_bp_samples : v &lt;= Systolic_bp_threshold then
        -- statements
    end

    -- a when/then block
    when $systolic_bp
        matches |&gt;= 200.0| then
            -- statements to raise emergency alert

        matches |&gt;= 180.0| then
            -- statements to request nurse check

        ...
    end</pre>
</div>
</div>
<div class="paragraph">
<p>In the above, nearly all lexical elements are words, such as <code>if</code>, <code>in</code>, <code>when</code>, <code>then</code> and so on, leading to a more natural reading experience.</p>
</div>
<div class="paragraph">
<p>Nevertheless, the style chosen here should not be regarded as fixed forever, and indeed it is a relatively simple matter to create alternative 'syntax skins', such as one for developers used to C language syntax descendants such as Java, TypeScript and so on.</p>
</div>
<div class="paragraph">
<p>The lexical style used is so-called 'snake_case' rather than so-called 'CamelCase', in common with other openEHR specifications, but either may be used in real applications. One reason for using snake-case may be to render EL texts more readable to the non-IT professional.</p>
</div>
</div>
<div class="sect2">
<h3 id="_types"><a class="anchor" href="#_types"></a>3.3. Types</h3>
<div class="paragraph">
<p>The Expression language is fully typed, and <em>assumes</em> the same set of <a href="/releases/BASE/latest/foundation_types.html">Foundation Types</a> as other openEHR components, namely:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>primitive types;</p>
</li>
<li>
<p>container types:</p>
<div class="ulist">
<ul>
<li>
<p><code>List&lt;T&gt;</code>, i.e. an ordered list of elements of primitive type T;</p>
</li>
<li>
<p><code>Set&lt;T&gt;</code>, i.e. a set of elements of primitive type T;</p>
</li>
<li>
<p><code>Hash&lt;K:Ordered,V&gt;</code>, i.e. a Hash table or dictionary;</p>
</li>
</ul>
</div>
</li>
<li>
<p>an interval type:</p>
<div class="ulist">
<ul>
<li>
<p><code>Interval&lt;T: Ordered&gt;</code> where T is any ordered primitive type, i.e. <code>Integer</code>, <code>Real</code>, and any of the Date/time types.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Complex types based on these types may also be used in EL.</p>
</div>
<div class="sect3">
<h4 id="_primitive_types"><a class="anchor" href="#_primitive_types"></a>3.3.1. Primitive Types</h4>
<div class="paragraph">
<p>The primitive types are shown below.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Real value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8601-format date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date_time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8601-format date/time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8601-format time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Duration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8601-format duration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uri in <a href="http://www.ietf.org/rfc/rfc3986">IETF RFC3986</a> format</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Terminology_code</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminology code reference</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Automatic type promotion from <code>Integer</code> to <code>Real</code> applies to all integer and real values and expressions, in the same fashion as most programming languages.</p>
</div>
<div class="paragraph tbd">
<p>TBD: do we need <code>Integer64</code> and <code>Real64</code>?</p>
</div>
</div>
<div class="sect3">
<h4 id="_container_types"><a class="anchor" href="#_container_types"></a>3.3.2. Container Types</h4>
<div class="paragraph">
<p>The same container types as defined in the <a href="/releases/BASE/latest/foundation_types.html#_structure_types">BASE Foundation Types specification</a> are supported in EL, as follows.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Container&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Abstract parent of <code>List</code>, <code>Set</code> and <code>Hash</code> types</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linear list of items of any primitive type, allowing order and repeated membership</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Set&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set of items of any primitive type; no order, unique membership</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Hash&lt;K:Ordered, V&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indexed linear container</p></td>
</tr>
</tbody>
</table>
<div class="paragraph tbd">
<p>TBD: the following is functional style; we would need keywords to enable it in the EL syntax, e.g. <code>has</code> etc. Also, <code>has()</code> can be done via <code>there_exists()</code>.</p>
</div>
<div class="paragraph">
<p>The above types each have an assumed interface consisting of functions and procedures that apply to all members of the container, consistent with the semantics of the container. These include the following.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    has (v: T): Boolean
            -- True if container contains v</pre>
</div>
</div>
<div class="paragraph">
<p>Any such method may be accessed in the usual way, using dot notation, i.e. as shown below for the method <code><em>has()</em></code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    heart_rrate_samples: List&lt;Real&gt;
    High_threshold: Real = 200.0

    if heart_rate_samples.has (High_threshold) then
        -- statements
    end</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_interval_type"><a class="anchor" href="#_interval_type"></a>3.3.3. Interval Type</h4>
<div class="paragraph">
<p>The same <code>Interval</code> type as defined in the <a href="/releases/BASE/latest/foundation_types.html#_interval">BASE Foundation Types specification</a> is supported in EL, as follows.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Interval&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interval of any ordered primitive</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Automatic type promotion from <code>Interval&lt;Integer&gt;</code> to <code>Interval&lt;Real&gt;</code> applies to all integer and real values and expressions, in the same fashion as most programming languages.</p>
</div>
<div class="paragraph tbd">
<p>TBD: the following is functional style; we would need keywords to enable it in the EL syntax, e.g. <code>contains</code>, <code>overlaps</code> etc.</p>
</div>
<div class="paragraph">
<p>Various methods are defined for <code>Interval&lt;T&gt;</code>, as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    has (v: T): Boolean
            -- True if for Interval contains v

    overlaps (other: like Current): Boolean
            -- True if this Interval overlaps other

    contains (other: like Current): Boolean
            -- True if this Interval contains other</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_complex_types"><a class="anchor" href="#_complex_types"></a>3.3.4. Complex Types</h4>
<div class="paragraph">
<p>Complex types may be implicitly accessible, or explicitly imported from formal model definitions specified in the <code>use_model</code> section of an EL text. Such models need to be specified in <a href="/releases/BASE/latest/bmm.html">openEHR BMM format</a>, or any functional equivalent. The types in models included in this way become available within the formalism in the same way as the foundation types, and may be used in declarations etc in the normal way.</p>
</div>
<div class="paragraph">
<p>Access to interior elements of instances of non-primitive types is obtained using 'dot' notation, i.e. the standard way for object-oriented languages.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_el_expressions"><a class="anchor" href="#_el_expressions"></a>4. EL Expressions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3"><a class="anchor" href="#_overview_3"></a>4.1. Overview</h3>
<div class="paragraph">
<p>Formally, an openEHR EL expression is any of the following value-returning entities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>terminal entities</em>:</p>
<div class="ulist">
<ul>
<li>
<p><em>literals</em>;</p>
</li>
<li>
<p><em>constants</em>;</p>
</li>
<li>
<p><em>symbolic variables</em>;</p>
</li>
<li>
<p><em>function calls</em>;</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>predicates</em>:</p>
<div class="ulist">
<ul>
<li>
<p><em>check() predicate</em>: special expression for asserting a truth value;</p>
</li>
<li>
<p><em>defined() predicate</em>: special expression for determing validity of external variable;</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>complex expressions</em> created from:</p>
<div class="ulist">
<ul>
<li>
<p><em>equality operator</em>: equality operator;</p>
</li>
<li>
<p><em>primitive operators</em>: arithmetic operators, relational operators, boolean operators;</p>
</li>
<li>
<p><em>collection operators</em>: logical quantification operators.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of these is described in detail in the following sub-sections.</p>
</div>
<div class="paragraph">
<p>EL is designed syntactically as a readable language while being underpinned by fully class-based functional semantics, which are supplied either by a minimal built-in core, and mostly by bindings to external computing context. In this way, syntax elements such as the '+' operator for the <code>Date</code> type, or the <code>for_all</code> universal quantifier operator may be mapped to underlying methods such as <code>Date.<em>add</em>()</code> and <code>Container.<em>for_all</em>()</code>.</p>
</div>
<div class="paragraph">
<p>EL is not intended for writing functions or classes, rather it is designed as a minimalist logic-based language in which expressions can be written, but whose programming is undertaken inside libraries in existing programming languages. Routine declarations in EL are the primary mechanism to connect external software libraries to the EL context. In EL, both functions and procedures are supported, and are collectively known as <em>routines</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_terminal_entities"><a class="anchor" href="#_terminal_entities"></a>4.2. Terminal Entities</h3>
<div class="paragraph">
<p>This section describes the various kinds of terminal entities that may appear in EL expressions.</p>
</div>
<div class="sect3">
<h4 id="_literals"><a class="anchor" href="#_literals"></a>4.2.1. Literals</h4>
<div class="paragraph">
<p>Literal values are expressed in the <a href="/releases/BASE/latest/odin.html#_primitive_types">ODIN syntax</a>, with the exception of <code>List&lt;T&gt;</code> and <code>Set&lt;T&gt;</code> which are distinguished in EL with specific types of brackets.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Literal value</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>True</code>, <code>False</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code>, <code>-4</code>, <code>1024</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0</code>, <code>0.345</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2004-08-12</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8601-format date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date_time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2004-08-12T12:00:59+0100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8601-format date/time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>12:00:59</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8601-format time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Duration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>P39W</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8601-format duration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"this is a string"</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[blood_pressure]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extract the string value for the symbol <code>blood_pressure</code> from the EL terminology</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://en.wikipedia.org/wiki/Everest" class="bare">https://en.wikipedia.org/wiki/Everest</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uri in <a href="http://www.ietf.org/rfc/rfc3986">IETF RFC3986</a> format</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Terminology_code</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[snomed_ct::389086002]</code><br>
                         <code>[snomed_ct::389086002|Hypoxia|]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminology code in openEHR format</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[val, val, &#8230;&#8203;]</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Set&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{val, val, &#8230;&#8203;}</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Hash&lt;K:Ordered, V&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;<br>
                              ["key1"] = &lt;val1&gt;<br>
                              ["key2"] = &lt;val2&gt;<br>
                              &#8230;&#8203;<br>
                              ["keyN"] = &lt;valN&gt;<br>
                         &gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A table of values of any type V,<br>
                                                                 keyed by values of any <code>Ordered</code> descendant K,<br>
                                                                 typically <code>String</code> or <code>Integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Interval&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|N..M|</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the two-sided interval N &gt;= x &lt;= M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|&gt;N..M|</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the two-sided interval N &gt; x &lt;= M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|N..&lt;M|</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the two-sided interval N &gt;= x &lt; M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|&lt;N|</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the one-sided interval x &lt; N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|&gt;N|</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the one-sided interval x &gt; N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|&lt;=N|</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the one-sided interval x &lt;= N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|&gt;=N|</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the one-sided interval x &gt;= N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|N +/-M|</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the two-sided interval of N M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|NM|</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the two-sided interval of N M</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Literal values may be used in EL expressions, as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    $kmh := 1.6 * $mph</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_constants"><a class="anchor" href="#_constants"></a>4.2.2. Constants</h4>
<div class="paragraph">
<p>Symbolic constants may be used in any EL expression. As with variables, constants are typed, and are either declared explicity in the EL text (see <a href="#_declarations">next section</a>), or assumed to be available in the execution environment. Constants are syntactically represented using labels of whch the first letter is capitalised, and may be of any type, including complex types. The following are EL statements using constants.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    $kmh := Mph_to_kmh_factor * $mph
    Safe_glucose_limits.has ($glucose_meas)</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_variables"><a class="anchor" href="#_variables"></a>4.2.3. Variables</h4>
<div class="paragraph">
<p>Symbolic variables are of two types: local and external. Local variables are represented by plain names such as <code>is_smoker</code>, and are typically used as intermediate variables within a larger set of statements that generates some final value.</p>
</div>
<div class="paragraph">
<p>External variables represent data entities in the operational data context, and are either assumed from elsewhere in the computational context, or else declared in a <code>data_context</code> section (see <a href="#_declarations">next section</a>).</p>
</div>
<div class="paragraph">
<p>Typical expressions containing variables are as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    $glucose &lt; 6.5                          -- an external variable

    age := current_date() - $date_of_birth  -- age is a local variable</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_function_calls"><a class="anchor" href="#_function_calls"></a>4.2.4. Function Calls</h4>
<div class="paragraph">
<p>In EL expressions, computational functions may be used in the same way as programming languages. The following example shows a function declaration for a function <code><em>tnm_major_number</em>()</code> that extracts various elements of <a href="https://en.wikipedia.org/wiki//TNM_staging_system">Tumour/Node/Metastasis ('TNM')</a> cancer staging values, such as <code>'Tis'</code>, <code>'G3'</code> and so on, and uses them in a Boolean expression whose value is assigned to the variable <code>is_luminal_A</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    is_luminal_A := tnm_major_number ($tnm_t) &lt; 3 and
                     tnm_major_number ($tnm_n) &lt; 2 and
                     tnm_major_number ($tnm_g) &lt; 3</pre>
</div>
</div>
<div class="paragraph">
<p>To be evaluated, function calls must be mappable to class methods in external libraries that are available at EL statement execution time.</p>
</div>
</div>
<div class="sect3">
<h4 id="_built_in_functions"><a class="anchor" href="#_built_in_functions"></a>4.2.5. Built-in Functions</h4>
<div class="paragraph">
<p>Some common functions are assumed to be provided in an EL environment, in order to enable EL expressions to be more standardised. These can be provided by the implementation using the above methods of declaration and external binding.</p>
</div>
<div class="paragraph">
<p>The built-in functions are listed below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    current_date(): Date                   -- obtain today's date
    current_time(): Time                   -- obtain the current clock time
    current_date_time(): Date_time         -- obtain the current date and time

    sum (Container&lt;T: Numeric&gt;): T         -- compute the sum of members in a container
    min (Container&lt;T: Numeric&gt;): T         -- compute the minimum value in a container
    max (Container&lt;T: Numeric&gt;): T         -- compute the maximum value in a container
    avg (Container&lt;T: Numeric&gt;): T         -- compute the average value in a container

    count (Container&lt;T&gt;): Integer          -- compute the number of items in a container</pre>
</div>
</div>
<div class="paragraph">
<p>These functions operate as a shorthand for underlying object-oriented calls defined on various kinds of objects, and would be implemented by such mappings. For example, <code><em>current_date</em>()</code> might be mapped to a <code><em>now</em>()</code> function on the type <code>Date</code>. The statistical functions <code><em>sum</em>()</code> etc might be mapped to functions of similar names on types such as <code>Container_numeric</code>, derived from <code>Container&lt;T: Numeric&gt;</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_predicates"><a class="anchor" href="#_predicates"></a>4.3. Predicates</h3>
<div class="paragraph">
<p>EL predicates are special meta-operators that enable execution to be modified depending on the truth values and availability of referenced data items.</p>
</div>
<div class="sect3">
<h4 id="_check_predicate"><a class="anchor" href="#_check_predicate"></a>4.3.1. check() Predicate</h4>
<div class="paragraph">
<p>In various circumstances, exceptions may be generated by EL expression evaluation. This primarily occurs when the value of a bound variable is undefined. EL provides a way of controlling execution when exceptions may occur, using a <code>check</code> expression, as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    check ($heart_rate &gt; 0.0)</pre>
</div>
</div>
<div class="paragraph">
<p>The meaning of this expression is that if the condition evaluates to <code>False</code>, a <code>check violation</code> is generated, which may be handled by an exception handler.</p>
</div>
<div class="paragraph">
<p>The <code>check</code> instruction can be used in a conditional block to ensure certain conditions hold on entry to the block, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    if check ($heart_rate &gt; 0.0) then
        -- statements mentioning $heart_rate
    end</pre>
</div>
</div>
<div class="paragraph tbd">
<p>TBD describe exception handling.</p>
</div>
</div>
<div class="sect3">
<h4 id="_defined_predicate"><a class="anchor" href="#_defined_predicate"></a>4.3.2. defined() Predicate</h4>
<div class="paragraph">
<p>Variables that are bound to entities in the data context function differently from local variables, since their availability is predicated on the existence of the relevant entities. For example, the variable <code>body_weight</code> may be bound to a call that retrieves a patient weight from the EHR, via an appropriate API call. There is no guarantee that the value is available, so <code>body_weight</code> may therefore be undefined in a sense not applicable to local variables. In a programming language, if a variable is not explicitly set, it has either the default value of the type (e.g. <code>0</code> for <code>Integer</code>) or a random value of the correct type. This behaviour is appropriate for local variables, but for bound variables that cannot be evaluated because the external entity does not exist, an explicit mechanism is needed to test for validity.</p>
</div>
<div class="paragraph">
<p>The approach used for EL is to allow bound variables to be used freely, as for local variables, but if a bound variable cannot be evaluated from the data context, an <code>'undefined value'</code> exception is generated, indicating which variable could not be evaluated. To impose more control, the predicate <code>defined ()</code> can be used within a <code>check</code> statement to ensure that one or more variables can be populated before proceeding with logic that depends on them, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    if defined ($heart_rrate) and defined (blood_pressure) then
        -- statements mentioning $heart_rrate and blood_pressure
    end

    if check (defined ($heart_rrate) and defined (blood_pressure)) then  -- generates exception if False
        -- statements mentioning $heart_rrate and blood_pressure
    end</pre>
</div>
</div>
<div class="paragraph">
<p>Another difference between bound and local variables is when they are evaluated. In the execution of a larger EL text containing multiple mentions of a bound variable <code>v</code>, is <code>v</code> read from the data context only once, at the first mention, or is it evaluated new each time, or on some other basis? The approach used in EL is to allow the evaluation basis to be stated in the context binding section of an EL text using the <code><em>currency</em></code> property.</p>
</div>
<div class="paragraph">
<p>To assert that a certain part of a larger data structure exists depending on values elsewhere (usually in the same structure, but not necessarily), the following construct can be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    check (is_smoker implies defined (smoking_details))</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_complex_expressions"><a class="anchor" href="#_complex_expressions"></a>4.4. Complex Expressions</h3>
<div class="paragraph">
<p>Complex expressions in EL consist of non-atomic value-returning expressions, in a familiar typed, operator-based syntax common to many programming languages and logics. In EL, the syntactic use of operators is understood as a shorthand for certain functions assumed to be available on certain types, and an EL implementation would map such operators to the appropriate methods in a class library.</p>
</div>
<div class="sect3">
<h4 id="_equality_operator"><a class="anchor" href="#_equality_operator"></a>4.4.1. Equality Operator</h4>
<div class="paragraph">
<p>The equality operator <code>=</code> is special in EL as in most languages, and has two meanings. For all primitive types, the semantics are value comparison, while for container and other non-primitive types, the semantics are reference comparison.</p>
</div>
</div>
<div class="sect3">
<h4 id="_primitive_operators"><a class="anchor" href="#_primitive_operators"></a>4.4.2. Primitive Operators</h4>
<div class="paragraph">
<p>Primitive operators in EL are the infix or prefix syntax form of various functions available on primitive types. For example, the operator <code>-</code> (minus) is defined on the class <code>Numeric</code> (an inheritance ancestor of the classes <code>Integer</code>, <code>Real</code> etc) as the following (using syntax from Java, TypeScript and similar languages):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    function minus&lt;T extends Numeric&gt; (other: T): T</pre>
</div>
</div>
<div class="paragraph">
<p>This means that where the expression <code>100 - 5</code> is encountered in EL, what is really invoked is <code>Integer.<em>minus</em>()</code>, i.e. <code>100.minus(5)</code>.</p>
</div>
<div class="paragraph">
<p>The operators for Numeric and Boolean types supported in EL are shown below.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 50.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Identifier</th>
<th class="tableblock halign-left valign-top">Textual<br>
               Rendering</th>
<th class="tableblock halign-left valign-top">Symbolic<br>
                               Rendering</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock">Arithmetic Operators - Numeric operands and result; descending precendence order</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">exp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exponentiation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">times</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiplication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">divide</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Division</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modulo (whole number) division</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">plus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Addition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">minus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtraction</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock">Relational Operators - Numeric, Date/time operands and Boolean result; equal precedence</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">eq</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value equality</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ne</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">!=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inequality relation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Less than relation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">le</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Less than or equal relation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Greater than relation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Greater than or equal relation</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock">Logical Operators - Boolean operands and result; descending precendence order</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">not, ~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negation, "not p"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">and</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">and</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logical conjunction, "p and q"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">or</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">or</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logical disjunction, "p or q"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">xor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exclusive or, "only one of p or q"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">implies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">implies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Material implication, "p implies q", or "if p then q"</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock">Constraint Operators - Boolean result</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">matches</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">matches</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set membership, as per <a href="/releases/AM/latest/ADL2.html">openEHR ADL</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In addition, some operators are defined on the other primitive types, corresponding to underlying functions defined on the relevant types. These are as follows:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Typical<br>
                 method</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-center valign-top" colspan="3"><p class="tableblock">String Operators</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>append(other: String)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String concatenation, appending</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="3"><p class="tableblock">Date/time arithmetic operators</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date.add(d: Duration): Date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a duration to a date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Time.add(d: Duration): Time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a duration to a time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date_time.add(d: Duration): Date_time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a duration to a date/time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Duration.add(d: Duration): Duration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a duration to a duration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date.subtract(d: Duration): Date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract a duration from a date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Time.subtract(d: Duration): Time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract a duration from a time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date_time.subtract(d: Duration): Date_time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract a duration from a date/time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Duration.subtract(d: Duration): Duration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract a duration from a duration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date.diff(d: Date): Duration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Difference of two dates</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Time.diff(d: Time): Duration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Difference of two times</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date_time.diff(d: Date_time): Duration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Difference of two date/times</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="3"><p class="tableblock">Duration arithmetic operators</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Duration.add(d: Duration): Duration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a duration to a duration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Duration.subtract(d: Duration): Duration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract a duration from a duration</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Operator semantics that require further explanation are described below.</p>
</div>
<div class="sect4">
<h5 id="_logical_negation"><a class="anchor" href="#_logical_negation"></a>4.4.2.1. Logical Negation</h5>
<div class="paragraph">
<p>All Boolean operators take Boolean operands and generate a Boolean result. The <code>not</code> operator can be applied as a prefix operator to all operators returning a Boolean result as well as a parenthesised Boolean expression.</p>
</div>
</div>
<div class="sect4">
<h5 id="_precedence_and_parentheses"><a class="anchor" href="#_precedence_and_parentheses"></a>4.4.2.2. Precedence and Parentheses</h5>
<div class="paragraph">
<p>The precedence of operators follows the order shown in the operator tables above. To change precedence, parentheses can be used in the fashion typical of most programming languages, as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    at_risk := $systolic_bp &gt; 140 and ($is_smoker or $is_hypertensive)</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_collection_operators"><a class="anchor" href="#_collection_operators"></a>4.4.3. Collection Operators</h4>
<div class="paragraph">
<p>A common need in an expression language featuring container types (i.e. sets, lists etc) is the need to perform basic reasoning over them. The two standard operators from predicate logic <code>there exists</code> ( operator) and <code>for all</code> ( operator) are defined in EL for the container types, and are kinds of Boolean-returning expressions.</p>
</div>
<div class="paragraph">
<p>The syntax of <code>there exists</code> is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    there_exists v in container_var : &lt;Boolean expression mentioning v&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Here, the <code>:</code> symbol is usually read in English as 'such that'. The expression may be used as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    if there_exists v in $systolic_bp_samples : v &gt; Systolic_bp_threshold then
        -- statements
    end</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>for_all</code> operator has similar syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    for_all v in container_var : &lt;Boolean expression mentioning v&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Here, the <code>:</code> symbol is normally read as 'it holds that' A typical use is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    if for_all v in $systolic_bp_samples : v &lt;= Systolic_bp_threshold then
        -- statements
    end</pre>
</div>
</div>
<div class="paragraph">
<p>The syntactic form of these two operators can be understood as a shorthand for the following underlying functions defined on the container types, available in most programming language libraries. The argument to both functions is a function object with signature <code>&lt;v:T&gt;: Boolean</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    there_exists (test(v: T): Boolean): Boolean
            -- True if there is any v in container for which test (v) is True

    for_all (test(v: T): Boolean): Boolean
            -- True if for every v in container, test (v) is True</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_el_statements"><a class="anchor" href="#_el_statements"></a>5. EL Statements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_4"><a class="anchor" href="#_overview_4"></a>5.1. Overview</h3>
<div class="paragraph">
<p>There are various kinds of non-expression statement in EL including <em>declarations</em>, <em>assignments</em> and <em>control structures</em>. None is value-returning, in contrast to the expression elements of the language. In order to represent these elements, a structure of EL statements consisting of several sections is assumed. The main statements occur in a <code>definition</code> section, while two other optional sections are added, enabling constants and external variable declarations respectively to be made.</p>
</div>
<div class="paragraph">
<p>The logical structure of an EL structured text is thus as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>reference
    &lt;declarations of constants&gt;

data_context
    &lt;declarations of external '$' variables&gt;

definition
    &lt;statements&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The following subsections describe these elements.</p>
</div>
</div>
<div class="sect2">
<h3 id="_declarations"><a class="anchor" href="#_declarations"></a>5.2. Declarations</h3>
<div class="sect3">
<h4 id="_constants_2"><a class="anchor" href="#_constants_2"></a>5.2.1. Constants</h4>
<div class="paragraph">
<p>Constants are defined via the use of the equality operator <code>=</code> in type declarations in the <code>reference</code> section, as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>reference
    Mph_to_kmh_factor: Real = 1.6
    Pounds_to_kg: Real = 0.4536
    Safe_glucose_limits: Interval&lt;Real&gt; = |0.0..6.5|</pre>
</div>
</div>
<div class="paragraph">
<p>The result of the declaration is to define the symbols <code>Mph_to_kmh_factor</code> and <code>Pounds_to_kg</code> as immutable constants.</p>
</div>
<div class="paragraph">
<p>Constants of complex types are declared using the ODIN syntax, for example, the following manifest value of type <code>DV_QUANTITY</code> from the <a href="/releases/RM/latest/data_types.html">openEHR Data Types Model</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>reference
    Threshold_ogtt_glucose: DV_QUANTITY = &lt;
        magnitude = &lt;6.5&gt;
        units = &lt;"mmol/L"&gt;
    &gt;</pre>
</div>
</div>
<div class="paragraph tbd">
<p>TBD: could also use archetype fragments here, as matching templates.</p>
</div>
</div>
<div class="sect3">
<h4 id="_variables_2"><a class="anchor" href="#_variables_2"></a>5.2.2. Variables</h4>
<div class="paragraph">
<p>Symbolic variables are declared in two forms. The syntax <code>name: Type</code> is used for local variables, which are declared in the <code>definition</code> section.</p>
</div>
<div class="paragraph">
<p>External vraiables are declared in the <code>data_context</code> section, using the syntax <code>in|out|in_out name: Type</code>. The direction specifier indicates the intended use of the variable in the defnition, i.e. <code>in</code> = readable, <code>out</code> = writable, <code>in_out</code> = readable and writable.</p>
</div>
<div class="paragraph">
<p>In both cases, multiple variables may be declared on the same line. The following shows various declarations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>data_context
    in $date_of_birth: Date
    in $weight, height: Real
    out $bmi: Real
    in $bp_obs: OBSERVATION;

definition
    age_in_years: Integer
    heart_rate_samples: List&lt;Real&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Every external variable must have a counterpart in the EL data context to be processable.</p>
</div>
<div class="paragraph">
<p>With explicit declarations added, the earlier <code>there_exists</code> examples is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>reference
    Systolic_bp_threshold: Real = 160.0

data_context
    $systolic_bp_samples: List&lt;Real&gt;

definition
    if there_exists v in $systolic_bp_samples : v &gt; Systolic_bp_threshold then
        -- statements
    end</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_functions_and_procedures"><a class="anchor" href="#_functions_and_procedures"></a>5.2.3. Functions and Procedures</h4>
<div class="paragraph">
<p>In EL, the functions and procedures are the primary means to make complex logic available to expressions. Both functions and procedures are supported, and are collectively known as <em>routines</em>.</p>
</div>
<div class="paragraph">
<p>In EL, a function is a routine that returns a result and is assumed to have no side-effects on previously declared entities. It has a signature of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    -- NB: not EL syntax
    &lt;T_arg1, T_arg2, ....&gt;: T_result</pre>
</div>
</div>
<div class="paragraph">
<p>Typical examples of function signatures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    -- NB: not EL syntax
    : Date                          -- signature of a 0-order function like current_date()
    &lt;Real, Real&gt;: Real              -- signature of a 2nd-order function like '*' for the domain R
    &lt;Integer, Integer&gt;: Integer     -- signature of a 2nd-order function like 'add' for the domain I</pre>
</div>
</div>
<div class="paragraph">
<p>EL does not provide a way to programmatically define routines (i.e. it does not try to be a programming language), instead, it provides a way of <em>declaring routine signatures</em>, using the <code>func</code> keyword. This is similar to the declaration of methods in interface classes in languages like C# and Java.</p>
</div>
<div class="paragraph">
<p>Examples of function declarations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>definition
    func current_date(): Date                        -- a function that obtains today's date
    func bmi_metric (a_height, a_weight:Real): Real  -- a function that computes BMI from metric inputs
    func sum (a_list: List&lt;Real&gt;): Real              -- a function that computes the sum of a list of Reals</pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows a function declaration for a function <code><em>tnm_major_number</em>()</code> that extracts various elements of <a href="https://en.wikipedia.org/wiki//TNM_staging_system">Tumour/Node/Metastasis ('TNM')</a> cancer staging values, such as <code>'Tis'</code>, <code>'G3'</code> and so on, and uses them in a Boolean expression whose value is assigned to the variable <code>is_luminal_A</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    func tnm_major_number (tnm_val: String): Integer

    is_luminal_A: Boolean := tnm_major_number ($tnm_t) &lt; 3 and
                             tnm_major_number ($tnm_n) &lt; 2 and
                             tnm_major_number ($tnm_g) &lt; 3</pre>
</div>
</div>
<div class="paragraph">
<p>A procedure is a routine with a signature of the form <code>&lt;T_arg1, T_arg2, &#8230;&#8203;.&gt;</code>, i.e. a call taking 0 or more arguments, with no return type. Typical signatures include the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    -- NB: not EL syntax
    &lt;Real&gt;                          -- a 1st-order procedure for the domain R
    &lt;String, Integer&gt;               -- signature of a procedure taking a String and an Integer argument</pre>
</div>
</div>
<div class="paragraph">
<p>Procedures must be declared before use. This is done using the same syntax as for functions, as in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    proc alert_user (message: String; priority: Integer)    -- a procedure that generates a user alert</pre>
</div>
</div>
<div class="paragraph">
<p>Functions and procedures are mapped to class methods in external libraries in the <a href="#_computing_bindings">Computing Bindings</a> section of an EL text.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_assignment"><a class="anchor" href="#_assignment"></a>5.3. Assignment</h3>
<div class="paragraph">
<p>An assignment is a kind of statement used to assign the value of an expression to a writable variable using the <code>:=</code> operator. An assignment may be made in a local variable declaration in the same way as in many programming languages. The right hand side of an assignment is any value-returning expression. Typical assignments are illustrated below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>definition
    speed_kmh: Real                             -- declaration
    speed_mph: Real := 35.0                     -- assignment in a declaration (not a constant)

    speed_kmh := speed_mph * Mph_to_kmh_factor  -- assignment</pre>
</div>
</div>
<div class="paragraph">
<p>The following shows an assignment with an expression using a function and an external variable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>data_context
    in $date_of_birth: Date

definition
    age: Duration
    age := current_date() - $date_of_birth
    ...</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_procedure_invocation"><a class="anchor" href="#_procedure_invocation"></a>5.4. Procedure Invocation</h3>
<div class="paragraph">
<p>EL supports the invocation of procedures in the same way as for functions. Computationally both are the same, being invocations of class methods or other functions defined in bound libraries.</p>
</div>
<div class="paragraph">
<p>The following shows a typical procedure declaration and invocation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    proc alert_user (message: String; priority: Integer)    -- a procedure that generates a user alert

    if $systolic_bp_meas &gt; 180.0 then
        alert_user ([dangerous_blood_pressure], 1)          -- call the procedure
    end</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_control_structures"><a class="anchor" href="#_control_structures"></a>5.5. Control Structures</h3>
<div class="paragraph">
<p>Two control structures are provided in EL. They provide conditional logic structures from which statements (i.e. assignments and procedure calls) can be executed. Control structures may be nested in the usual way.</p>
</div>
<div class="sect3">
<h4 id="_if_then"><a class="anchor" href="#_if_then"></a>5.5.1. If / then</h4>
<div class="paragraph">
<p>In common with most programming languages, EL provides a standard 'if / then / elseif / else' structure, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>data_context
    in $systolic_bp_meas: Real     -- from instrument
    in thyroid_t3: Real            -- from EHR

definition
    if $systolic_bp_meas &gt; 160.0 then
        alert_user ([dangerous_blood_pressure], 1)

    elseif $systolic_bp_meas &gt; 140.0 and thyroid_t3 &gt; 200 then
        inform_user ([raised_bp_and_abnormal_thyroid_activity], 2)

    else
        -- other cases
    end</pre>
</div>
</div>
<div class="paragraph">
<p>This structure is always evaluated in order.</p>
</div>
</div>
<div class="sect3">
<h4 id="_when_then"><a class="anchor" href="#_when_then"></a>5.5.2. When / then</h4>
<div class="paragraph">
<p>EL provides a <code>when / matches / then</code> statement that is roughly equivalent to 'case' or 'switch' statements in most other languages. The <code>when</code> part indicates a  value-returning expression (such as a variable reference), which may be of any type, while the <code>matches</code> parts define value intervals that are used to match the <code>when</code> value. The first branch matched is executed.</p>
</div>
<div class="paragraph">
<p>the syntax is as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    when &lt;expression&gt;
        matches &lt;value_interval_1&gt; then
            -- statements
        matches &lt;value_interval_2&gt; then
            -- statements
            ...
        matches &lt;value_interval_N&gt; then
            -- statements

        else
            -- statements
    end</pre>
</div>
</div>
<div class="paragraph">
<p>The syntax for the match intervals is the standard EL Interval type literal syntax. An example 'when / then' statement is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>data_context
    in $systolic_bp_meas: Real     -- from instrument

definition
    when $systolic_bp_meas
        matches |&gt;= 180.0| then
            alert ([dangerous_blood_pressure], 0)

        matches |&gt;= 160.0| then
            alert ([high_blood_pressure], 1)
    end</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_el_texts"><a class="anchor" href="#_el_texts"></a>6. EL Texts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_5"><a class="anchor" href="#_overview_5"></a>6.1. Overview</h3>
<div class="paragraph">
<p>The Expression Language may be used to write a self-standing <em>EL text</em> that in addition to the EL statements, contains data context definitions, terminology and other meta-data, in a structure similar to an archetype. Such a text constitutes a sufficient input to a parser / generator to build a complete computational representation as an instance of the Expression Object Model (EOM).</p>
</div>
<div class="paragraph">
<p>The core sections of an EL text are expressed in the sections described above, i.e. <code>reference</code>, <code>data_context</code>, and <code>definition</code>. The data context declarations may be thought of parameter lists of input and output variables from the external world (e.g. measured from a patient) for the <code>definition</code> section, which contains the main logic.</p>
</div>
<div class="paragraph">
<p>The symbols used in statements are <em>names</em> in the fashion of any typical programming language, but are also considered <em>codes</em> to which linguistic definitions can be attached for use in the UI and other human-consumable renderings (e.g. documents). This is done in a <code>terminology</code> section of an EL text, in the same way as for the <a href="/releases/AM/latest/docs/index">openEHR archetype formalism</a>. For example, the symbol <code>$heart_rate</code> of type <code>Integer</code> may have the linguistic definitions "heart rate" (English) and "frequncia cardaca" (Portuguese).</p>
</div>
<div class="paragraph">
<p>Mappings between external variables and external entities are described by <em>bindings</em> in a <code>data_bindings</code> section. For example, the expression <code>$heart_rate &gt; 50</code> is an assertion about values found in some data - i.e. <code>$heart_rate</code> is an external variable that may be mapped to an entity representing an actual heart rate measurement. Each data binding states where a variable&#8217;s value is obtained from (e.g. some larger data entity such as a document or message, or via an API call). This provides clear semantics for statements in the expression text that mention such variables.</p>
</div>
<div class="paragraph">
<p>In addition to these computable sections, various meta-data sections are added, including the <code>description</code> and <code>language</code> sections defined by the <a href="/releases/BASE/latest/resource.html">openEHR Resource specification</a>, and an identification line at the top. As with archetypes, the sections other than <code>use_model</code>, <code>reference</code>, <code>data_context</code>, and <code>definition</code> are expressed in <a href="/releases/BASE/latest/odin.html">openEHR ODIN syntax</a>.</p>
</div>
<div class="paragraph">
<p>Finally, EL texts can be defined modularly, uniquely identified, and included into other EL texts via the <code>import</code> keyword.</p>
</div>
<div class="paragraph">
<p>The structure of a self-standing EL text is thus as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;identifier&gt;

import
    &lt;identifier&gt;
    &lt;identifier&gt;
    ...

language
    original_language = &lt;...&gt;
    translations = &lt;...&gt;

description
    &lt;descriptive meta-data&gt;

use_model
    &lt;model ids&gt;

reference
    &lt;constant definitions&gt;

data_context
    &lt;declarations&gt;

definition
    &lt;statements&gt;

terminology
    &lt;symbol_definitions&gt;

data_bindings
    &lt;symbol bindings&gt;

computing_bindings
    &lt;method bindings&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>An example of an EL text representing the common clinical health measure 'BMI' (body mass index) is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="adl"><span class="tok-err">openEHR-EOM.bmi.v1</span>

<span class="tok-gh">language</span>
    <span class="tok-nc">original_language</span> <span class="tok-o">=</span> <span class="tok-p">&lt;[</span><span class="tok-nd">ISO_639-1</span><span class="tok-p">::</span><span class="tok-nd">en</span><span class="tok-p">]&gt;</span>
    <span class="tok-nc">translations</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;pt&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span>
    <span class="tok-p">&gt;</span>

<span class="tok-gh">description</span>
    <span class="tok-nc">lifecycle_state</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;unmanaged&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-nc">original_author</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span>
    <span class="tok-nc">details</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;pt&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">language</span> <span class="tok-o">=</span> <span class="tok-p">&lt;[</span><span class="tok-nd">ISO_639-1</span><span class="tok-p">::</span><span class="tok-nd">pt</span><span class="tok-p">]&gt;</span>
            <span class="tok-nc">purpose</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;Clculo do peso do corpo&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">use</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;...&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>

<span class="tok-s">use_model</span>
    <span class="tok-nc">org</span><span class="tok-err">.</span><span class="tok-nc">openehr</span><span class="tok-err">.</span><span class="tok-nc">rm</span>

<span class="tok-s">data_context</span>
    <span class="tok-nc">in</span> <span class="tok-err">$</span><span class="tok-nc">body_weight</span><span class="tok-p">,</span> <span class="tok-err">$</span><span class="tok-l">height:</span><span class="tok-p"> </span><span class="tok-err">R</span><span class="tok-nc">eal</span>
    <span class="tok-nc">out</span> <span class="tok-err">$</span><span class="tok-l">bmi:</span><span class="tok-p"> </span><span class="tok-err">R</span><span class="tok-nc">eal</span>

<span class="tok-gh">definition</span>
    <span class="tok-err">$</span><span class="tok-nc">bmi</span> <span class="tok-err">:</span><span class="tok-o">=</span> <span class="tok-err">$</span><span class="tok-nc">body_weight</span> <span class="tok-p">/ </span><span class="tok-err">$</span><span class="tok-nc">height</span> <span class="tok-o">^</span> <span class="tok-mi">2</span>

<span class="tok-gh">terminology</span>
    <span class="tok-nc">symbol_definitions</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;en&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;body_weight&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">text</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;body weight&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">description</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;weight of subject body&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;height&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;bmi&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">text</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;body mass index&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">description</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;body mass index&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;pt&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;body_weight&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">text</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;peso do corpo&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">description</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;peso do corpo do sujeito&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;height&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;bmi&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">text</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;ndice de massa corporal&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">description</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;ndice de massa corporal&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>

<span class="tok-s">data_bindings</span>
    <span class="tok-nc">content_bindings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;openEHR-EHR-OBSERVATION.body_measurements.v1&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;body_weight&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">target</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;/data/events[id3]/data/items[id5]/value/magnitude&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">direction</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;in&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;height&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">target</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;/data/events[id3]/data/items[id6]/value/magnitude&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">direction</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;in&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;openEHR-EHR-OBSERVATION.body_mass_index.v1&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;body_mass_index&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">target</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;/data/events[id3]/data/items[id5]/value/magnitude&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">direction</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;out&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When used within other artefacts, EL expressions may be expressed as a merger of sections normally found in a self-standing EL text, and those of the enclosing structure. For example, EL definitions may be embedded in openEHR archetypes or templates by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>including the definitions in the <code>rules</code> section;</p>
</li>
<li>
<p>adding the EL text <code>symbol_definitions</code> section to the archetype <code>terminology</code> section;</p>
</li>
<li>
<p>adding the <code>data_bindings</code> and <code>computing_bindings</code> as additional sections.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_terminology"><a class="anchor" href="#_terminology"></a>7. Terminology</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An EL text may have a terminology defined for it, which enables natural language renderings of its symbols to be defined. This is done in exactly the same way as the definition of terms in <a href="/releases/AM/latest/ADL2.html#_terminology_section">ADL2</a> (semantics defined by AOM2). The only difference from terminology definition in openEHR archetypes is that instead of the code names being of the form <code>idN</code>, <code>atN</code> and <code>acN</code>, they are simply the symbolic variable names. Since symbolic variables are normally defined to be meaningful in their own right (i.e. in the same way as by programmers using typical programming languages), EL texts and expressions are readable in one language (just as say, Java library code published by Oracle) but additionally translatable for rendering purposes to any language for which there is a translation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="adl"><span class="tok-err">openEHR-bmi.v1</span>

<span class="tok-gh">language</span>
    <span class="tok-nc">original_language</span> <span class="tok-o">=</span> <span class="tok-p">&lt;[</span><span class="tok-nd">ISO_639-1</span><span class="tok-p">::</span><span class="tok-nd">en</span><span class="tok-p">]&gt;</span>
    <span class="tok-nc">translations</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;pt-br&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">language</span> <span class="tok-o">=</span> <span class="tok-p">&lt;[</span><span class="tok-nd">ISO_639-1</span><span class="tok-p">::</span><span class="tok-nd">pt-br</span><span class="tok-p">]&gt;</span>
            <span class="tok-nc">author</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-p">[</span><span class="tok-s">&quot;name&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;Jussara Rzsch&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-p">[</span><span class="tok-s">&quot;organisation&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;OpenEHR  Foundation&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-p">[</span><span class="tok-s">&quot;email&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;jussara.macedo@gmail.com&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
            <span class="tok-nc">accreditation</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;Medical Doctor, Psychiarist, ...&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>

<span class="tok-gh">description</span>
    <span class="tok-p">...</span>

<span class="tok-gh">definition</span>
    <span class="tok-p">...</span>

<span class="tok-gh">terminology</span>
    <span class="tok-nc">symbol_definitions</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;en&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;body_weight&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">text</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;body weight&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">description</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;weight of subject body&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;height&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;bmi&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">text</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;body mass index&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">description</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;body mass index&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;pt&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;body_weight&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">text</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;peso do corpo&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">description</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;peso do corpo do sujeito&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;height&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;bmi&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">text</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;ndice de massa corporal&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">description</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;ndice de massa corporal&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_bindings"><a class="anchor" href="#_data_bindings"></a>8. Data Bindings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Expressions in the openEHR Expression Language contain variables, which may be <em>bound</em> to entities in a <em>data context</em>. Each binding connects a symbolic variable to a data source or target in the data context.</p>
</div>
<div class="sect2">
<h3 id="_binding_model"><a class="anchor" href="#_binding_model"></a>8.1. Binding Model</h3>
<div class="paragraph">
<p>The model of binding of a symbolic variable in an expression to an external entity varies, depending on specifics of system architecture. The taxonomy shown below illustrates the various forms of context that are assumed to exist. There are two essential types: <em>execution context</em> and <em>content context</em>. The first corresponds to obtaining the required data item from the current execution context, either via an <em>API call</em>, running a <em>query</em>, or <em>interactive</em>, i.e. via an application.</p>
</div>
<div id="data_binding_taxonomy" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/data_binding_taxonomy.svg" alt="data binding taxonomy">
</div>
<div class="title">Figure 4. Taxonomy of data binding</div>
</div>
<div class="paragraph">
<p>For variables declared as <code>in</code> and <code>in_out</code> in the EL text, in addition to binding targets, it is may be important to state the <em>data quality</em>, typically at least <em>currency</em> i.e. how recent the data must be to be valid. In the various types of binding, data quality may be specified in different ways. For example, for the content context type, data currency of the data is assumed (i.e. not stated). In the API call case, it may be explicitly specified, whilst in the query case, it will normally be specified within the query e.g. by means of a <code>WHERE</code> clause expression that references a relevant time-related meta-data item.</p>
</div>
<div class="paragraph">
<p>Another aspect of data quality is <em>when</em> a bound variable is sampled from its external context with respect to the execution of rules or expressions mentioning it. The default is that it is sampled once at the start of execution of a rule set containing expressions that mention the variable, i.e. at the point of parsing the context definition. However if a rule set is repeatedly evaluated, some variables may require sampling in real time, whereas others might only need to be sampled once, or less frequently. For example, for a rule set that is executed every minute, patient vital signs variables usually need to be sampled each time, whereas a variable like patient weight need only be sampled once per day.</p>
</div>
<div class="paragraph">
<p>In a data context definition, bindings of the various concrete types are stated. Within each type, the individual variable bindings are expressed with repect to an <em>index context</em>, which varies depending on the binding type. The general structure of a data bindings definition is as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>data_bindings
    content_bindings
        index_context_id
            var_name
                binding_definition
            var_name
                binding_definition
    api_bindings
        index_context_id
            var_name
                binding_definition
    query_bindings
        index_context_id
            var_name
                binding_definition
    interactive_bindings
        index_context_id
            var_name
                binding_definition</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>binding_definition</code> elements are data structures whose contents instantiate the model of each kind of binding. In the examples below, these are shown in <a href="/releases/BASE/latest/odin.html">ODIN syntax</a>.</p>
</div>
<div class="sect3">
<h4 id="_content_binding"><a class="anchor" href="#_content_binding"></a>8.1.1. Content Binding</h4>
<div class="paragraph">
<p>A content context corresponds to data assumed to be available within a larger data entity such as a document or other structure, being the result of a prior retrieval or data creation. In this case i.e. the variable is bound to a data item within the content structure, identified by a path or identifier.</p>
</div>
<div class="paragraph">
<p>Binding of a variable to a <em>content context</em> is done by mapping the variable to an item within the context, such as an openEHR archetype or template, as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">data_bindings</span>
    <span class="tok-nc">content_bindings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;openEHR-EHR-COMPOSITION.encounter.v1&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;date_initial_onset&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">target</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;/data[id2]/items[id3]/value[id35]/value&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Both input (i.e. 'read') and output (i.e. 'write') variables can be mapped, as per the following that shows the mappings of the variables <code>$body_weight</code>, <code>$height</code> and <code>$body_mass_index</code> used in examples above. A writable (i.e. <code>out</code>) variable such as <code>body_mass_index</code> may be assigned to, and that part of the processing of such an assignment statement may be to write the result into the binding target.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">data_context</span>
    <span class="tok-nc">content_bindings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;openEHR-EHR-OBSERVATION.body_measurements.v1&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;body_weight&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">target</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;/data/events[id3]/data/items[id5]/value/magnitude&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;height&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">target</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;/data/events[id3]/data/items[id6]/value/magnitude&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;openEHR-EHR-OBSERVATION.body_mass_index.v1&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;body_mass_index&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">target</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;/data/events[id3]/data/items[id5]/value/magnitude&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_api_call_binding"><a class="anchor" href="#_api_call_binding"></a>8.1.2. API Call Binding</h4>
<div class="paragraph">
<p>A binding to an API call is used when the required value can be obtained through such a call in a defined interface. The following shows how the value for the variable <code>systolic_bp</code> is obtained from the API call <code>vital_sign ($ehr_id, "systolic_pressure")</code>, that must have been measured in the last 1 hour. In this case, the index context is the system identifier, <code><a href="https://oncology.health.org/cdr/" class="bare">https://oncology.health.org/cdr/</a></code> in the example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">data_bindings</span>
    <span class="tok-nc">api_bindings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;https://oncology.health.org/cdr/&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;systolic_bp&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">call_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;vital_sign&quot;</span><span class="tok-p">&gt;,</span>
                <span class="tok-nc">parameters</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                    <span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;$ehr_id&quot;</span><span class="tok-p">&gt;</span>
                    <span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;systolic_pressure&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-p">&gt;,</span>
                <span class="tok-nc">currency</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-err">P</span><span class="tok-mi">1</span><span class="tok-nc">h</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph tbd">
<p>TBD: need to codify REST URI flavour of doing this.</p>
</div>
</div>
<div class="sect3">
<h4 id="_query_binding"><a class="anchor" href="#_query_binding"></a>8.1.3. Query Binding</h4>
<div class="paragraph">
<p>A common special case of an API call is when the call is to executure a query, either stored or ad hoc. In this case, the API call name doesn&#8217;t change, and either an id (stored query case) or the text of a query is supplied. In this case, the <code>parameters</code> states the substitutable parameter values to be used in the query when executed, where each such value replaces a named parameter, assumed to be of the form <code>'$param'</code>, with a provided value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">data_context</span>
    <span class="tok-nc">query_bindings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;https://oncology.health.org/cdr/&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;systolic_bp&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">query_id</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;vital_signs_basic&quot;</span><span class="tok-p">&gt;,</span>
                <span class="tok-nc">parameters</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                    <span class="tok-p">[</span><span class="tok-s">&quot;$type&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;&#39;systolic_pressure&#39;&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows how a Boolean variable <code>is_diabetic</code> is populated from a stored query <code>has_diagnosis</code> that takes a SNOMED CT constraint expression as an argument.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">data_bindings</span>
    <span class="tok-nc">query_bindings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;https://oncology.health.org/cdr/&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;is_diabetic&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">query_id</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;has_diagnosis&quot;</span><span class="tok-p">&gt;,</span>
                <span class="tok-nc">parameters</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                    <span class="tok-p">[</span><span class="tok-s">&quot;$dx_expr&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;&#39;&lt;&lt;[snomed_ct::1234567]&#39;&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_interactive_binding"><a class="anchor" href="#_interactive_binding"></a>8.1.4. Interactive Binding</h4>
<div class="paragraph">
<p>Rather than obtaining a data value from and API or query, it may be obtained interactively. Various parameters may apply here, as shown in the following example. Here, the index context is an application name. The special name <code>"default"</code> means that the identity of the application or other interactive method is determined by the enclosing context, e.g. it may be the current application or a generic decision support UI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">data_bindings</span>
    <span class="tok-nc">interactive_bindings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;default&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;is_diabetic&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">visual_control_type</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;boolean&quot;</span><span class="tok-p">&gt;,</span>
                <span class="tok-nc">prompt</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;is_diabetic_prompt&quot;</span><span class="tok-p">&gt;,</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_computing_bindings"><a class="anchor" href="#_computing_bindings"></a>9. Computing Bindings</h2>
<div class="sectionbody">
<div class="paragraph tbd">
<p>TBD: potentially do without this section altogether, and let implementations do their own thing. However, it requires that call signatures exactly match the declarations in the <code>definition</code> section.</p>
</div>
<div class="paragraph">
<p>Expressions may contain user-defined functions and procedures, whose signatures are declared in the <code>definition</code> part of an EL text. The implementations of such routines can be developed or provided in a library in any language, e.g. TypeScript, Java, C#, Python etc. Implementations of used routines are bound to their EL declarations in the <code>computing_bindings</code> section of a full EL text. The following provides an example in which two libraries, one in Java and one in Python are bound to functions declared in an EL text.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">computing_bindings</span>
    <span class="tok-nc">library_bindings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;onco_staging_lib&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">connector</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">language</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;java8&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">library</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;onco_staging_lib.jar&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">xxx</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;xxx&quot;</span><span class="tok-p">&gt;</span>  <span class="tok-c">-- other connector details</span>
            <span class="tok-p">&gt;</span>
            <span class="tok-nc">bindings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-p">[</span><span class="tok-s">&quot;tnm_major_number&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;TnmCalculator::tnmNumericVal&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-p">[</span><span class="tok-s">&quot;tnm_prefix&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;TnmCalculator::tnmPrefixVal&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>

        <span class="tok-p">[</span><span class="tok-s">&quot;anti_coag_lib&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">connector</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">language</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;python&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">library</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;anti_coagulation_algorithms&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">xxx</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;xxx&quot;</span><span class="tok-p">&gt;</span>  <span class="tok-c">-- other connector details</span>
            <span class="tok-p">&gt;</span>
            <span class="tok-nc">bindings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-p">[</span><span class="tok-s">&quot;chadsvasc_score&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;Anti_coag_lib_wrapper::CHA2DS2_VASc_score&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-p">[</span><span class="tok-s">&quot;warfarin_dose&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;Anti_coag_lib_wrapper::calc_warfarin_dose&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above, the Java function <code><em>tnmNumericVal</em>()</code> from the class <code>TnmCalculator</code> is bound to the EL-declared function <code><em>tnm_major_number</em>()</code>. It is assumed that the two functions match in signatures, i.e. have the same number of arguments in the same order and of the same types. This is most likely to be achieved by writing a wrapper class around one or more classes that are found in existing libraries. Additionally, it must be possible for the implementation class to be instantiated with no arguments.</p>
</div>
<div class="paragraph tbd">
<p>TBD: or else they have to be supplied in the binding</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_module_structure"><a class="anchor" href="#_module_structure"></a>10. Module Structure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Expression Language supports inclusion of one EL text in another via the <code>import</code> keyword. This is primarily used to re-use existing definitions, including symbolic constants, routine declarations and so on, thus enabling a new EL text to contain just the specific functionality for which it is authored.</p>
</div>
<div class="sect2">
<h3 id="_el_text_identification"><a class="anchor" href="#_el_text_identification"></a>10.1. EL Text Identification</h3>
<div class="paragraph tbd">
<p>TBD: xxxx</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_expression_language_object_model"><a class="anchor" href="#_the_expression_language_object_model"></a>11. The Expression Language Object Model</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
the model and description shown here is first draft only
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_overview_6"><a class="anchor" href="#_overview_6"></a>11.1. Overview</h3>
<div class="paragraph">
<p>The <code>org.openehr.base.elom</code> package defines the Expression Language Object Model (ELOM), a structural model of the openEHR Expression language. Its elements, including statements and expressions can be used in various contexts in openEHR, including inside archetypes and in GDL guidelines. If the Expression Language or other syntax-based artefact is used, the model described here defines the parser output in the form of a computable structure. Other openEHR models designed for a particular purpose may reuse the <code>elom</code> package and further specialise some of its types specifically intended for extension.</p>
</div>
<div class="paragraph">
<p>The package structure of the <code>elom</code> package is shown below.</p>
</div>
<div id="elom_packages" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/BASE-elom-packages.svg" alt="BASE elom packages" width="50%">
</div>
<div class="title">Figure 5. base.elom Package</div>
</div>
</div>
<div class="sect2">
<h3 id="_module_package"><a class="anchor" href="#_module_package"></a>11.2. Module Package</h3>
<div class="paragraph">
<p>The top-level construct of the ELOM is the <code>EL_MODULE</code>, representing a standalone module of meta-data, model and module references, statements and bindings. It is shown below.</p>
</div>
<div id="elom_module" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/BASE-elom.module.svg" alt="BASE elom.module" width="80%">
</div>
<div class="title">Figure 6. base.elom.module Package</div>
</div>
<div class="paragraph tbd">
<p>TBD: to be continued.</p>
</div>
<div class="sect3">
<h4 id="_class_descriptions"><a class="anchor" href="#_class_descriptions"></a>11.2.1. Class Descriptions</h4>
<div class="sect4">
<h5 id="_el_module_class"><a class="anchor" href="#_el_module_class"></a>11.2.1.1. EL_MODULE Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_MODULE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A container for a set of statements along with related BMM definitions, meta-data, terminology and bindings.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>AUTHORED_RESOURCE</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>statements</strong>: <code>List&lt;EL_STATEMENT&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The member statements of this statement set.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>external_defs</strong>: <code>List&lt;BMM_PARAMETER&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>local_defs</strong>: <code>List&lt;BMM_LOCAL&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constant_defs</strong>: <code>List&lt;BMM_CONSTANT&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>function_defs</strong>: <code>List&lt;BMM_FUNCTION&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>procedure_defs</strong>: <code>List&lt;BMM_PROCEDURE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data_binding</strong>: <code>EL_DATA_BINDING</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>module_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>used_models</strong>: <code>List&lt;EL_MODEL_REF&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>imported_modules</strong>: <code>List&lt;EL_MODULE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>execution_result</strong> (): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Execution result of the whole rule set. Determined by the and-ing of result values of Assertions in the rule set.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_model_ref_class"><a class="anchor" href="#_el_model_ref_class"></a>11.2.1.2. EL_MODEL_REF Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_MODEL_REF</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A reference to an included BMM Model, providing types.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>model</strong>: <code>BMM_MODEL</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_data_binding_class"><a class="anchor" href="#_el_data_binding_class"></a>11.2.1.3. EL_DATA_BINDING Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_DATA_BINDING</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Data bindings structure for an EL Module.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>content_bindings</strong>:</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>api_bindings</strong>:</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>query_bindings</strong>:</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>interactive_bindings</strong>:</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_elom_core_statements_and_expressions"><a class="anchor" href="#_elom_core_statements_and_expressions"></a>11.3. ELOM core: statements and expressions</h3>
<div class="paragraph">
<p>The core semantics of the ELOM are defined in the <code>expression</code> and <code>statement</code> packages, shown below.</p>
</div>
<div id="elom_core" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/BASE-elom-core.svg" alt="BASE elom core">
</div>
<div class="title">Figure 7. base.elom.expression and statement Packages</div>
</div>
</div>
<div class="sect2">
<h3 id="_statements"><a class="anchor" href="#_statements"></a>11.4. Statements</h3>
<div class="paragraph">
<p>The statements part of EL is represented by the <code>EL_STATEMENT</code> class and descendants, which represent, respectively assignments, procedure calls, and decision structures (i.e. if/then and when/then).</p>
</div>
<div class="sect3">
<h4 id="_class_descriptions_2"><a class="anchor" href="#_class_descriptions_2"></a>11.4.1. Class Descriptions</h4>
<div class="sect4">
<h5 id="_el_statement_class"><a class="anchor" href="#_el_statement_class"></a>11.4.1.1. EL_STATEMENT Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>EL_STATEMENT (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract concept of any statement in a block of rule statements.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_assignment_class"><a class="anchor" href="#_el_assignment_class"></a>11.4.1.2. EL_ASSIGNMENT Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_ASSIGNMENT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Statement type representing an assignment from a value-generating source to a writable entity, i.e. a variable reference.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_STATEMENT</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>target</strong>: <code>EL_VARIABLE_REF</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The target variable on the notional left-hand side of this assignment.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>source</strong>: <code>EL_EXPRESSION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Source right hand side) of the assignment.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_routine_call_class"><a class="anchor" href="#_el_routine_call_class"></a>11.4.1.3. EL_ROUTINE_CALL Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>EL_ROUTINE_CALL (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>arguments</strong>: <code>Hash&lt;String,EL_EXPRESSION&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Arguments of this function, which can be from 0 to any number. Functions with no arguments are typically used to represent real world varying values like 'current time' and so on.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_procedure_call_class"><a class="anchor" href="#_el_procedure_call_class"></a>11.4.1.4. EL_PROCEDURE_CALL Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_PROCEDURE_CALL</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Statement type representing a call to</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_STATEMENT</code>, <code>EL_ROUTINE_CALL</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>definition</strong>: <code>BMM_PROCEDURE</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_choice_group_class"><a class="anchor" href="#_el_choice_group_class"></a>11.4.1.5. EL_CHOICE_GROUP Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>EL_CHOICE_GROUP (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract parent of multi-branch control structures.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_STATEMENT</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>members</strong>: <code>EL_CHOICE_BRANCH</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_choice_branch_class"><a class="anchor" href="#_el_choice_branch_class"></a>11.4.1.6. EL_CHOICE_BRANCH Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>EL_CHOICE_BRANCH (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract parent of branch in a multi-branch control structure.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>statements</strong>: <code>List&lt;EL_STATEMENT&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_condition_group_class"><a class="anchor" href="#_el_condition_group_class"></a>11.4.1.7. EL_CONDITION_GROUP Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_CONDITION_GROUP</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Structural representation of an if/then statement.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_CHOICE_GROUP</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>members</strong>: <code>EL_CONDITION_BRANCH</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The branches of the if/then decision structure.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_condition_branch_class"><a class="anchor" href="#_el_condition_branch_class"></a>11.4.1.8. EL_CONDITION_BRANCH Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_CONDITION_BRANCH</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Representation of one conditional branch of an if/then statement.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_CHOICE_BRANCH</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>test</strong>: <code>EL_EXPRESSION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The test expression to evaluate for this branch.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_decision_group_class"><a class="anchor" href="#_el_decision_group_class"></a>11.4.1.9. EL_DECISION_GROUP Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_DECISION_GROUP</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Structural representation of a when/then statement.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_CHOICE_GROUP</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>members</strong>: <code>EL_DECISION_BRANCH</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_decision_branch_class"><a class="anchor" href="#_el_decision_branch_class"></a>11.4.1.10. EL_DECISION_BRANCH Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_DECISION_BRANCH</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Representation of one branch of a when/then statement.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_CHOICE_BRANCH</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_constraint</strong>: <code>EL_LITERAL</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_expressions"><a class="anchor" href="#_expressions"></a>11.5. Expressions</h3>
<div class="paragraph">
<p>The expressions part of EL is represented by the <code>EL_EXPRESSION</code> class and descendants.</p>
</div>
<div class="sect3">
<h4 id="_class_descriptions_3"><a class="anchor" href="#_class_descriptions_3"></a>11.5.1. Class Descriptions</h4>
<div class="sect4">
<h5 id="_el_expression_class"><a class="anchor" href="#_el_expression_class"></a>11.5.1.1. EL_EXPRESSION Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>EL_EXPRESSION (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract parent of all typed expression tree items.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>definition</strong>: <code>BMM_DECLARATION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The reference item from which the value of this node can be computed.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(abstract)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong> (): <code>BMM_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The primitive type of this node, which must be determined by redefinitions in concrete classes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(abstract)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong> (): <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The computed value of this node as a result of the nodes below it, for operator nodes, or else statically set or otherwise derived values.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_operator_class"><a class="anchor" href="#_el_operator_class"></a>11.5.1.2. EL_OPERATOR Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>EL_OPERATOR (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract parent of operator types.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_EXPRESSION</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>precedence_overridden</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if the natural precedence of operators is overridden in the expression represented by this node of the expression tree. If True, parentheses should be introduced around the totality of the syntax expression corresponding to this operator node and its operands.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>symbol</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The symbol actually used in the expression, or intended to be used for serialisation. Must be a member of <code>OPERATOR_DEF.<em>symbols</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>definition</strong>: <code>BMM_FUNCTION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The reference item from which the value of this node can be computed.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_unary_operator_class"><a class="anchor" href="#_el_unary_operator_class"></a>11.5.1.3. EL_UNARY_OPERATOR Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_UNARY_OPERATOR</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Unary operator expression node.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_OPERATOR</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>operand</strong>: <code>EL_EXPRESSION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Operand node.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_binary_operator_class"><a class="anchor" href="#_el_binary_operator_class"></a>11.5.1.4. EL_BINARY_OPERATOR Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_BINARY_OPERATOR</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Binary operator expression node.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_OPERATOR</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>left_operand</strong>: <code>EL_EXPRESSION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Left operand node.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>right_operand</strong>: <code>EL_EXPRESSION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Right operand node.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_terminal_class"><a class="anchor" href="#_el_terminal_class"></a>11.5.1.5. EL_TERMINAL Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>EL_TERMINAL (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Expression tree leaf item representing one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a manifest constant of any primitive type;</p>
</li>
<li>
<p>a path referring to a value in the archetype;</p>
</li>
<li>
<p>a constraint;</p>
</li>
<li>
<p>a variable reference.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_EXPRESSION</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_variable_ref_class"><a class="anchor" href="#_el_variable_ref_class"></a>11.5.1.6. EL_VARIABLE_REF Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>EL_VARIABLE_REF (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract expression terminal item representing a reference to a declared variable.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TERMINAL</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>definition</strong>: <code>BMM_VARIABLE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The reference item from which the value of this node can be computed.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_external_ref_class"><a class="anchor" href="#_el_external_ref_class"></a>11.5.1.7. EL_EXTERNAL_REF Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_EXTERNAL_REF</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_VARIABLE_REF</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>definition</strong>: <code>BMM_PARAMETER</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The reference item from which the value of this node can be computed.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_local_ref_class"><a class="anchor" href="#_el_local_ref_class"></a>11.5.1.8. EL_LOCAL_REF Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_LOCAL_REF</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Type representing a reference to a local variable.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_VARIABLE_REF</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>definition</strong>: <code>BMM_LOCAL</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The reference item from which the value of this node can be computed.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_constant_ref_class"><a class="anchor" href="#_el_constant_ref_class"></a>11.5.1.9. EL_CONSTANT_REF Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_CONSTANT_REF</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Expression leaf item representing a reference to a declared constant.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TERMINAL</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>definition</strong>: <code>BMM_CONSTANT</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The reference item from which the value of this node can be computed.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_function_call_class"><a class="anchor" href="#_el_function_call_class"></a>11.5.1.10. EL_FUNCTION_CALL Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_FUNCTION_CALL</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Terminal element representing a function invocation with 0 or more arguments, keyed by name from the parameter list of the Function definition. This allows arguments to be left open, creating another <code>EL_FUNCTION_CALL</code> instance as a result.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TERMINAL</code>, <code>EL_ROUTINE_CALL</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>definition</strong>: <code>BMM_FUNCTION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The reference item from which the value of this node can be computed.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_literal_class"><a class="anchor" href="#_el_literal_class"></a>11.5.1.11. EL_LITERAL Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_LITERAL</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Literal value expression terminal item. This can represent a literal value of any Foundation type, or any type known in the included models.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TERMINAL</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_predicate_class"><a class="anchor" href="#_el_predicate_class"></a>11.5.1.12. EL_PREDICATE Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>EL_PREDICATE (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Special purpose built-in functions of the EL formalism.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_EXPRESSION</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>operand</strong>: <code>EL_EXPRESSION</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_check_class"><a class="anchor" href="#_el_check_class"></a>11.5.1.13. EL_CHECK Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_CHECK</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A built-in predicate taking one expression argument, that determines whether it is true and if not, generates an exception.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_PREDICATE</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_el_defined_class"><a class="anchor" href="#_el_defined_class"></a>11.5.1.14. EL_DEFINED Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EL_DEFINED</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A built-in predicate taking one external variable reference argument, that returns true if the reference is resolvable, i.e. the external value is obtainable.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_PREDICATE</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>operand</strong>: <code>EL_EXTERNAL_REF</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_typing"><a class="anchor" href="#_typing"></a>11.6. Typing</h3>
<div class="paragraph tbd">
<p>TBD: this section probably obsolete.</p>
</div>
<div class="paragraph">
<p>The <code>expressions.types</code> package is shown below.</p>
</div>
<div id="elom_types_package" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/BASE-elom.types.svg" alt="BASE elom.types">
</div>
<div class="title">Figure 8. baes.elom.types Package</div>
</div>
<div class="paragraph">
<p>The type system of the Expression formalism is defined via the type <code>EXPR_TYPE_DEF</code> and its descendants. All types have a <code><em>type_name</em></code> and a <code><em>type_anchor</em></code>, which is a variable of the coresponding primtive type from within the openEHR <code>base_types</code> package, i.e. <code>Integer</code>, <code>Real</code>, <code>String</code>, etc. The type anchor can be used for testing assignments within the implementation. A special type <code>TYPE_DEF_OBJECT</code> is included to enable a value reference (descendant of <code>EXPR_VALUE_REF</code>) to refer to a complex object, to which some expression operators can be applied, including equality and existence. The types system is extensible, as described below.</p>
</div>
<div class="sect3">
<h4 id="_class_descriptions_4"><a class="anchor" href="#_class_descriptions_4"></a>11.6.1. Class Descriptions</h4>
<div class="sect4">
<h5 id="_el_type_def_class"><a class="anchor" href="#_el_type_def_class"></a>11.6.1.1. EL_TYPE_DEF Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>EL_TYPE_DEF (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Ancestor class for type definitions known in the openEHR Expression formalism.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Natural language type name of this type as used in abstract rules syntax variable declarations.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_anchor</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Attribute of the openEHR primitive type (or Any) corresponding to this type definition meta-type.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_type_def_boolean_class"><a class="anchor" href="#_type_def_boolean_class"></a>11.6.1.2. TYPE_DEF_BOOLEAN Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TYPE_DEF_BOOLEAN</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Rules meta-type representing the primitive type Boolean.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TYPE_DEF</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_name</strong>: <code>String&#160;=&#160;"Boolean"</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_anchor</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_type_def_integer_class"><a class="anchor" href="#_type_def_integer_class"></a>11.6.1.3. TYPE_DEF_INTEGER Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TYPE_DEF_INTEGER</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Rules meta-type representing the primitive type Integer.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TYPE_DEF</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_name</strong>: <code>String&#160;=&#160;"Integer"</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_anchor</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_type_def_real_class"><a class="anchor" href="#_type_def_real_class"></a>11.6.1.4. TYPE_DEF_REAL Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TYPE_DEF_REAL</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Rules meta-type representing the primitive type Real.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TYPE_DEF</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_name</strong>: <code>String&#160;=&#160;"Real"</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_anchor</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_type_def_date_class"><a class="anchor" href="#_type_def_date_class"></a>11.6.1.5. TYPE_DEF_DATE Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TYPE_DEF_DATE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Rules meta-type representing the primitive type Date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TYPE_DEF</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_name</strong>: <code>String&#160;=&#160;"Date"</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_anchor</strong>: <code>IDate</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_type_def_date_time_class"><a class="anchor" href="#_type_def_date_time_class"></a>11.6.1.6. TYPE_DEF_DATE_TIME Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TYPE_DEF_DATE_TIME</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Rules meta-type representing the primitive type Date_time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TYPE_DEF</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_name</strong>: <code>String&#160;=&#160;"Date_time"</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_anchor</strong>: <code>IDate_time</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_type_def_time_class"><a class="anchor" href="#_type_def_time_class"></a>11.6.1.7. TYPE_DEF_TIME Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TYPE_DEF_TIME</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Rules meta-type representing the primitive type Time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TYPE_DEF</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_name</strong>: <code>String&#160;=&#160;"Time"</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_anchor</strong>: <code>ITime</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_type_def_duration_class"><a class="anchor" href="#_type_def_duration_class"></a>11.6.1.8. TYPE_DEF_DURATION Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TYPE_DEF_DURATION</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Rules meta-type representing the primitive type Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TYPE_DEF</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_name</strong>: <code>String&#160;=&#160;"Duration"</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_anchor</strong>: <code>IDuration</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_type_def_string_class"><a class="anchor" href="#_type_def_string_class"></a>11.6.1.9. TYPE_DEF_STRING Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TYPE_DEF_STRING</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Rules meta-type representing the primitive type String.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TYPE_DEF</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_name</strong>: <code>String&#160;=&#160;"String"</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_anchor</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_type_def_uri_class"><a class="anchor" href="#_type_def_uri_class"></a>11.6.1.10. TYPE_DEF_URI Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TYPE_DEF_URI</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Rules meta-type representing the primitive type Uri.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TYPE_DEF</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_name</strong>: <code>String&#160;=&#160;"Uri"</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_anchor</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_type_def_terminology_code_class"><a class="anchor" href="#_type_def_terminology_code_class"></a>11.6.1.11. TYPE_DEF_TERMINOLOGY_CODE Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TYPE_DEF_TERMINOLOGY_CODE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Rules meta-type representing the primitive type Terminology_code.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TYPE_DEF</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_name</strong>: <code>String&#160;=&#160;"Terminology_code"</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_anchor</strong>: <code>Terminology_code</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_type_def_object_ref_class"><a class="anchor" href="#_type_def_object_ref_class"></a>11.6.1.12. TYPE_DEF_OBJECT_REF Class</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TYPE_DEF_OBJECT_REF</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Rules meta-type representing the type Object_ref, which is assumed to by the type of any non-primitive reference target within a rule.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>EL_TYPE_DEF</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_name</strong>: <code>String&#160;=&#160;"Object_ref"</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_syntax_specification"><a class="anchor" href="#_syntax_specification"></a>Appendix A: Syntax Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The grammar and lexical specification for the standard Expression syntax is shown below in ANTLR4 form.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
this is still the old ADL grammar - the Antlr4 file has to be upgraded.

</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="antlr-java"><span class="tok-c">//</span><span class="tok-w"></span>
<span class="tok-c">//  description: Antlr4 grammar for openEHR Rules core syntax.</span><span class="tok-w"></span>
<span class="tok-c">//  author:      Thomas Beale &lt;thomas.beale@openehr.org&gt;</span><span class="tok-w"></span>
<span class="tok-c">//  support:     openEHR Specifications PR tracker &lt;https://openehr.atlassian.net/projects/SPECPR/issues&gt;</span><span class="tok-w"></span>
<span class="tok-c">//  copyright:   Copyright (c) 2016 openEHR Foundation</span><span class="tok-w"></span>
<span class="tok-c">//  license:     Apache 2.0 License &lt;http://www.apache.org/licenses/LICENSE-2.0.html&gt;</span><span class="tok-w"></span>
<span class="tok-c">//</span><span class="tok-w"></span>

<span class="tok-k">grammar</span><span class="tok-w"> </span><span class="tok-nc">base_expressions</span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-c">//</span><span class="tok-w"></span>
<span class="tok-c">//  ============== Parser rules ==============</span><span class="tok-w"></span>
<span class="tok-c">//</span><span class="tok-w"></span>

<span class="tok-nl">assertion</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-nv">identifier</span><span class="tok-w"> </span><span class="tok-s">&#39;:&#39;</span><span class="tok-w"> </span><span class="tok-o">)?</span><span class="tok-w"> </span><span class="tok-nv">boolean_expr</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-c">//</span><span class="tok-w"></span>
<span class="tok-c">// Expressions evaluating to boolean values</span><span class="tok-w"></span>
<span class="tok-c">//</span><span class="tok-w"></span>

<span class="tok-nl">boolean_expr</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">boolean_expr</span><span class="tok-w"> </span><span class="tok-nv">boolean_binop</span><span class="tok-w"> </span><span class="tok-nv">boolean_leaf</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">boolean_leaf</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">boolean_leaf</span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-nv">boolean_literal</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;(&#39;</span><span class="tok-w"> </span><span class="tok-nv">boolean_expr</span><span class="tok-w"> </span><span class="tok-s">&#39;)&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">arithmetic_relop_expr</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_NOT</span><span class="tok-w"> </span><span class="tok-nv">boolean_leaf</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">boolean_binop</span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_AND</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_XOR</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_OR</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_IMPLIES</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">boolean_literal</span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-no">SYM_TRUE</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_FALSE</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-c">//</span><span class="tok-w"></span>
<span class="tok-c">// Expressions evaluating to arithmetic values</span><span class="tok-w"></span>
<span class="tok-c">//</span><span class="tok-w"></span>

<span class="tok-nl">arithmetic_relop_expr</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">arithmetic_arith_expr</span><span class="tok-w"> </span><span class="tok-nv">relational_binop</span><span class="tok-w"> </span><span class="tok-nv">arithmetic_arith_expr</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">arithmetic_leaf</span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-nv">integer_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">real_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;(&#39;</span><span class="tok-w"> </span><span class="tok-nv">arithmetic_arith_expr</span><span class="tok-w"> </span><span class="tok-s">&#39;)&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;-&#39;</span><span class="tok-w"> </span><span class="tok-nv">arithmetic_leaf</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">arithmetic_arith_expr</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">arithmetic_arith_expr</span><span class="tok-w"> </span><span class="tok-nv">arithmetic_binop</span><span class="tok-w"> </span><span class="tok-nv">arithmetic_leaf</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">arithmetic_arith_expr</span><span class="tok-w"> </span><span class="tok-s">&#39;^&#39;</span><span class="tok-err">&lt;</span><span class="tok-nv">assoc</span><span class="tok-o">=</span><span class="tok-nv">right</span><span class="tok-err">&gt;</span><span class="tok-w"> </span><span class="tok-nv">arithmetic_leaf</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">arithmetic_leaf</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">relational_binop</span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-no">SYM_EQ</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_NE</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_GT</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_LT</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_LE</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_GE</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">arithmetic_binop</span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-s">&#39;/&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;*&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;+&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;-&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_general_it_publications"><a class="anchor" href="#_general_it_publications"></a>General IT Publications</h3>
<div class="sect3">
<h4 id="_articles_books"><a class="anchor" href="#_articles_books"></a>Articles, Books</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="Anderson_1996"></a>[Anderson_1996] Ross Anderson. <strong>Security in Clinical Information Systems</strong>. Available at <a href="http://www.cl.cam.ac.uk/users/rja14/policy11/policy11.html" class="bare">http://www.cl.cam.ac.uk/users/rja14/policy11/policy11.html</a>.</p>
</li>
<li>
<p><a id="Booch_1994"></a>[Booch_1994] Booch G. <strong>Object-Oriented Analysis and Design with applications. 2nd ed.</strong> Benjamin/Cummings 1994.</p>
</li>
<li>
<p><a id="Eiffel"></a>[Eiffel] Meyer B. <strong>Eiffel the Language (2nd Ed).</strong> Prentice Hall, 1992.</p>
</li>
<li>
<p><a id="Fowler_1997"></a>[Fowler_1997] Fowler M. <strong>Analysis Patterns: Reusable Object Models.</strong> Addison Wesley 1997</p>
</li>
<li>
<p><a id="Fowler_Scott_2000"></a>[Fowler_Scott_2000] Fowler M, Scott K. <strong>UML Distilled (2nd Ed.).</strong> Addison Wesley Longman 2000.</p>
</li>
<li>
<p><a id="Gray_reuter_1993"></a>[Gray_reuter_1993] Gray J, Reuter A. <strong>Transaction Processing Concepts and Techniques.</strong> Morgan Kaufmann 1993.</p>
</li>
<li>
<p><a id="Hein_2002"></a>[Hein_2002] Hein J L. Discrete Structures, Logic and Computability (2nd Ed). Jones and Bartlett 2002.</p>
</li>
<li>
<p><a id="Hntynka_2004"></a>[Hntynka_2004] Hntynka P, Plil F. <strong>Distributed Versioning Model for MOF.</strong> Proceedings of WISICT 2004, Cancun, Mexico, A volume in the ACM international conference proceedings series, published by Computer Science Press, Trinity College Dublin Ireland, 2004.</p>
</li>
<li>
<p><a id="Kifer_Lausen_Wu_1995"></a>[Kifer_Lausen_Wu_1995] Kifer M, Lausen G, Wu J. <strong>Logical Foundations of Object-Oriented and FrameBased Languages.</strong> JACM May 1995. See See <a href="ftp://ftp.cs.sunysb.edu/pub/TechReports/kifer/flogic.pdf" class="bare">ftp://ftp.cs.sunysb.edu/pub/TechReports/kifer/flogic.pdf</a>.</p>
</li>
<li>
<p><a id="Kilov_1994"></a>[Kilov_1994] Kilov H, Ross J. <strong>Information Modelling - an object-oriented approach.</strong> Prentice Hall 1994.</p>
</li>
<li>
<p><a id="Maier_2000"></a>[Maier_2000] Maier M. <strong>Architecting Principles for Systems-of-Systems.</strong> Technical Report, University of Alabama in Huntsville. 2000. Available at <a href="http://www.infoed.com/Open/PAPERS/systems.htm" class="bare">http://www.infoed.com/Open/PAPERS/systems.htm</a></p>
</li>
<li>
<p><a id="Martin"></a>[Martin] Martin P. <strong>Translations between UML, OWL, KIF and the WebKB-2 languages (For-Taxonomy, Frame-CG, Formalized English)</strong>. May/June 2003. Available at <a href="http://www.webkb.org/doc/model/comparisons.html" class="bare">http://www.webkb.org/doc/model/comparisons.html</a> as at Aug 2004.</p>
</li>
<li>
<p><a id="Meyer_OOSC2"></a>[Meyer_OOSC2] Meyer B. <strong>Object-oriented Software Construction, 2nd Ed.</strong> Prentice Hall 1997</p>
</li>
<li>
<p><a id="Object_Z"></a>[Object_Z] Smith G. <strong>The Object Z Specification Language</strong>. Kluwer Academic Publishers 2000. See <a href="http://www.itee.uq.edu.au/~smith/objectz.html" class="bare">http://www.itee.uq.edu.au/~smith/objectz.html</a> .</p>
</li>
<li>
<p><a id="Richards_1998"></a>[Richards_1998] Richards E G. <strong>Mapping Time - The Calendar and its History.</strong> Oxford University Press 1998.</p>
</li>
<li>
<p><a id="Sowa_2000"></a>[Sowa_2000] Sowa J F. <strong>Knowledge Representation: Logical, philosophical and Computational Foundations.</strong> 2000, Brooks/Cole, California.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_online_resources"><a class="anchor" href="#_online_resources"></a>Online Resources</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>[<a id="cov_contra"></a>] Wikipedia. <strong>Covariance and contravariance.</strong> See <a href="https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science" class="bare">https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science</a>) .</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_standards"><a class="anchor" href="#_standards"></a>Standards</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="OCL"></a>[OCL] <strong>The Object Constraint Language 2.0.</strong> Object Management Group (OMG). Available at <a href="http://www.omg.org/cgi-bin/doc?ptc/2003-10-14" class="bare">http://www.omg.org/cgi-bin/doc?ptc/2003-10-14</a> .</p>
</li>
<li>
<p><a id="IEEE_828"></a>[IEEE_828] IEEE. <strong>IEEE 828-2005: standard for Software Configuration Management Plans.</strong></p>
</li>
<li>
<p><a id="ISO_8601"></a>[ISO_8601] <strong>ISO 8601 standard describing formats for representing times, dates, and durations.</strong> See <a href="https://en.wikipedia.org/wiki/ISO_8601" class="bare">https://en.wikipedia.org/wiki/ISO_8601</a>.</p>
</li>
<li>
<p><a id="ISO_2788"></a>[ISO_2788] ISO. ISO 2788 <strong>Guide to Establishment and development of monolingual thesauri</strong>.</p>
</li>
<li>
<p><a id="ISO_5964"></a>[ISO_5964] ISO. ISO 5964 <strong>Guide to Establishment and development of multilingual thesauri</strong>.</p>
</li>
<li>
<p><a id="Perl_regex"></a>[Perl_regex] Perl.org. <strong>Perl Regular Expressions</strong>. Available at <a href="http://perldoc.perl.org/perlre.html" class="bare">http://perldoc.perl.org/perlre.html</a> .</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_publications_e_health"><a class="anchor" href="#_publications_e_health"></a>Publications - e-Health</h3>
<div class="sect3">
<h4 id="_articles_books_2"><a class="anchor" href="#_articles_books_2"></a>Articles, Books</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="Beale_2000"></a>[Beale_2000] Beale T. <strong>Archetypes: Constraint-based Domain Models for Future-proof Information Systems.</strong> 2000.  Available at <a href="http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_web_2000.pdf" class="bare">http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_web_2000.pdf</a> .</p>
</li>
<li>
<p><a id="Beale_2002"></a>[Beale_2002] Beale T. <strong>Archetypes: Constraint-based Domain Models for Future-proof Information Systems.</strong> Eleventh OOPSLA Workshop on Behavioral Semantics: Serving the Customer (Seattle, Washington, USA, November 4, 2002). Edited by Kenneth Baclawski and Haim Kilov. Northeastern University, Boston, 2002, pp. 16-32. Available at <a href="http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_oopsla_2002.pdf" class="bare">http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_oopsla_2002.pdf</a> .</p>
</li>
<li>
<p><a id="Beale_Heard_2007"></a>[Beale_Heard_2007] Beale T, Heard S. <strong>An Ontology-based Model of Clinical Information.</strong> 2007. pp760-764 Proceedings MedInfo 2007, K. Kuhn et al. (Eds), IOS Publishing 2007. See <a href="http://www.openehr.org/publications/health_ict/MedInfo2007-BealeHeard.pdf" class="bare">http://www.openehr.org/publications/health_ict/MedInfo2007-BealeHeard.pdf</a>.</p>
</li>
<li>
<p><a id="Cimino_1997"></a>[Cimino_1997] Cimino J J. <strong>Desiderata for Controlled Medical vocabularies in the Twenty-First Century.</strong> IMIA WG6 Conference, Jacksonville, Florida, Jan 19-22, 1997.</p>
</li>
<li>
<p><a id="Elstein_1987"></a>[Elstein_1987] Elstein AS, Shulman LS, Sprafka SA. <strong>Medical problem solving: an analysis of clinical reasoning.</strong> Cambridge, MA: Harvard University Press 1987.</p>
</li>
<li>
<p><a id="Elstein_Schwarz_2002"></a>[Elstein_Schwarz_2002] Elstein AS, Schwarz A. <strong>Evidence base of clinical diagnosis: Clinical problem solving and diagnostic decision making: selective review of the cognitive literature.</strong> BMJ 2002;324;729-732.</p>
</li>
<li>
<p><a id="Ingram_1995"></a>[Ingram_1995] Ingram D. <strong>The Good European Health Record Project.</strong> Laires, Laderia Christensen, Eds. Health in the New Communications Age. Amsterdam: IOS Press; 1995; pp. 66-74.</p>
</li>
<li>
<p><a id="Object_Z"></a>[Object_Z] Smith G. <strong>The Object Z Specification Language</strong>. Kluwer Academic Publishers 2000. See <a href="http://www.itee.uq.edu.au/~smith/objectz.html" class="bare">http://www.itee.uq.edu.au/~smith/objectz.html</a> .</p>
</li>
<li>
<p><a id="GLIF"></a>[GLIF] Lucila Ohno-Machado, John H. Gennari, Shawn N. Murphy, Nilesh L. Jain, Samson W. Tu, Diane E. Oliver, Edward Pattison-Gordon, Robert A. Greenes, Edward H. Shortliffe, and G. Octo Barnett.  <strong>The GuideLine Interchange Format - A Model for Representing Guidelines</strong>. J Am Med Inform Assoc. 1998 Jul-Aug; 5(4): 357372.</p>
</li>
<li>
<p><a id="Rector_1994"></a>[Rector_1994] Rector A L, Nowlan W A, Kay S. <strong>Foundations for an Electronic Medical Record.</strong> The IMIA Yearbook of Medical Informatics 1992 (Eds. van Bemmel J, McRay A). Stuttgart Schattauer 1994.</p>
</li>
<li>
<p><a id="Rector_1999"></a>[Rector_1999] Rector A L. <strong>Clinical terminology: why is it so hard?</strong> Methods Inf Med. 1999 Dec;38(4-5):239-52. Available at <a href="http://www.cs.man.ac.uk/~rector/papers/Why-is-terminology-hard-single-r2.pdf" class="bare">http://www.cs.man.ac.uk/~rector/papers/Why-is-terminology-hard-single-r2.pdf</a> .</p>
</li>
<li>
<p><a id="Sottile_1999"></a>[Sottile_1999] Sottile P.A., Ferrara F.M., Grimson W., Kalra D., and Scherrer J.R. <strong>The holistic healthcare information system. Toward an Electronic Health Record Europe.</strong> 1999. Nov 1999; 259-266.</p>
</li>
<li>
<p><a id="Van_de_Velde_Degoulet_2003"></a>[Van_de_Velde_Degoulet_2003] Van de Velde R, Degoulet P. <strong>Clinical Information Systems: A Component-Based Approach.</strong> 2003. Springer-Verlag New York.</p>
</li>
<li>
<p><a id="Weed_1969"></a>[Weed_1969] Weed LL. <strong>Medical records, medical education and patient care. 6 ed.</strong> Chicago: Year Book Medical Publishers Inc. 1969.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_standards_2"><a class="anchor" href="#_standards_2"></a>Standards</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="Corbamed_PIDS"></a>[Corbamed_PIDS] Object Management Group. <strong>Person Identification Service.</strong> March 1999. See <a href="http://www.omg.org/spec/PIDS/" class="bare">http://www.omg.org/spec/PIDS/</a> .</p>
</li>
<li>
<p><a id="Corbamed_LQS"></a>[Corbamed_LQS] Object Management Group. <strong>Lexicon Query Service.</strong> March 1999. <a href="http://www.omg.org/spec/LQS/" class="bare">http://www.omg.org/spec/LQS/</a> .</p>
</li>
<li>
<p><a id="hl7_cda"></a>[hl7_cda] HL7 International. <strong>HL7 version Clinical Document Architecture (CDA)</strong>. Available at <a href="http://www.hl7.org.uk/version3group/cda.asp" class="bare">http://www.hl7.org.uk/version3group/cda.asp</a>.</p>
</li>
<li>
<p><a id="HL7v3_ballot2"></a>[HL7v3_ballot2] HL7 International. <strong>HL7 version 3 2nd Ballot specification</strong>. Available at <a href="http://www.hl7.org" class="bare">http://www.hl7.org</a>.</p>
</li>
<li>
<p><a id="HL7v3_data_types"></a>[HL7v3_data_types] Schadow G, Biron P. <strong>HL7 version 3 deliverable: Version 3 Data Types.</strong> (2nd ballot 2002 version).</p>
</li>
<li>
<p><a id="hl7_v3_rim"></a>[hl7_v3_rim] HL7 International. <strong>HL7 v3 RIM</strong>. See <a href="http://www.hl7.org" class="bare">http://www.hl7.org</a> .</p>
</li>
<li>
<p><a id="hl7_arden"></a>[hl7_arden] HL7 International. <strong>HL7 Arden Syntax</strong>. See <a href="http://www.hl7.org/Special/committees/Arden/index.cfm" class="bare">http://www.hl7.org/Special/committees/Arden/index.cfm</a> .</p>
</li>
<li>
<p><a id="hl7_gello"></a>[hl7_gello] HL7 International. <strong>GELLO Decision Support Language</strong>. <a href="http://www.hl7.org/implement/standards/product_brief.cfm?product_id=5" class="bare">http://www.hl7.org/implement/standards/product_brief.cfm?product_id=5</a> .</p>
</li>
<li>
<p><a id="IHTSDO_URIs"></a>[IHTSDO_URIs] IHTSDO. SNOMED CT URI Standard. <a href="http://ihtsdo.org/fileadmin/user_upload/doc/download/doc_UriStandard_Current-en-US_INT_20140527.pdf?ok" class="bare">http://ihtsdo.org/fileadmin/user_upload/doc/download/doc_UriStandard_Current-en-US_INT_20140527.pdf?ok</a>.</p>
</li>
<li>
<p><a id="NLM_UML_list"></a>[NLM_UML_list] National Library of Medicine. UMLS Terminologies List. <a href="http://www.nlm.nih.gov/research/umls/metaa1.html" class="bare">http://www.nlm.nih.gov/research/umls/metaa1.html</a>.</p>
</li>
<li>
<p><a id="ISO_13606-1"></a>[ISO_13606-1] <strong>ISO 13606-1 - Electronic healthcare record communication - Part 1: Extended architecture.</strong> See <a href="https://www.iso.org/standard/40784.html" class="bare">https://www.iso.org/standard/40784.html</a>.</p>
</li>
<li>
<p><a id="ISO_13606-2"></a>[ISO_13606-2] <strong>ISO 13606-2 - Electronic healthcare record communication - Part 2: Domain term list.</strong> See <a href="https://www.iso.org/standard/50119.html" class="bare">https://www.iso.org/standard/50119.html</a>.</p>
</li>
<li>
<p><a id="ISO_13606-3"></a>[ISO_13606-3] <strong>ISO 13606-3 - Electronic healthcare record communication - Part 3: Distribution rules.</strong> See <a href="https://www.iso.org/standard/50120.html" class="bare">https://www.iso.org/standard/50120.html</a>.</p>
</li>
<li>
<p><a id="ISO_13606-4"></a>[ISO_13606-4] <strong>ISO 13606-4 - Electronic Healthcare Record Communication standard Part 4: Messages for the exchange of information.</strong> See <a href="https://www.iso.org/standard/50121.html" class="bare">https://www.iso.org/standard/50121.html</a>.</p>
</li>
<li>
<p><a id="ISO_18308"></a>[ISO_18308] Schloeffel P. (Editor). <strong>Requirements for an Electronic Health Record Reference Architecture.</strong> See <a href="https://www.iso.org/standard/52823.html" class="bare">https://www.iso.org/standard/52823.html</a>.</p>
</li>
<li>
<p><a id="ISO_20514"></a>[ISO_20514] ISO. <strong>The Integrated Care EHR.</strong> See <a href="https://www.iso.org/standard/39525.html" class="bare">https://www.iso.org/standard/39525.html</a> .</p>
</li>
<li>
<p><a id="ISO_13940"></a>[ISO_13940] ISO. <strong>Health informatics - System of concepts to support continuity of care.</strong> See <a href="https://www.iso.org/standard/58102.html" class="bare">https://www.iso.org/standard/58102.html</a>.</p>
</li>
<li>
<p><a id="ISO_22600"></a>[ISO_22600] ISO. <strong>Health informatics - Privilege management and access control.</strong> See <a href="https://www.iso.org/standard/62653.html" class="bare">https://www.iso.org/standard/62653.html</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_projects"><a class="anchor" href="#_projects"></a>Projects</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="EHCR_supA_14"></a>[EHCR_supA_14] Dixon R, Grubb P A, Lloyd D, and Kalra D. <strong>Consolidated List of Requirements. EHCR Support Action Deliverable 1.4.</strong> European Commission DGXIII, Brussels; May 2001 59pp Available from <a href="http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/del1-4v1_3.PDF" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/del1-4v1_3.PDF</a>.</p>
</li>
<li>
<p><a id="EHCR_supA_35"></a>[EHCR_supA_35] Dixon R, Grubb P, Lloyd D. <strong>EHCR Support Action Deliverable 3.5: "Final Recommendations to CEN for future work".</strong> Oct 2000. Available at <a href="http://www.chime.ucl.ac.uk/HealthI/EHCRSupA/documents.htm" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCRSupA/documents.htm</a>.</p>
</li>
<li>
<p><a id="EHCR_supA_24"></a>[EHCR_supA_24] Dixon R, Grubb P, Lloyd D. <strong>EHCR Support Action Deliverable 2.4 "Guidelines on Interpretation and implementation of CEN EHCRA".</strong> Oct 2000. Available at <a href="http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm</a>.</p>
</li>
<li>
<p><a id="EHCR_supA_31_32"></a>[EHCR_supA_31_32] Lloyd D, et al. <strong>EHCR Support Action Deliverable 3.1&amp;3.2 Interim Report to CEN.</strong> July 1998. Available at <a href="http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm</a>.</p>
</li>
<li>
<p><a id="GEHR_del_4"></a>[GEHR_del_4] <strong>Deliverable 4: GEHR Requirements for Clinical Comprehensiveness.</strong> GEHR Project 1992. Available at <a href="http://www.openehr.org/files/resources/related_projects/gehr/gehr_deliverable-4.pdf" class="bare">http://www.openehr.org/files/resources/related_projects/gehr/gehr_deliverable-4.pdf</a> .</p>
</li>
<li>
<p><a id="GEHR_del_7"></a>[GEHR_del_7] <strong>Deliverable 7: Clinical Functional Specifications.</strong> GEHR Project 1993.</p>
</li>
<li>
<p><a id="GEHR_del_8"></a>[GEHR_del_8] <strong>Deliverable 8: Ethical and legal Requirements of GEHR Architecture and Systems.</strong> GEHR Project 1994. Available at <a href="http://www.openehr.org/files/resources/related_projects/gehr/gehr_deliverable-8.pdf" class="bare">http://www.openehr.org/files/resources/related_projects/gehr/gehr_deliverable-8.pdf</a> .</p>
</li>
<li>
<p><a id="GEHR_del_19_20_24"></a>[GEHR_del_19_20_24] <strong>Deliverable 19,20,24: GEHR Architecture.</strong> GEHR Project 30/6/1995. Available at <a href="http://www.openehr.org/files/resources/related_projects/gehr/gehr_deliverable-19_20_24.pdf" class="bare">http://www.openehr.org/files/resources/related_projects/gehr/gehr_deliverable-19_20_24.pdf</a> .</p>
</li>
<li>
<p><a id="GeHR_AUS"></a>[GeHR_AUS] Heard S, Beale T. <strong>The Good Electronic Health Record (GeHR) (Australia).</strong> See <a href="http://www.openehr.org/resources/related_projects#gehraus" class="bare">http://www.openehr.org/resources/related_projects#gehraus</a> .</p>
</li>
<li>
<p><a id="GeHR_Aus_gpcg"></a>[GeHR_Aus_gpcg] Heard S. <strong>GEHR Project Australia, GPCG Trial.</strong> See <a href="http://www.openehr.org/resources/related_projects#gehraus" class="bare">http://www.openehr.org/resources/related_projects#gehraus</a> .</p>
</li>
<li>
<p><a id="GeHR_Aus_req"></a>[GeHR_Aus_req] Beale T, Heard S. <strong>GEHR Technical Requirements.</strong> See <a href="http://www.openehr.org/files/resources/related_projects/gehr_australia/gehr_requirements.pdf" class="bare">http://www.openehr.org/files/resources/related_projects/gehr_australia/gehr_requirements.pdf</a> .</p>
</li>
<li>
<p><a id="Synapses_req_A"></a>[Synapses_req_A] Kalra D. (Editor). <strong>The Synapses User Requirements and Functional Specification (Part A).</strong> EU Telematics Application Programme, Brussels; 1996; The Synapses Project: Deliverable USER 1.1.1a. 6 chapters, 176 pages.</p>
</li>
<li>
<p><a id="Synapses_req_B"></a>[Synapses_req_B] Grimson W. and Groth T. (Editors). <strong>The Synapses User Requirements and Functional Specification (Part B).</strong> EU Telematics Application Programme, Brussels; 1996; The Synapses Project: Deliverable USER 1.1.1b.</p>
</li>
<li>
<p><a id="Synapses_odp"></a>[Synapses_odp] Kalra D. (Editor). <strong>Synapses ODP Information Viewpoint.</strong> EU Telematics Application Programme, Brussels; 1998; The Synapses Project: Final Deliverable. 10 chapters, 64 pages. See <a href="http://discovery.ucl.ac.uk/66235/" class="bare">http://discovery.ucl.ac.uk/66235/</a> .</p>
</li>
<li>
<p><a id="synex"></a>[synex] University College London. <strong>SynEx project</strong>. <a href="http://www.chime.ucl.ac.uk/HealthI/SynEx/" class="bare">http://www.chime.ucl.ac.uk/HealthI/SynEx/</a> .</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-09-08 14:02:23 BST
</div>
</div>
</body>
</html>