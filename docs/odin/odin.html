<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="description" content="Object Data Instance Notation (ODIN) specification">
<meta name="keywords" content="data, notation, JSON, syntax">
<title>Object Data Instance Notation (ODIN)</title>
<link rel="stylesheet" href="https://www.openehr.org/releases/BASE/latest/resources/css/openehr.css">
<link rel="stylesheet" href="https://www.openehr.org/releases/BASE/latest/resources/css/pygments-default.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_object_data_instance_notation_odin">Object Data Instance Notation (ODIN)</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a>
<ul class="sectlevel2">
<li><a href="#_primary_author">Primary Author</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_supporters">Supporters</a></li>
<li><a href="#_trademarks">Trademarks</a></li>
</ul>
</li>
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_nomenclature">1.2. Nomenclature</a></li>
<li><a href="#_status">1.3. Status</a></li>
</ul>
</li>
<li><a href="#_overview">2. Overview</a></li>
<li><a href="#_basics">3. Basics</a>
<ul class="sectlevel2">
<li><a href="#_file_encoding">3.1. File Encoding</a></li>
<li><a href="#_special_character_sequences">3.2. Special Character Sequences</a></li>
<li><a href="#_keywords">3.3. Keywords</a></li>
<li><a href="#_reserved_characters">3.4. Reserved Characters</a></li>
<li><a href="#_comments">3.5. Comments</a></li>
<li><a href="#_information_model_identifiers">3.6. Information Model Identifiers</a></li>
<li><a href="#_semi_colons">3.7. Semi-colons</a></li>
</ul>
</li>
<li><a href="#_odin_artefacts">4. ODIN Artefacts</a>
<ul class="sectlevel2">
<li><a href="#_embedded_fragment">4.1. Embedded Fragment</a></li>
<li><a href="#_document">4.2. Document</a>
<ul class="sectlevel3">
<li><a href="#_implicit_object_document">4.2.1. Implicit Object Document</a></li>
<li><a href="#_anonymous_object_document">4.2.2. Anonymous Object Document</a></li>
<li><a href="#_identified_object_document">4.2.3. Identified Object Document</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_content">5. Content</a>
<ul class="sectlevel2">
<li><a href="#_general_structure">5.1. General Structure</a></li>
<li><a href="#_paths">5.2. Paths</a></li>
<li><a href="#_void_objects">5.3. Void Objects</a></li>
<li><a href="#_container_objects">5.4. Container Objects</a></li>
<li><a href="#_nested_container_objects">5.5. Nested Container Objects</a></li>
<li><a href="#_adding_type_information">5.6. Adding Type Information</a></li>
</ul>
</li>
<li><a href="#_references">6. References</a>
<ul class="sectlevel2">
<li><a href="#_associations_and_shared_objects">6.1. Associations and Shared Objects</a>
<ul class="sectlevel3">
<li><a href="#_within_an_object">6.1.1. Within An Object</a></li>
<li><a href="#_across_objects">6.1.2. Across Objects</a></li>
<li><a href="#_across_odin_documents">6.1.3. Across ODIN Documents</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_leaf_data">7. Leaf Data</a>
<ul class="sectlevel2">
<li><a href="#_primitive_types">7.1. Primitive Types</a>
<ul class="sectlevel3">
<li><a href="#_character_data">7.1.1. Character Data</a></li>
<li><a href="#_string_data">7.1.2. String Data</a></li>
<li><a href="#_integer_data">7.1.3. Integer Data</a></li>
<li><a href="#_real_data">7.1.4. Real Data</a></li>
<li><a href="#_boolean_data">7.1.5. Boolean Data</a></li>
<li><a href="#_dates_and_times">7.1.6. Dates and Times</a>
<ul class="sectlevel4">
<li><a href="#_complete_date_times">7.1.6.1. Complete Date/Times</a></li>
<li><a href="#_partial_date_times">7.1.6.2. Partial Date/Times</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_intervals_of_ordered_primitive_types">7.2. Intervals of Ordered Primitive Types</a></li>
<li><a href="#_other_built_in_types">7.3. Other Built-in Types</a>
<ul class="sectlevel3">
<li><a href="#_uris">7.3.1. URIs</a></li>
<li><a href="#_coded_terms">7.3.2. Coded Terms</a></li>
</ul>
</li>
<li><a href="#_lists_of_built_in_types">7.4. Lists of Built-in Types</a></li>
</ul>
</li>
<li><a href="#_path_syntax">8. Path Syntax</a>
<ul class="sectlevel2">
<li><a href="#_semantics">8.1. Semantics</a></li>
<li><a href="#_relationship_with_w3c_xpath">8.2. Relationship with W3C Xpath</a></li>
</ul>
</li>
<li><a href="#_plug_in_syntaxes">9. Plug-in Syntaxes</a></li>
<li><a href="#_relationship_with_other_syntaxes">Appendix A: Relationship with other Syntaxes</a>
<ul class="sectlevel2">
<li><a href="#_xml">A.1. XML</a>
<ul class="sectlevel3">
<li><a href="#_expression_of_odin_in_xml">A.1.1. Expression of ODIN in XML</a>
<ul class="sectlevel4">
<li><a href="#_single_attributes">A.1.1.1. Single Attributes</a></li>
<li><a href="#_container_attributes">A.1.1.2. Container Attributes</a></li>
<li><a href="#_nested_container_attributes">A.1.1.3. Nested Container Attributes</a></li>
<li><a href="#_type_names">A.1.1.4. Type Names</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_json">A.2. JSON</a>
<ul class="sectlevel3">
<li><a href="#_leaf_types">A.2.1. Leaf types</a></li>
<li><a href="#_typing">A.2.2. Typing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_syntax_specification">Appendix B: Syntax Specification</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="/releases/BASE/latest/resources/images/openehr_logo_large.png" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_object_data_instance_notation_odin" class="sect0">Object Data Instance Notation (ODIN)</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2"><strong>Issuer</strong>: <a href="/programs/specification/">openEHR Specification Program</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Release</strong>: latest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: STABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Keywords</strong>: data, notation, JSON, syntax</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2003 - 2018 The openEHR Foundation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="/">The openEHR Foundation</a> is an independent, non-profit community organisation, facilitating the sharing of health records by consumers and clinicians via open-source, standards-based implementations.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="/releases/BASE/latest/resources/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://openehr.atlassian.net/browse/SPECPR/" class="bare">https://openehr.atlassian.net/browse/SPECPR/</a><br>
 Web: <a href="/">www.openehr.org</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record">Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 54.5454%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>BASE R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0.4</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>1.5.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openehr.atlassian.net/browse/SPECBASE-10">SPECBASE-10</a>: Add grammar support for plus-or-minus ranges;<br>
 <a href="https://openehr.atlassian.net/browse/SPECBASE-11">SPECBASE-11</a>: Update grammar to support documented ODIN keys;<br>
 <a href="https://openehr.atlassian.net/browse/SPECBASE-12">SPECBASE-12</a>: Update grammar to support documented openEHR ISO 8601 variant using '??';
 make <code>MONTH</code> and <code>DAY</code> regexes in grammar more accurate; correct xref in section 7.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">K Allen,<br>
 T Beale,<br>
 S Garde</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>29 Aug 2018</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openehr.atlassian.net/browse/SPECBASE-5">SPECBASE-5</a>: Correct minor comment errors in section 7 to do with intervals.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C Nanjo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08 Apr 2016</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>BASE R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0.3</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Separate from ADL spec and rename to ODIN.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Apr 2013</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add fractional seconds to dADL grammar.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Aug 2012</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0.2</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.4.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openehr.atlassian.net/browse/SPEC-268">SPEC-268</a>: Correct missing parentheses in dADL type identifiers. dADL grammar rules updated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R Chen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12 Dec 2008</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0.1</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.4.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openehr.atlassian.net/browse/SPEC-213">SPEC-213</a>: Include 'T' in dADL Date/time, Time and Duration values.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">13 Mar 2007</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> </p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openehr.atlassian.net/browse/SPEC-216">SPEC-216</a>: Allow mixture of W, D etc in ISO 8601 Duration (deviation from standard).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> </p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openehr.atlassian.net/browse/SPEC-143">SPEC-143</a>. Add partial date/time values to dADL syntax.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18 Jun 2005</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openehr.atlassian.net/browse/SPEC-149">SPEC-149</a>. Add URIs to dADL and remove <code>query()</code> syntax.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;0.95</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openehr.atlassian.net/browse/SPEC-110">SPEC-110</a>. Added explanatory material; added domain type support; rewrote of most dADL sections.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Nov 2004</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;0.9</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.9.9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openehr.atlassian.net/browse/SPEC-75">SPEC-75</a>. Added dADL object model.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">28 Dec 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.9.8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openehr.atlassian.net/browse/SPEC-70">SPEC-70</a>. Copyright Assigned by Ocean Informatics P/L Australia to The openEHR Foundation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">29 Nov 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.9.7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added simple value list continuation (",&#8230;&#8203;").<br>
 Changed path syntax so that trailing '/' required for object paths.<br>
 Remove ranges with excluded limits.<br>
 Added terms and term lists to dADL leaf types.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01 Nov 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.9.6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additions during HL7 WGM Memphis Sept 2003</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">09 Sep 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.9.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renamed dDL to dADL. Changed path syntax to conform (nearly) to Xpath.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03 Sep 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rewritten with sections on dDL.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">28 July 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial Writing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 July 2003</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements">Acknowledgements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_primary_author">Primary Author</h3>
<div class="ulist">
<ul>
<li>
<p>Thomas Beale, Ars Semantica; openEHR Foundation Management Board; (previously Ocean Informatics UK).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contributors">Contributors</h3>
<div class="paragraph">
<p>This specification has benefited from formal and informal input from the openEHR and wider health informatics community. The openEHR Foundation would like to recognise the following people for their contributions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Kurt W. Allen, Applicadia Inc, Minnesota, USA</p>
</li>
<li>
<p>Rong Chen, MD, PhD, Cambio Healthcare Systems, Sweden</p>
</li>
<li>
<p>Sam Heard, MD, DRCOG, MRCGP, FRACGP, Director at Ocean Informatics, Australia</p>
</li>
<li>
<p>Claude Nanjo, MA African Studies., M Public Health, Cognitive Medical Systems Inc., California, USA</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_supporters">Supporters</h3>
<div class="paragraph">
<p>The work reported in this paper has been funded in by the following organisations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>University College London - Centre for Health Informatics and Multi-professional Education (CHIME);</p>
</li>
<li>
<p>Ocean Informatics.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Special thanks to David Ingram, Emeritus Professor of Health Informatics at UCL who provided a vision and collegial working environment ever since the days of GEHR (1992).</p>
</div>
</div>
<div class="sect2">
<h3 id="_trademarks">Trademarks</h3>
<div class="ulist">
<ul>
<li>
<p>'openEHR' is a trademark of the openEHR Foundation</p>
</li>
<li>
<p>'Java' is a registered trademark of Oracle Corporation</p>
</li>
<li>
<p>'Microsoft' and '.Net' are trademarks of the Microsoft Corporation</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose"><a class="anchor" href="#_purpose"></a>1.1. Purpose</h3>
<div class="paragraph">
<p>This document describes the syntax of the Object Data Instance Notation (ODIN), previously known
as the 'dADL' syntax from the openEHR ADL specifications. It is intended for software developers,
technically-oriented domain specialists and subject matter experts (SMEs). ODIN is designed as a
human-readable and computer-processible data representation syntax, and can be hand-edited using a
normal text editor.</p>
</div>
</div>
<div class="sect2">
<h3 id="_nomenclature"><a class="anchor" href="#_nomenclature"></a>1.2. Nomenclature</h3>
<div class="paragraph">
<p>In this document, the term 'attribute' denotes any stored property of a type defined in an object
model, including primitive attributes and any kind of relationship such as an association or aggregation.
Where XML is mentioned, XML 'attributes' are always referred to explicitly as 'XML
attributes'.</p>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="anchor" href="#_status"></a>1.3. Status</h3>
<div class="paragraph">
<p>This specification is in the STABLE state. The development version of this document can be found at <a href="/releases/BASE/latest/odin.html">www.openehr.org/releases/BASE/latest/odin.html</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
<div class="paragraph">
<p>Users are encouraged to comment on and/or advise on these paragraphs as well as the main content.  Feedback should be provided either on the <a href="http://lists.openehr.org/mailman/listinfo/openehr-technical_lists.openehr.org">technical mailing list</a>, or on the <a href="https://openehr.atlassian.net/issues/?filter=11105">specifications issue tracker</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>2. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The ODIN syntax provides a formal means of expressing instance data based on an underlying object-oriented or relational information model, which is readable both by humans and machines. The general appearance is exemplified by the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">person</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">List&lt;PERSON&gt;</span><span class="tok-p">)</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">[</span><span class="tok-mi">01234</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span> <span class="tok-c">-- person&#39;s name</span>
            <span class="tok-nc">forenames</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;Sherlock&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">family_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;Holmes&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">salutation</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;Mr&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
        <span class="tok-nc">address</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span> <span class="tok-c">-- person&#39;s address</span>
            <span class="tok-nc">habitation_number</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;221B&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">street_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;Baker St&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">city</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;London&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">country</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;England&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
    <span class="tok-p">[</span><span class="tok-mi">01235</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span> <span class="tok-c">-- etc &gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above the attribute names <code>person</code> , <code>name</code> , <code>address</code> etc, and the type <code>List&lt;PERSON&gt;</code> are all assumed to come from an information model. The <code>[01234]</code> and <code>[01235]</code> tags identify container items.</p>
</div>
<div class="paragraph">
<p>The basic design principle of ODIN is to be able to represent data in a way that is both machine-processible and human readable, while making the fewest assumptions possible about the information model to which the data conforms. To this end, type names are optional; often, only attribute names and values are explicitly shown. No syntactical assumptions are made about whether the underlying model is relational, object-oriented or what it actually looks like. More than one information model can be compatible with the same ODIN-expressed data. The UML semantics of composition/aggregation and association are expressible, as are shared objects. Literal leaf values are only of 'standard' widely recognised types, i.e. Integer, Real, Boolean, String, Character and a range of Date/time types. In standard ODIN, all complex types are expressed structurally.</p>
</div>
<div class="paragraph">
<p>The ODIN syntax as described above has a number of useful characteristics that enable the extensive use of paths to navigate it, and express references. These include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>each <code>&lt;&gt;</code> block corresponds to an object (i.e. an instance of some type in an information model);</p>
</li>
<li>
<p>the name before an '=' is always an attribute name or else a container element key, which attaches to the attribute of the enclosing block;</p>
</li>
<li>
<p>the formal type of leaf values can be inferred purely from syntax;</p>
</li>
<li>
<p>paths can be formed by navigating down a tree branch and concatenating attribute name, container keys (where they are encountered) and '/' characters;</p>
</li>
<li>
<p>every node is reachable by a path;</p>
</li>
<li>
<p>dynamically bound types can be explicitly indicated;</p>
</li>
<li>
<p>shared objects can be referred to by path references.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basics"><a class="anchor" href="#_basics"></a>3. Basics</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_file_encoding"><a class="anchor" href="#_file_encoding"></a>3.1. File Encoding</h3>
<div class="paragraph">
<p>ODIN files are intended to be capable of accommodating characters from any language, and may be used for multiple languages at once, e.g. as translation files for software. Accordingly, the assumed encoding for an ODIN file is UTF-8 unicode.</p>
</div>
<div class="paragraph">
<p>ODIN files encoded in latin 1 (ISO-8859-1) or another variant of ISO-8859 - both containing accented characters with unicode codes outside the ASCII 0-127 range - may work perfectly well, for various reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the contain nothing but ASCII, i.e. unicode code-points 0 - 127; this will be the case in English-language authored archetypes containing no foreign words;</p>
</li>
<li>
<p>some layer of the operating system is smart enough to do an on-the-fly conversion of characters above 127 into UTF-8, even if the archetype tool being used is designed for pure UTF-8 only;</p>
</li>
<li>
<p>a tool using the ODIN file might support UTF-8 and ISO-8859 variants.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For situations where binary UTF-8 cannot be supported, ASCII encoding of unicode characters above code-point 127 should only be done using the system supported by many programming languages today, namely <code>\u</code> escaped UTF-16. In this system, unicode codepoints are mapped to either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>\uHHHH</code> - 4 hex digits which will be the same (possibly 0-filled on the left) as the unicode code-point number expressed in hexadecimal; this applies to unicode codepoints in the range <code>U+0000</code> - <code>U+FFFF</code> (the 'base multi-lingual plane', BMP);</p>
</li>
<li>
<p><code>\uHHHHHHHH</code> - 8 hex digits to encode unicode code-points in the range U+10000 through <code>U+10FFFF</code> (non-BMP planes); the algorithm is described in <a href="http://www.ietf.org/html/rfc2781">IETF RFC 2781</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is not expected that the above approach will be commonly needed, and it may not be needed at all; it is preferable to find ways to ensure that native UTF-8 can be supported, since this reduces the burden for ODIN parser and tool implementers. The above guidance is therefore provided only to ensure a standard approach is used for ASCII-encoded unicode, if it becomes unavoidable.</p>
</div>
<div class="paragraph">
<p>Thus, while the only officially designated encoding for ODIN and its constituent syntaxes is UTF-8, real software systems may be more tolerant. This document therefore specifies that any tool designed to process ODIN files need only support UTF-8; supporting other encodings is an optional extra. This could change in the future, if required by the ODIN user community.</p>
</div>
<div class="paragraph">
<p>URIs, which have their own data type in ODIN, are handled in a specific way: all characters outside the 'unreserved set' defined by <a href="http://www.ietf.org/rfc/rfc3986">IETF RFC 3986</a> are 'percent-encoded'. The unreserved set is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="antlr-java"><span class="tok-nl">unreserved</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">ALPHA</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">DIGIT</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;-&#39;</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;.&#39;</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;_&#39;</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;~&#39;</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">ALPHA</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">[</span><span class="tok-n">a</span><span class="tok-o">-</span><span class="tok-n">zA</span><span class="tok-o">-</span><span class="tok-n">Z</span><span class="tok-p">]</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">DIGIT</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">[</span><span class="tok-n">0</span><span class="tok-o">-</span><span class="tok-mi">9</span><span class="tok-p">]</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_special_character_sequences"><a class="anchor" href="#_special_character_sequences"></a>3.2. Special Character Sequences</h3>
<div class="paragraph">
<p>In string and character data values, characters not in the lower ASCII (0-127) range should normally be UTF-8 encoded, but with the option of using the following quoted forms customary in software development:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>\r</code> - carriage return</p>
</li>
<li>
<p><code>\n</code> - linefeed</p>
</li>
<li>
<p><code>\t</code> - tab</p>
</li>
<li>
<p><code>\\</code> - backslash</p>
</li>
<li>
<p><code>\"</code> - literal double quote within a String terminal value</p>
</li>
<li>
<p><code>\'</code> - literal single quote within a Character terminal value</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any other character combination starting with a backslash is illegal; to get the effect of a literal backslash, the <code>\\</code> sequence should always be used.</p>
</div>
<div class="paragraph">
<p>Typically in a normal string, including multi-line paragraphs as used in ODIN, only <code>\\</code> and <code>\"</code> are likely to be necessary, since all of the others can be accommodated in their literal forms; the same goes for single characters - only <code>\\</code> and <code>\'</code> are likely to commonly occur. However, some authors may prefer to use <code>\n</code> and <code>\t</code> to make intended formatting clearer, or to allow for text editors that do not react properly to such characters. Parsers should therefore support the above list.</p>
</div>
</div>
<div class="sect2">
<h3 id="_keywords"><a class="anchor" href="#_keywords"></a>3.3. Keywords</h3>
<div class="paragraph">
<p>ODIN has no keywords of its own: all identifiers are assumed to come from an information model.</p>
</div>
</div>
<div class="sect2">
<h3 id="_reserved_characters"><a class="anchor" href="#_reserved_characters"></a>3.4. Reserved Characters</h3>
<div class="paragraph">
<p>In ODIN, a small number of characters are reserved and have the following meanings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;</code>: open an object block;</p>
</li>
<li>
<p><code>&gt;</code>: close an object block;</p>
</li>
<li>
<p><code>=</code>: indicate attribute value = object block;</p>
</li>
<li>
<p><code>(</code>, <code>)</code>: type name or plug-in syntax type delimiters;</p>
</li>
<li>
<p><code>&lt;#</code>: open an object block expressed in a plug-in syntax;</p>
</li>
<li>
<p><code>#&gt;</code>: close an object block expressed in a plug-in syntax.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Within &lt;&gt; delimiters, various characters are used as follows to indicate primitive values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"</code>: double quote characters are used to delimit string values;</p>
</li>
<li>
<p><code>'</code>: single quote characters are used to delimit single character values;</p>
</li>
<li>
<p><code>|</code>: bar characters are used to delimit intervals;</p>
</li>
<li>
<p><code>[]</code>: brackets are used to delimit coded terms.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_comments"><a class="anchor" href="#_comments"></a>3.5. Comments</h3>
<div class="paragraph">
<p>In an ODIN text, comments are indicated by the characters "--". Multi-line comments are achieved using the "--" leader on each line where the comment continues.</p>
</div>
<div class="paragraph">
<p>In this document, ODIN comments are shown in brown.</p>
</div>
</div>
<div class="sect2">
<h3 id="_information_model_identifiers"><a class="anchor" href="#_information_model_identifiers"></a>3.6. Information Model Identifiers</h3>
<div class="paragraph">
<p>Two types of identifiers from information models are used in ODIN: type names and attribute names. A <strong>type name</strong> is any identifier with an initial upper case letter, followed by any combination of letters, digits and underscores. A <strong>generic type name</strong> (including nested forms) additionally may include commas and angle brackets, and must be syntactically correct as per the UML. An <strong>attribute name</strong> is any identifier with an initial lower case letter, followed by any combination of letters, digits and underscores. Any convention that obeys this rule is allowed.</p>
</div>
<div class="paragraph">
<p>At least two well-known conventions that are ubiquitous in information models obey the above rule. One of these is the following convention:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type names are in all uppercase, e.g. <code>PERSON</code> , except for 'built-in' types, such as primitive types (` Integer` , <code>String</code> , <code>Boolean</code> , <code>Real</code> , <code>Double</code> ) and assumed container types (<code>List&lt;T&gt;</code> , <code>Set&lt;T&gt;</code> , <code>Hash&lt;T, U&gt;</code> ), which are in mixed case, in order to provide easy differentiation of built-in types from constructed types defined in the reference model. Built-in types are the same types assumed by UML, OCL, IDL and other similar object-oriented formalisms.</p>
</li>
<li>
<p>attribute names are shown in all lowercase, e.g. <code>home_address</code> .</p>
</li>
<li>
<p>in both type names and attribute names, underscores are used to represent word breaks. This convention is used to maximise the readability of this document.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The other common style is the programmer&#8217;s mixed-case or "camel case" convention exemplified by <code>Person</code> and <code>homeAddress</code> , as long as they obey the rule above. The convention chosen for any particular ODIN document should be based on the convention used in the underlying information model. Identifiers are shown in green in this document.</p>
</div>
</div>
<div class="sect2">
<h3 id="_semi_colons"><a class="anchor" href="#_semi_colons"></a>3.7. Semi-colons</h3>
<div class="paragraph">
<p>Semi-colons can be used to separate ODIN blocks, for example when it is preferable to include multiple attribute/value pairs on one line. Semi-colons make no semantic difference at all, and are included only as a matter of taste. The following examples are equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">term</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">text</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;plan&quot;</span><span class="tok-p">&gt;;</span> <span class="tok-nc">description</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;The clinician&#39;s advice&quot;</span><span class="tok-p">&gt;&gt;</span>
<span class="tok-nc">term</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">text</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;plan&quot;</span><span class="tok-p">&gt;</span> <span class="tok-nc">description</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;The clinician&#39;s advice&quot;</span><span class="tok-p">&gt;&gt;</span>

<span class="tok-nc">term</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-nc">text</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;plan&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-nc">description</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;The clinician&#39;s advice&quot;</span><span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Semi-colons are completely optional in ODIN.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_odin_artefacts"><a class="anchor" href="#_odin_artefacts"></a>4. ODIN Artefacts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An ODIN text may be created in two different physical forms: embedded fragments and documents. For both the following general structure applies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="antlr-java"><span class="tok-nl">odin_text</span><span class="tok-w">           </span><span class="tok-p">::</span><span class="tok-o">=</span><span class="tok-w">   </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-nv">schema_identifier</span><span class="tok-w"> </span><span class="tok-o">)?</span><span class="tok-w"> </span><span class="tok-nv">main_text</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">schema_identifier</span><span class="tok-w">   </span><span class="tok-p">::</span><span class="tok-o">=</span><span class="tok-w">   </span><span class="tok-err">`@`</span><span class="tok-w"> </span><span class="tok-nv">schema</span><span class="tok-w"> </span><span class="tok-s">&#39;=&#39;</span><span class="tok-w"> </span><span class="tok-no">URI</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where 'URI' is an value of the URI primitive type. This is used to indicate the schema, including its version, on which the main ODIN text is based. It is optional because in many cases the schema is known a priori, or can be inferred from context.</p>
</div>
<div class="paragraph">
<p>The following sections describe various types of ODIN artefact.</p>
</div>
<div class="sect2">
<h3 id="_embedded_fragment"><a class="anchor" href="#_embedded_fragment"></a>4.1. Embedded Fragment</h3>
<div class="paragraph">
<p>Fragments of ODIN text can appear embedded within other artefacts. A fragment typically includes no object identiers nor schema identifier since both of these are assumed to be inferred from the surrounding context. A typical fragment has the following appearance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-p">...</span> <span class="tok-nc">other</span> <span class="tok-nc">formalism</span> <span class="tok-nc">text</span> <span class="tok-p">...</span>
<span class="tok-p">...</span> <span class="tok-nc">delimiter</span> <span class="tok-p">...</span>

<span class="tok-c">--</span>
<span class="tok-c">-- ODIN Embedded Fragment</span>
<span class="tok-c">--</span>
    <span class="tok-nc">attr_1</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">attr_12</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">attr_13</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">leaf_value</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
    <span class="tok-nc">attr_2</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">attr_22</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">leaf_value</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>

<span class="tok-p">...</span> <span class="tok-nc">delimiter</span> <span class="tok-p">...</span>
<span class="tok-p">...</span> <span class="tok-nc">other</span> <span class="tok-nc">formalism</span> <span class="tok-nc">text</span> <span class="tok-p">...</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_document"><a class="anchor" href="#_document"></a>4.2. Document</h3>
<div class="paragraph">
<p>An ODIN document is considered a standalone artefact whose contents can take various forms, all assumed to correspond to one or more serialised objects.</p>
</div>
<div class="sect3">
<h4 id="_implicit_object_document"><a class="anchor" href="#_implicit_object_document"></a>4.2.1. Implicit Object Document</h4>
<div class="paragraph">
<p>A document containing only an embedded fragment such as shown above is considered to be an 'implict' object document, and its contents are assumed to consist of values of various object properties. This format is a degenerate form of the 'anonymous' object document but so common and useful it is treated as a legal ODIN form.</p>
</div>
<div class="paragraph">
<p>Implicit object documents are commonly used to serialise models, such as information model schemas, application configuration files and so on. The usual assumption is that the filename and/or ODIN content will identify the artefact sufficiently for tools to know what its information model is.</p>
</div>
</div>
<div class="sect3">
<h4 id="_anonymous_object_document"><a class="anchor" href="#_anonymous_object_document"></a>4.2.2. Anonymous Object Document</h4>
<div class="paragraph">
<p>Any other kind of ODIN document contains one or more explicit objects. The anonymous object form has one object per document, with no object identifier and consists of an outer '&lt;&gt;' delimiter pair containing an ODIN embedded fragment, i.e.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-c">--</span>
<span class="tok-c">-- ODIN Anonymous Object Document</span>
<span class="tok-c">--</span>
<span class="tok-p">&lt;</span>
    <span class="tok-nc">attr_1</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">attr_12</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">attr_13</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">leaf_value</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
    <span class="tok-nc">attr_2</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">attr_22</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">leaf_value</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This form has no practical benefit over the implicit document form, but is syntactically more correct, and should be supported by parsers.</p>
</div>
</div>
<div class="sect3">
<h4 id="_identified_object_document"><a class="anchor" href="#_identified_object_document"></a>4.2.3. Identified Object Document</h4>
<div class="paragraph">
<p>The next variant corresponds to serialisations of multiple objects, each of which is identified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-c">--</span>
<span class="tok-c">-- ODIN Identified Object Document</span>
<span class="tok-c">--</span>
<span class="tok-p">[</span><span class="tok-s">&quot;id_1&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-nc">attr_1</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">attr_12</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">attr_13</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">leaf_value</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span>

<span class="tok-p">[</span><span class="tok-s">&quot;id_2&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-nc">attr_1</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">attr_12</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">attr_13</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">leaf_value</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span>

<span class="tok-p">...</span>

<span class="tok-p">[</span><span class="tok-s">&quot;id_N&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-nc">attr_1</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">attr_12</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">attr_13</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">leaf_value</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p> </p>
</div>
<div class="paragraph">
<p>Identifiers can be values of the String, Integer or any Date/Time primitive types. Strings are most commonly used e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-c">--</span>
<span class="tok-c">-- ODIN Identified Object Document</span>
<span class="tok-c">--</span>

<span class="tok-p">[</span><span class="tok-s">&quot;aaa&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">...</span>
<span class="tok-p">&gt;</span>
<span class="tok-p">[</span><span class="tok-s">&quot;bbb&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">...</span>
<span class="tok-p">&gt;</span>
<span class="tok-p">[</span><span class="tok-s">&quot;ccc&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">...</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Identified Object Documents are most commonly used for representing serialised in-memory instance networks, i.e. the notion of an 'object dump'.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_content"><a class="anchor" href="#_content"></a>5. Content</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_general_structure"><a class="anchor" href="#_general_structure"></a>5.1. General Structure</h3>
<div class="paragraph">
<p>Within any kind of ODIN object instance (i.e. implied, anonymous or identified), the structure is a hierarchy of attribute names and object values. In its simplest form, an ODIN object consists of repetitions of the following pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="antlr-java"><span class="tok-nl">object</span><span class="tok-w"> </span><span class="tok-err">=</span><span class="tok-w"> </span><span class="tok-err">attribute_name</span><span class="tok-w"> </span><span class="tok-err">&#39;=&#39;</span><span class="tok-w"> </span><span class="tok-err">&#39;&lt;&#39;</span><span class="tok-w"> </span><span class="tok-err">value</span><span class="tok-w"> </span><span class="tok-err">&#39;&gt;&#39;</span><span class="tok-w"> </span><span class="tok-err">;</span><span class="tok-w"></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Each attribute name is the name of an attribute in an implied or actual object or relational model. Each "value" is either a literal value of a primitive type (see section <a href="#See Primitive Types">[See Primitive Types]</a>) or a further nesting of attribute names and values, terminating in leaf nodes of primitive type values. Where sibling attribute nodes occur, the attribute identifiers must be unique, just as in a standard object or relational model.</p>
</div>
<div class="paragraph">
<p>The following shows a typical structure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">attr_1</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-nc">attr_2</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">attr_3</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">leaf_value</span><span class="tok-p">&gt;</span>
        <span class="tok-nc">attr_4</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">leaf_value</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
    <span class="tok-nc">attr_5</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">attr_3</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">attr_6</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">leaf_value</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
        <span class="tok-nc">attr_7</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">leaf_value</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span>
<span class="tok-nc">attr_8</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above structure, each "&lt;&gt;" encloses an instance of some type. The hierarchical structure corresponds to the part-of relationship between objects, otherwise known as composition and <em>aggregation</em> relationships in object-oriented formalisms such as UML (the difference between the two is usually described as being "sub-objects related by aggregation can have independent lifetimes, whereas sub-objects related by composition have co-termimal lifetimes and are always destroyed with the parent"; ODIN does not differentiate between the two, since it is the business of a model, not the data, to express such semantics). Associations between instances in ODIN are also representable by references, and are described in the section <a href="#_associations_and_shared_objects">Associations and Shared Objects</a>.</p>
</div>
<div class="paragraph">
<p>Validity rules for object-structuring of ODIN are as follows:</p>
</div>
<div class="paragraph rule">
<p>VDATU: attribute name uniqueness: sibling attributes occurring within an object node must be uniquely named with respect to each other, in the same way as in class definitions in an information model.</p>
</div>
</div>
<div class="sect2">
<h3 id="_paths"><a class="anchor" href="#_paths"></a>5.2. Paths</h3>
<div class="paragraph">
<p>For any ODIN structure, a set of paths can be extracted that correspond to the tree structure of the data. The complete set of paths for the above example is as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin">    <span class="tok-p">/</span><span class="tok-nc">attr_1</span>
    <span class="tok-p">/</span><span class="tok-nc">attr_1</span><span class="tok-p">/</span><span class="tok-nc">attr_2</span>
    <span class="tok-p">/</span><span class="tok-nc">attr_1</span><span class="tok-p">/</span><span class="tok-nc">attr_2</span><span class="tok-p">/</span><span class="tok-nc">attr_3</span>           <span class="tok-c">-- path to a leaf value</span>
    <span class="tok-p">/</span><span class="tok-nc">attr_1</span><span class="tok-p">/</span><span class="tok-nc">attr_2</span><span class="tok-p">/</span><span class="tok-nc">attr_4</span>           <span class="tok-c">-- path to a leaf value</span>
    <span class="tok-p">/</span><span class="tok-nc">attr_1</span><span class="tok-p">/</span><span class="tok-nc">attr_5</span>
    <span class="tok-p">/</span><span class="tok-nc">attr_1</span><span class="tok-p">/</span><span class="tok-nc">attr_5</span><span class="tok-p">/</span><span class="tok-nc">attr_3</span>
    <span class="tok-p">/</span><span class="tok-nc">attr_1</span><span class="tok-p">/</span><span class="tok-nc">attr_5</span><span class="tok-p">/</span><span class="tok-nc">attr_3</span><span class="tok-p">/</span><span class="tok-nc">attr_6</span>    <span class="tok-c">-- path to a leaf value</span>
    <span class="tok-p">/</span><span class="tok-nc">attr_1</span><span class="tok-p">/</span><span class="tok-nc">attr_5</span><span class="tok-p">/</span><span class="tok-nc">attr_7</span>           <span class="tok-c">-- path to a leaf value</span>
    <span class="tok-p">/</span><span class="tok-nc">attr_8</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The path syntax used with ODIN maps trivially to W3C Xpath and Xquery paths, and is described in section <a href="#_path_syntax">Path Syntax</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_void_objects"><a class="anchor" href="#_void_objects"></a>5.3. Void Objects</h3>
<div class="paragraph">
<p>A void object, i.e. an object attribute that has no value is allowed in an ODIN text, but ignored by parsers. It is legal to output void objects, but not recommended. A void object looks as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin">    <span class="tok-nc">address</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span>    <span class="tok-c">-- person&#39;s address</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_container_objects"><a class="anchor" href="#_container_objects"></a>5.4. Container Objects</h3>
<div class="paragraph">
<p>The syntax described so far allows an instance of an arbitrarily large object to be expressed, but does not support attributes of container types such as lists, sets and hash tables, i.e. items whose type in an underlying reference model is something like <code>attr:List&lt;Type&gt;</code> , <code>attr:Set&lt;Type&gt;</code> or <code>attr: Hash&lt;KeyType, ValueType&gt;</code> . There are two ways instance data of such container objects can be expressed in ODIN. The first applies to leaf values and is to use a list style literal value for , where the "list nature" of the data is expressed within the manifest value itself, as in the following examples.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">fruits</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;pear&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;cumquat&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;peach&quot;</span><span class="tok-p">&gt;</span>
<span class="tok-nc">some_primes</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">,</span> <span class="tok-mi">5</span><span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#_lists_of_built_in_types">Lists of Built-in Types</a> for the complete description of list leaf types.</p>
</div>
<div class="paragraph">
<p>However for containers holding non-primitive values, including more container objects, a different syntax is needed. Consider by way of example that an instance of the container <code>List&lt;Person&gt;</code> could in theory be expressed as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-c">-- WARNING: THIS IS NOT VALID ODIN</span>

<span class="tok-nc">people</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">date_of_birth</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">sex</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">interests</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-p">&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">date_of_birth</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">sex</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">interests</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-p">&gt;</span>
    <span class="tok-c">-- etc</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, 'anonymous' blocks of data are repeated inside the outer block. However, this makes the data hard to read, and does not provide an easy way of constructing paths to the contained items. A better syntax becomes more obvious when we consider that members of container objects in their computable form are nearly always accessed by a method such as <code>member(i)</code> , <code>item[i]</code> or just plain <code>[i]</code> , in the case of array access in the C-based languages.</p>
</div>
<div class="paragraph">
<p>ODIN opts for the array-style syntax, known in ODIN as container member keys. No attribute name is explicitly given; any primitive comparable value is allowed as the key, rather than just integers used in C-style array access. Further, if integers are used, it is not assumed that they dictate ordinal indexing, i.e. it is possible to use a series of keys <code>[2]</code> , <code>[4]</code> , <code>[8]</code> etc. The following example shows one version of the above container in valid ODIN:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">people</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">birth_date</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">interests</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-p">&gt;</span>
    <span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">birth_date</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">interests</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-p">&gt;</span>
    <span class="tok-p">[</span><span class="tok-mi">3</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">birth_date</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">interests</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Strings and dates may also be used. Keys are coloured blue in the this specification in order to distinguish the run-time status of key values from the design-time status of class and attribute names. The following example shows the use of string values as keys for the contained items.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">people</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;akmal:1975-04-22&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">birth_date</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">interests</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-p">&gt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;akmal:1962-02-11&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">birth_date</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">interests</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-p">&gt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;gianni:1978-11-30&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">birth_date</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-nc">interests</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span> <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The syntax for primitive values used as keys follows exactly the same syntax described below for data of primitive types. It is convenient in some cases to construct key values from one or more of the values of the contained items, in the same way as relational database keys are constructed from sufficient field values to guarantee uniqueness. However, they need not be - they may be independent of the contained data, as in the case of hash tables, where the keys are part of the hash table structure, or equally, they may simply be integer index values, as in the 'locations' attribute in the 'school_schedule' structure shown below.</p>
</div>
<div class="paragraph">
<p>Container structures can appear anywhere in an overall instance structure, allowing complex data such as the following to be expressed in a readable way.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">school_schedule</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-nc">lesson_times</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-ld">08:30:00</span><span class="tok-p">,</span> <span class="tok-ld">09:30:00</span><span class="tok-p">,</span> <span class="tok-ld">10:30:00</span><span class="tok-p">,</span> <span class="tok-p">...&gt;</span>

    <span class="tok-nc">locations</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;under the big plane tree&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;under the north arch&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-mi">3</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;in a garden&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>

    <span class="tok-nc">subjects</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;philosophy:plato&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span> <span class="tok-c">-- note construction of key</span>
            <span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;philosophy&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">teacher</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;plato&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">topics</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;meta-physics&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;natural science&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">weighting</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-mi">76%</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;philosophy:kant&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;philosophy&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">teacher</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;kant&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">topics</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;meaning and reason&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;meta-physics&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;ethics&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">weighting</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-mi">80%</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;art&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;art&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">teacher</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;goya&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">topics</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;technique&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;portraiture&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;satire&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">weighting</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-mi">78%</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The example above conforms directly to the object-oriented type specification (given in a pascal-like syntax):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="idl">class SCHEDULE
    lesson_times<span class="tok-o">:</span> <span class="tok-nb">List</span><span class="tok-o">&lt;</span>Time<span class="tok-o">&gt;</span>
    locations<span class="tok-o">:</span> <span class="tok-nb">List</span><span class="tok-o">&lt;</span><span class="tok-nb">String</span><span class="tok-o">&gt;</span>
    subjects<span class="tok-o">:</span> <span class="tok-nb">List</span><span class="tok-o">&lt;</span>SUBJECT<span class="tok-o">&gt;</span> <span class="tok-o">--</span> <span class="tok-k">or</span> it could be <span class="tok-nb">Hash</span><span class="tok-o">&lt;</span>SUBJECT<span class="tok-o">&gt;</span>
<span class="tok-k">end</span>

class SUBJECT
    name<span class="tok-o">:</span> <span class="tok-nb">String</span>
    teacher<span class="tok-o">:</span> <span class="tok-nb">String</span>
    topics<span class="tok-o">:</span> <span class="tok-nb">List</span><span class="tok-o">&lt;</span><span class="tok-nb">String</span><span class="tok-o">&gt;</span>
    weighting<span class="tok-o">:</span> Real
<span class="tok-k">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Other class specifications corresponding to the same data are possible, but will all be isomorphic to the above.</p>
</div>
<div class="paragraph">
<p>How key values relate to a particular object structure depends on the object model being used during the ODIN parsing process. It is possible to write a parser which makes reasonable inferences from an information model whose instances are represented as ODIN text; it is also possible to include explicit typing information in the ODIN itself (see section <a href="#See Adding Type Information">[See Adding Type Information]</a> below).</p>
</div>
<div class="paragraph">
<p>The validity rule for objects within a container attribute is as follows:</p>
</div>
<div class="paragraph rule">
<p>VDOBU: object identifier uniqueness: sibling objects occurring within a container attribute must be uniquely identified with respect to each other.</p>
</div>
<div class="paragraph">
<p>Paths through container objects are formed in the same way as paths in other structured data, with the addition of the key, to ensure uniqueness. The key is included syntactically enclosed in brackets, in a similar way to Xpath predicates. Paths through containers in the above example include the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-p">/</span><span class="tok-nc">school_schedule</span><span class="tok-p">/</span><span class="tok-nc">locations</span><span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]</span>                   <span class="tok-c">-- path to &quot;under the big...&quot;</span>
<span class="tok-p">/</span><span class="tok-nc">school_schedule</span><span class="tok-p">/</span><span class="tok-nc">subjects</span><span class="tok-p">[</span><span class="tok-s">&quot;philosophy:kant&quot;</span><span class="tok-p">]</span>    <span class="tok-c">-- path to &quot;kant&quot;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_nested_container_objects"><a class="anchor" href="#_nested_container_objects"></a>5.5. Nested Container Objects</h3>
<div class="paragraph">
<p>In some cases the data of interest are instances of nested container types, such as <code>List&lt;List&lt;Message&gt;&gt;</code> (a list of Message lists) or <code>Hash&lt;List&lt;Integer&gt;, String&gt;</code> (a hash of integer lists keyed by strings). The ODIN syntax for such structures follows directly from the syntax for a single container object. The following example shows an instance of the type <code>List&lt;List&lt;String&gt;&gt;</code> expressed in ODIN syntax.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">list_of_string_lists</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;first string in first list&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;second string in first list&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
    <span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;first string in second list&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;second string in second list&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-mi">3</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;third string in second list&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
    <span class="tok-p">[</span><span class="tok-mi">3</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;only string in third list&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The paths of the above example are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-p">/</span><span class="tok-nc">list_of_string_lists</span><span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]/[</span><span class="tok-mi">1</span><span class="tok-p">]</span>
<span class="tok-p">/</span><span class="tok-nc">list_of_string_lists</span><span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]/[</span><span class="tok-mi">2</span><span class="tok-p">]</span>
<span class="tok-p">/</span><span class="tok-nc">list_of_string_lists</span><span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">]/[</span><span class="tok-mi">1</span><span class="tok-p">]</span>
<span class="tok-nc">etc</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_type_information"><a class="anchor" href="#_adding_type_information"></a>5.6. Adding Type Information</h3>
<div class="paragraph">
<p>In many cases, ODIN data is of a simple structure, very regular, and highly repetitive, such as the expression of simple demographic data. In such cases, it is preferable to express as little as possible about the informatoin model on which the data are based, since various software components want to use the data, and use it in different ways. However, there are also cases where the data is highly complex, and more model information is needed to help a parser. Examples include large design databases for aircraft and health records. Data obeying more complex models typically include sub-objects that are of a subtype of the statically declared type in the information model, in other words, dynamically bound types.</p>
</div>
<div class="paragraph">
<p>Where dynamic binding occurs in the data, it must be indicated in an ODIN document. Typing information is added to using a syntactical addition inspired by the <code>(type)</code> casting operator of the C language, whose meaning is approximately: force the type of the result of the following expression to be <code>type</code>. In ODIN typing is therefore done by including the type name in parentheses after the '=' sign, as in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">destinations</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;seville&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">TOURIST_DESTINATION</span><span class="tok-p">)</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">profile</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">DESTINATION_PROFILE</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
        <span class="tok-nc">hotels</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;gran sevilla&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">HISTORIC_HOTEL</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;sofitel&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">LUXURY_HOTEL</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;hotel real&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">PENSION</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
        <span class="tok-p">&gt;</span>
        <span class="tok-nc">attractions</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;la corrida&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">SPORT_VENUE</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;Alcázar&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">HISTORIC_SITE</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The path set from the above example is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-p">/</span><span class="tok-nc">destinations</span><span class="tok-p">[</span><span class="tok-s">&quot;seville&quot;</span><span class="tok-p">]/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;gran sevilla&quot;</span><span class="tok-p">]</span>
<span class="tok-p">/</span><span class="tok-nc">destinations</span><span class="tok-p">[</span><span class="tok-s">&quot;seville&quot;</span><span class="tok-p">]/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;sofitel&quot;</span><span class="tok-p">]</span>
<span class="tok-p">/</span><span class="tok-nc">destinations</span><span class="tok-p">[</span><span class="tok-s">&quot;seville&quot;</span><span class="tok-p">]/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;hotel real&quot;</span><span class="tok-p">]</span>

<span class="tok-p">/</span><span class="tok-nc">bookings</span><span class="tok-p">[</span><span class="tok-s">&quot;seville:0134&quot;</span><span class="tok-p">]/</span><span class="tok-nc">customer_id</span>
<span class="tok-p">/</span><span class="tok-nc">bookings</span><span class="tok-p">[</span><span class="tok-s">&quot;seville:0134&quot;</span><span class="tok-p">]/</span><span class="tok-nc">period</span>
<span class="tok-p">/</span><span class="tok-nc">bookings</span><span class="tok-p">[</span><span class="tok-s">&quot;seville:0134&quot;</span><span class="tok-p">]/</span><span class="tok-nc">hotel</span>

<span class="tok-p">/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;sofitel&quot;</span><span class="tok-p">]</span>
<span class="tok-p">/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;hotel real&quot;</span><span class="tok-p">]</span>
<span class="tok-p">/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;gran sevilla&quot;</span><span class="tok-p">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above, no type identifiers are included after the <code>hotels</code> and <code>attractions</code> attributes, so it is assumed by the parser that they are of their statically declared type, typically something like <code>List&lt;HOTEL&gt;</code> and <code>List&lt;ATTRACTION&gt;</code> respectively. Nevertheless, complete typing information can be included, as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">hotels</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">List&lt;HOTEL&gt;</span><span class="tok-p">)</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;gran sevilla&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">HISTORIC_HOTEL</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This illustrates the use of generic, i.e. template types, expressed in the standard UML syntax, using angle brackets. Any number of template arguments and any level of nesting is allowed, as in the UML. At first view, there may appear to be a risk of confusion between template type '&lt;&gt;' delimiters and the standard ODIN block delimiters. However the parsing rules are easy to state; essentially the difference is that an ODIN data block is always preceded by an '=' symbol.</p>
</div>
<div class="paragraph">
<p>Type identifiers can also include namespace information, which is necessary when same-named types appear in different packages of a model. Namespaces are included by prepending package names, separated by the '.' character, in the same way as in most programming languages, as in the qualified type names <code>org.openehr.rm.ehr.content.ENTRY</code> and <code>Core.Abstractions.Relationships.Relationship</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>6. References</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_associations_and_shared_objects"><a class="anchor" href="#_associations_and_shared_objects"></a>6.1. Associations and Shared Objects</h3>
<div class="paragraph">
<p>All of the facilities described so far allow any object-oriented data to be faithfully expressed in a formal, systematic way which is both machine- and human-readable, and allow any node in the data to be addressed using an Xpath-style path. The availability of reliable paths allows not only the representation of single 'business objects', which are the equivalent of UML aggregation (and composition) hierarchies, but also the representation of associations between objects, and by extension, shared objects.</p>
</div>
<div class="sect3">
<h4 id="_within_an_object"><a class="anchor" href="#_within_an_object"></a>6.1.1. Within An Object</h4>
<div class="paragraph">
<p>Consider that in the example above, 'hotel' objects may be shared objects, referred to by association. This can be expressed as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">destinations</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;seville&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">hotels</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;gran sevilla&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;gran sevilla&quot;</span><span class="tok-p">]&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;sofitel&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;sofitel&quot;</span><span class="tok-p">]&gt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;hotel real&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;hotel real&quot;</span><span class="tok-p">]&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span>

<span class="tok-nc">bookings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;seville:0134&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">customer_id</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;0134&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-nc">period</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span>
        <span class="tok-nc">hotel</span> <span class="tok-o">=</span> <span class="tok-p">&lt;/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;sofitel&quot;</span><span class="tok-p">]&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span>

<span class="tok-nc">hotels</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;gran sevilla&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">HISTORIC_HOTEL</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;sofitel&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">LUXURY_HOTEL</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;hotel real&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">PENSION</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Associations are expressed via the use of fully qualified paths as the data for an attribute. In this example, there are references from a list of destinations, and from a booking list, to the same hotel object. If type information is included, it should go in the declarations of the relevant objects; type declarations can also be used before path references, which might be useful if the association type is an ancestor type (i.e. more general type) of the type of the actual object being referred to.</p>
</div>
</div>
<div class="sect3">
<h4 id="_across_objects"><a class="anchor" href="#_across_objects"></a>6.1.2. Across Objects</h4>
<div class="paragraph">
<p>In an ODIN document containing identified objects, with references across objects, reference paths will include object identifiers, as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-p">[</span><span class="tok-s">&quot;travel_db_0293822&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-nc">destinations</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;seville&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">hotels</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-p">[</span><span class="tok-s">&quot;gran sevilla&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;[</span><span class="tok-s">&quot;tourism_db_13&quot;</span><span class="tok-p">]/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;gran sevilla&quot;</span><span class="tok-p">]&gt;</span>
                <span class="tok-p">[</span><span class="tok-s">&quot;sofitel&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;[</span><span class="tok-s">&quot;tourism_db_13&quot;</span><span class="tok-p">]/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;sofitel&quot;</span><span class="tok-p">]&gt;</span>
                <span class="tok-p">[</span><span class="tok-s">&quot;hotel real&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;[</span><span class="tok-s">&quot;tourism_db_13&quot;</span><span class="tok-p">]/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;hotel real&quot;</span><span class="tok-p">]&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>

    <span class="tok-nc">bookings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;seville:0134&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">customer_id</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;0134&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">period</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span>
            <span class="tok-nc">hotel</span> <span class="tok-o">=</span> <span class="tok-p">&lt;[</span><span class="tok-s">&quot;tourism_db_13&quot;</span><span class="tok-p">]/</span><span class="tok-nc">hotels</span><span class="tok-p">[</span><span class="tok-s">&quot;sofitel&quot;</span><span class="tok-p">]&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span>

<span class="tok-p">[</span><span class="tok-s">&quot;tourism_db_13&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-nc">hotels</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;gran sevilla&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">HISTORIC_HOTEL</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;sofitel&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">LUXURY_HOTEL</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;hotel real&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">PENSION</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_across_odin_documents"><a class="anchor" href="#_across_odin_documents"></a>6.1.3. Across ODIN Documents</h4>
<div class="paragraph">
<p>Data in other ODIN documents can be referred to using a URI containing a reference path to locate the document, with the internal path included as described above.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leaf_data"><a class="anchor" href="#_leaf_data"></a>7. Leaf Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All ODIN data eventually devolve to instances of the primitive types <code>String</code> , <code>Integer</code> , <code>Real</code> , <code>Double</code> , <code>String</code> , <code>Character</code> , various date/time types, lists or intervals of these types, and a few special types. ODIN does not use type or attribute names for instances of primitive types, only manifest values, making it possible to assume as little as possible about type names and structures of the primitive types. In all the following examples, the manifest data values are assumed to appear immediately inside a leaf pair of angle brackets, i.e.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>some_attribute = &lt;manifest value&gt;</pre>
</div>
</div>
<div class="sect2">
<h3 id="_primitive_types"><a class="anchor" href="#_primitive_types"></a>7.1. Primitive Types</h3>
<div class="sect3">
<h4 id="_character_data"><a class="anchor" href="#_character_data"></a>7.1.1. Character Data</h4>
<div class="paragraph">
<p>Characters are shown in a number of ways. In the literal form, a character is shown in single quotes, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    'a'</pre>
</div>
</div>
<div class="paragraph">
<p>Characters outside the low ASCII (0-127) range must be UTF-8 encoded, with a small number of backslash-quoted ASCII characters allowed, as described in the section <a href="#_file_encoding">File Encoding</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_string_data"><a class="anchor" href="#_string_data"></a>7.1.2. String Data</h4>
<div class="paragraph">
<p>All strings are enclosed in double quotes, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    "this is a string"</pre>
</div>
</div>
<div class="paragraph">
<p>Quotes are encoded using ISO/IEC 10646 codes, e.g. :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    "this is a much longer string, what one might call a &amp;quot;phrase&amp;quot;."</pre>
</div>
</div>
<div class="paragraph">
<p>Line extension of strings is done simply by including returns in the string. The exact contents of the string are computed as being the characters between the double quote characters, with the removal of white space leaders up to the left-most character of the first line of the string. This has the effect of allowing the inclusion of multi-line strings in ODIN texts, in their most natural human-readable form, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin">    <span class="tok-nc">text</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;And now the STORM-BLAST came, and he</span>
<span class="tok-s">            Was tyrannous and strong :</span>
<span class="tok-s">            He struck with his o&#39;ertaking wings,</span>
<span class="tok-s">            And chased us south along.&quot;</span><span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>String data can be used to contain almost any other kind of data, which is intended to be parsed as some other formalism. Characters outside the low ASCII (0-127) range must be UTF-8 encoded, with a small number of backslash-quoted ASCII characters allowed, as described in section <a href="#_file_encoding">File Encoding</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_integer_data"><a class="anchor" href="#_integer_data"></a>7.1.3. Integer Data</h4>
<div class="paragraph">
<p>Integers are represented simply as numbers, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    25
    300000
    29e6</pre>
</div>
</div>
<div class="paragraph">
<p>Commas or periods for breaking long numbers are not allowed, since they confuse the use of commas used to denote list items (See <a href="#_lists_of_built_in_types">Lists of Built-in Types</a> below).</p>
</div>
</div>
<div class="sect3">
<h4 id="_real_data"><a class="anchor" href="#_real_data"></a>7.1.4. Real Data</h4>
<div class="paragraph">
<p>Real numbers are assumed whenever a decimal is detected in a number, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    25.0
    3.1415926
    6.023e23</pre>
</div>
</div>
<div class="paragraph">
<p>Commas or periods for breaking long numbers are not allowed. Only periods may be used to separate the decimal part of a number; unfortunately, the European use of the comma for this purpose conflicts with the use of the comma to distinguish list items (See <a href="#_lists_of_built_in_types">Lists of Built-in Types</a> below).</p>
</div>
</div>
<div class="sect3">
<h4 id="_boolean_data"><a class="anchor" href="#_boolean_data"></a>7.1.5. Boolean Data</h4>
<div class="paragraph">
<p>Boolean values can be indicated by the following values (case-insensitive):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    True
    False</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dates_and_times"><a class="anchor" href="#_dates_and_times"></a>7.1.6. Dates and Times</h4>
<div class="sect4">
<h5 id="_complete_date_times"><a class="anchor" href="#_complete_date_times"></a>7.1.6.1. Complete Date/Times</h5>
<div class="paragraph">
<p>In ODIN, full and partial dates, times and durations can be expressed. All full dates, times and durations are expressed using a subset of ISO 8601. The openEHR <a href="/releases/BASE/latest/foundation_types.html#_time_types">Foundation Types specification</a> provides a full explanation of the ISO 8601 semantics supported in openEHR.</p>
</div>
<div class="paragraph">
<p>In ODIN, the use of ISO 8601 allows extended form only (i.e. ':' and '-' must be used). The ISO 8601 method of representing partial dates consisting of a single year number, and partial times consisting of hours only are not supported, since they are ambiguous. See below for partial forms.</p>
</div>
<div class="paragraph">
<p>Durations are expressed using a string which starts with 'P', and is followed by a list of periods, each appended by a single letter designator: 'Y' for years, "M' for months, 'W' for weeks, 'D' for days, 'H' for hours, 'M' for minutes, and 'S' for seconds. The literal 'T' separates the YMWD part from the HMS part, ensuring that months and minutes can be distinguished. Examples of date/time data include:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin">    <span class="tok-ld">1919-01-23</span>                 <span class="tok-c">-- birthdate of Django Reinhardt</span>
    <span class="tok-ld">16:35:04</span><span class="tok-p">,</span><span class="tok-mi">5</span>                 <span class="tok-c">-- rise of Venus in Sydney on 24 Jul 2003</span>
    <span class="tok-ld">2001-05-12T07:35:20+1000</span>   <span class="tok-c">-- timestamp on an email received from Australia</span>
    <span class="tok-ld">P22DT4H15M0S</span>               <span class="tok-c">-- period of 22 days, 4 hours, 15 minutes</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_partial_date_times"><a class="anchor" href="#_partial_date_times"></a>7.1.6.2. Partial Date/Times</h5>
<div class="paragraph">
<p>Two ways of expressing partial (i.e. incomplete) date/times are supported in ODIN. The ISO 8601 incomplete formats are supported in extended form only (i.e. with '-' and ':' separators) for all patterns that are unambiguous on their own. Dates consisting of only the year, and times consisting of only the hour are not supported, since both of these syntactically look like integers. The supported ISO 8601 patterns are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    yyyy-MM            -- a date with no days
    hh:mm              -- a time with no seconds
    yyyy-MM-ddThh:mm   -- a date/time with no seconds
    yyyy-MM-ddThh      -- a date/time, no minutes or seconds</pre>
</div>
</div>
<div class="paragraph">
<p>To deal with the limitations of ISO 8601 partial patterns in a context-free parsing environment, a second form of pattern is supported in ODIN, based on ISO 8601. In this form, '?' characters are substituted for missing digits. Valid partial dates follow the patterns (corresponding to reduced accuracy forms described in ISO 8601-2004, section 4.1.4.3):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    yyyy-MM-??         -- date with unknown day in month
    yyyy-??-??         -- date with unknown month and day</pre>
</div>
</div>
<div class="paragraph">
<p>Valid partial times follow the patterns (corresponding to reduced accuracy forms described in ISO 8601-2004, section 4.2.2.3):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    hh:mm:??           -- time with unknown seconds
    hh:??:??           -- time with unknown minutes and seconds</pre>
</div>
</div>
<div class="paragraph">
<p>Valid date/times follow the patterns (corresponding to reduced accuracy forms described in ISO 8601-2004, section 4.3.3):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    yyyy-MM-ddThh:mm:??     -- date/time with unknown seconds
    yyyy-MM-ddThh:??:??     -- date/time with unknown minutes and seconds</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_intervals_of_ordered_primitive_types"><a class="anchor" href="#_intervals_of_ordered_primitive_types"></a>7.2. Intervals of Ordered Primitive Types</h3>
<div class="paragraph">
<p>Intervals of any ordered primitive type, i.e., Integer, Real, Date, Time, Date_time and Duration, can be stated using the following uniform syntax, where N, M are instances of any of the ordered types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    |N..M|        -- the two-sided range N &gt;= x &lt;= M;
    |&gt;N..M|       -- the two-sided range N &gt; x &lt;= M;
    |N..&lt;M|       -- the two-sided range N &lt;= x &lt;M;
    |&gt;N..&lt;M|      -- the two-sided range N &gt; x &lt;M;
    |&lt;N|          -- the one-sided range x &lt; N;
    |&gt;N|          -- the one-sided range x &gt; N;
    |&gt;=N|         -- the one-sided range x &gt;= N;
    |&lt;=N|         -- the one-sided range x &lt;= N;
    |N +/-M|      -- interval of N ±M.
    |N±M|         -- interval of N ±M.</pre>
</div>
</div>
<div class="paragraph">
<p>The allowable values for N and M include any value in the range of the relevant type.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
for the plus/minus form (N ± M format), spaces are not significant either side of the '±' sign or the equivalent '+/' string.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Examples of this syntax include:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    |0..5|              -- integer interval
    |0.0..1000.0|       -- real interval
    |0.0..&lt;1000.0|      -- real interval 0.0 &lt;= x &lt; 1000.0
    |08:02..09:10|      -- interval of time
    |&gt;=1939-02-01|      -- open-ended interval of dates
    |5.0 ±0.5|          -- 4.5 ±5.5
    |5.0 +/-0.5|        -- 4.5 ±5.5
    |&gt;=0|               -- &gt;= 0</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_other_built_in_types"><a class="anchor" href="#_other_built_in_types"></a>7.3. Other Built-in Types</h3>
<div class="sect3">
<h4 id="_uris"><a class="anchor" href="#_uris"></a>7.3.1. URIs</h4>
<div class="paragraph">
<p>URI can be expressed as ODIN data in the usual way found on the web, and follow the standard syntax from <a href="http://www.ietf.org/rfc/rfc3986">IETF RFC3986</a>. Examples of URIs in ODIN:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    http://openEHR.org/home
    ftp://get.this.file.com?file=cats.doc#section_5
    http://www.mozilla.org/products/firefox/upgrade/?application=thunderbird</pre>
</div>
</div>
<div class="paragraph">
<p>Encoding of special characters in URIs follows the IETF RFC 3986, as described in the section <a href="#_file_encoding">File Encoding</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_coded_terms"><a class="anchor" href="#_coded_terms"></a>7.3.2. Coded Terms</h4>
<div class="paragraph">
<p>Coded terms are ubiquitous in medical and clinical information, and are likely to become so in most other industries, as ontologically-based information systems and the 'semantic web' emerge. The logical structure of a coded term is simple: it consists of an identifier of a terminology (with optional version), and an identifier of a code within that terminology. The ODIN string representation is of the following form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    [terminology_id::code]</pre>
</div>
</div>
<div class="paragraph">
<p>where <code>terminology_id</code> is an alphanumeric name, optionally following by a version in parentheses, and <code>code</code> is a string. The allowed characters in each part are described in the grammaar.</p>
</div>
<div class="paragraph">
<p>Examples from clinical data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    [icd10AM::F60.1]            -- from ICD10AM
    [snomed_ct::2004950]        -- from snomed-ct
    [snomed_ct(3.1)::2004950]   -- from snomed-ct v 3.1</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lists_of_built_in_types"><a class="anchor" href="#_lists_of_built_in_types"></a>7.4. Lists of Built-in Types</h3>
<div class="paragraph">
<p>Data of any primitive type can occur singly or in lists, which are shown as comma-separated lists of item, all of the same type, such as in the following examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    "cyan", "magenta", "yellow", "black"    -- printer's colours
    1, 1, 2, 3, 5                           -- first 5 fibonacci numbers
    08:02, 08:35, 09:10                     -- set of train times</pre>
</div>
</div>
<div class="paragraph">
<p>No assumption is made in the syntax about whether a list represents a set, a list or some other kind of sequence - such semantics must be taken from an underlying information model.</p>
</div>
<div class="paragraph">
<p>Lists which happen to have only one datum are indicated by using a comma followed by a list continuation marker of three dots, i.e. "&#8230;&#8203;", e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    "en", ...       -- languages
    "icd10", ...    -- terminologies
    [at0200], ...</pre>
</div>
</div>
<div class="paragraph">
<p>White space may be freely used or avoided in lists, i.e. the following two lists are identical:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    1,1,2,3
    1, 1, 2,3</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_path_syntax"><a class="anchor" href="#_path_syntax"></a>8. Path Syntax</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_semantics"><a class="anchor" href="#_semantics"></a>8.1. Semantics</h3>
<div class="paragraph">
<p>The general form of the path syntax is as follows (see syntax section below for full specification):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="ebnf"><span class="tok-k">path            </span><span class="tok-o">=</span>     <span class="tok-p">[</span><span class="tok-s1">&#39;/&#39;</span><span class="tok-p">]</span> <span class="tok-k">path_segment </span><span class="tok-p">{</span> <span class="tok-s1">&#39;/&#39;</span> <span class="tok-k">path_segment </span><span class="tok-p">}</span> <span class="tok-p">;</span>
<span class="tok-k">path_segment    </span><span class="tok-o">=</span>     <span class="tok-k">attr_name </span><span class="tok-p">[</span> <span class="tok-s1">&#39;[&#39;</span> <span class="tok-k">object_id </span><span class="tok-s1">&#39;]&#39;</span> <span class="tok-p">]</span> <span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Essentially, ODIN paths consist of segments separated by slashes ('/'), where each segment is an attribute name with optional object identifier predicate, indicated by brackets ('[]').</p>
</div>
<div class="paragraph">
<p>ODIN Paths are formed from an alternation of segments made up of an attribute name and optional object node identifier predicate, separated by slash ('/') characters. Node identifiers are delimited by brackets (i.e. []).</p>
</div>
<div class="paragraph">
<p>Paths are <em>absolute</em> or relative with respect to the document in which they are mentioned. Absolute paths commence with an initial slash ('/') character.</p>
</div>
<div class="paragraph">
<p>A typical ODIN path used to refer to a node in an ODIN text is as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-p">/</span><span class="tok-nc">term_definitions</span><span class="tok-p">[</span><span class="tok-s">&quot;en&quot;</span><span class="tok-p">]/</span><span class="tok-nc">items</span><span class="tok-p">[</span><span class="tok-s">&quot;at0001&quot;</span><span class="tok-p">]/</span><span class="tok-nc">text</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the following sections, paths are shown for all the ODIN data examples.</p>
</div>
</div>
<div class="sect2">
<h3 id="_relationship_with_w3c_xpath"><a class="anchor" href="#_relationship_with_w3c_xpath"></a>8.2. Relationship with W3C Xpath</h3>
<div class="paragraph">
<p>The ODIN path syntax is semantically a subset of the Xpath query language, with a few syntactic shortcuts to reduce the verbosity of the most common cases. Xpath differentiates between "children" and "attributes" sub-items of an object due to the difference in XML between Elements (true sub-objects) and Attributes (tag-embedded primitive values). In ODIN, as with any pure object formalism, there is no such distinction, and all subparts of any object are referenced in the manner of Xpath children; in particular, in the Xpath abbreviated syntax, the key <code>child::</code> does not need to be used.</p>
</div>
<div class="paragraph">
<p>ODIN does not distinguish attributes from children, and also assumes the <code>node_id</code> attribute. Thus, the following expressions are legal for cADL structures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">items</span><span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]</span>            <span class="tok-c">-- the first member of &#39;items&#39;</span>
<span class="tok-nc">items</span><span class="tok-p">[</span><span class="tok-s">&quot;systolic&quot;</span><span class="tok-p">]</span>   <span class="tok-c">-- the member of &#39;items&#39; with meaning &#39;systolic&#39;</span>
<span class="tok-nc">items</span><span class="tok-p">[</span><span class="tok-s">&quot;at0001&quot;</span><span class="tok-p">]</span>     <span class="tok-c">-- the member of &#39;items&#39; with node id &#39;at0001&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The Xpath equivalents are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xpath">items[1]                                -- the first member of &#39;items&#39;
items[@key = &#39;systolic&#39;]                -- the member of &#39;items&#39; with key &quot;systolic&quot;
items[@archetype_node_id = &#39;at0001&#39;]    -- the member of &#39;items&#39; with archetype_node_id attribute &#39;at0001&#39;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plug_in_syntaxes"><a class="anchor" href="#_plug_in_syntaxes"></a>9. Plug-in Syntaxes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using the ODIN syntax, any object structure can be serialised. In some cases, the requirement is to express some part of the structure in an abstract syntax, rather than in the more literal seriliased object form of ODIN. ODIN provides for this possibility by allowing the value of any object (i.e. what appears between any matching pair of <code>&lt;&gt;</code> delimiters) to be expressed in some other syntax, known as a "plug-in" syntax. Plug-in syntaxes are indicated in ODIN in a similar way as typed objects, i.e. by the use of the syntax type in parentheses preceding the <code>&lt;&gt;</code> block. For a plug-in section, the <code>&lt;&gt;</code> delimiters are modified to <code>&lt;# #&gt;</code>, to allow for easier parser design, and easier recognition of such blocks by human readers. The general form is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>attr_name = (syntax) &lt;#
...
#&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The following example illustrates a cADL plug-in section in an archetype, which it itself an ODIN document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>definition = (cadl) &lt;#
    ENTRY[at0000] ∈ { -- blood pressure measurement
        name ∈ { -- any synonym of BP
            CODED_TEXT ∈ {
                code ∈ {
                    CODE_PHRASE ∈ {[ac0001]}
                }
            }
        }
    }
#&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Clearly, many plug-in syntaxes might one day be used within ODIN data; there is no guarantee that every ODIN parser will support them. The general approach to parsing should be to use plug-in parsers, i.e. to obtain a parser for a plug-in syntax that can be built into the existing parser framework.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_relationship_with_other_syntaxes"><a class="anchor" href="#_relationship_with_other_syntaxes"></a>Appendix A: Relationship with other Syntaxes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_xml"><a class="anchor" href="#_xml"></a>A.1. XML</h3>
<div class="paragraph">
<p>A common question about ODIN is why it is needed, when there is already XML? To start with, this question highlights the widespread misconception about XML, namely that because it can be read by a text editor, it is intended for humans. In fact, XML is designed for machine processing, and is textual to guarantee its interoperability, not its readability. Realistic examples of XML (e.g. XML-schema instance, OWL-RDF ontologies) are generally unreadable for humans. ODIN is on the other hand designed as a human-writable and readable formalism that is also machine processable; it may be thought of as an abstract syntax for object-oriented data. ODIN also differs from XML by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>providing a more comprehensive set of leaf data types, including intervals of numerics and date/time types, and lists of all primitive types;</p>
</li>
<li>
<p>adhering to object-oriented semantics, particularly for container types, which XML schema languages generally do not;</p>
</li>
<li>
<p>not using the confusing XML notion of 'attributes' and 'elements' to represent what are essentially object properties;</p>
</li>
<li>
<p>requiring roughly half the space of the equivalent XML.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This does not prevent ODIN documents being converted to XML and indeed the conversion to XML instance is rather straighforward.</p>
</div>
<div class="sect3">
<h4 id="_expression_of_odin_in_xml"><a class="anchor" href="#_expression_of_odin_in_xml"></a>A.1.1. Expression of ODIN in XML</h4>
<div class="paragraph">
<p>The ODIN syntax maps relatively easily to XML instance. It is important to realise that developers using XML often develop different mappings for object-oriented data, due to the fact that XML does not have systematic object-oriented semantics. This is particularly the case where containers such as lists and sets such as 'employees: List&lt;Person&gt;' are mapped to XML; many implementors have to invent additional tags such as 'employee' to make the mapping appear visually correct. The particular mapping chosen here is designed to be a faithful reflection of the semantics of the object-oriented data, and does not try take into account visual aesthetics of the XML. The result is that Xpath expressions are the same for ODIN and XML, and also correspond to what one would expect based on an underlying object model.</p>
</div>
<div class="paragraph">
<p>The main elements of the mapping are as follows.</p>
</div>
<div class="sect4">
<h5 id="_single_attributes"><a class="anchor" href="#_single_attributes"></a>A.1.1.1. Single Attributes</h5>
<div class="paragraph">
<p>Single attribute nodes map to tagged nodes of the same name.</p>
</div>
</div>
<div class="sect4">
<h5 id="_container_attributes"><a class="anchor" href="#_container_attributes"></a>A.1.1.2. Container Attributes</h5>
<div class="paragraph">
<p>Container attribute nodes map to a series of tagged nodes of the same name, each with the XML attribute 'id' set to the ODIN key. For example, the ODIN:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">subjects</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;philosophy:plato&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;philosophy&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;philosophy:kant&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;philosophy&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>maps to the XML:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;subjects</span> <span class="tok-na">id=</span><span class="tok-s">&quot;philosophy:plato&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;name&gt;</span> philosophy <span class="tok-nt">&lt;/name&gt;</span>
<span class="tok-nt">&lt;/subjects&gt;</span>
<span class="tok-nt">&lt;subjects</span> <span class="tok-na">id=</span><span class="tok-s">&quot;philosophy:kant&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;name&gt;</span> philosophy <span class="tok-nt">&lt;/name&gt;</span>
<span class="tok-nt">&lt;/subjects&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This guarantees that the path <code>subjects[@id='philosophy:plato']/name</code> navigates to the same element in both ODIN and the XML.</p>
</div>
</div>
<div class="sect4">
<h5 id="_nested_container_attributes"><a class="anchor" href="#_nested_container_attributes"></a>A.1.1.3. Nested Container Attributes</h5>
<div class="paragraph">
<p>Nested container attribute nodes map to a series of tagged nodes of the same name, each with the XML attribute 'id' set to the ODIN key. For example, consider an object structure defined by the signature <code>countries:Hash&lt;Hash&lt;Hotel,String&gt;,String&gt;</code> . An instance of this in ODIN looks as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">countries</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;spain&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;hotels&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;attractions&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span>
    <span class="tok-p">&gt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;egypt&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;hotels&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;attractions&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;...&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>can be mapped to the XML in which the synthesised element tag "_items" and the attribute "key" are used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;countries</span> <span class="tok-na">key=</span><span class="tok-s">&quot;spain&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;_items</span> <span class="tok-na">key=</span><span class="tok-s">&quot;hotels&quot;</span><span class="tok-nt">&gt;</span>
        ...
    <span class="tok-nt">&lt;/_items&gt;</span>
    <span class="tok-nt">&lt;_items</span> <span class="tok-na">key=</span><span class="tok-s">&quot;attractions&quot;</span><span class="tok-nt">&gt;</span>
        ...
    <span class="tok-nt">&lt;/_items&gt;</span>
<span class="tok-nt">&lt;/countries&gt;</span>

<span class="tok-nt">&lt;countries</span> <span class="tok-na">key=</span><span class="tok-s">&quot;egypt&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;_items</span> <span class="tok-na">id=</span><span class="tok-s">&quot;hotels&quot;</span><span class="tok-nt">&gt;</span>
    ...
    <span class="tok-nt">&lt;/_items&gt;</span>
    <span class="tok-nt">&lt;_items</span> <span class="tok-na">key=</span><span class="tok-s">&quot;attractions&quot;</span><span class="tok-nt">&gt;</span>
    ...
    <span class="tok-nt">&lt;/_items&gt;</span>
<span class="tok-nt">&lt;/countries&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the ODIN path <code>countries["spain"]/["hotels"]</code> will be transformed to the Xpath <code>countries[@key="spain"]/_items[@key="hotels"]</code> in order to navigate to the same element.</p>
</div>
</div>
<div class="sect4">
<h5 id="_type_names"><a class="anchor" href="#_type_names"></a>A.1.1.4. Type Names</h5>
<div class="paragraph">
<p>Type names map to XML 'type' attributes e.g. the ODIN:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">destinations</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
    <span class="tok-p">[</span><span class="tok-s">&quot;seville&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">TOURIST_DESTINATION</span><span class="tok-p">)</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">profile</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">DESTINATION_PROFILE</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
        <span class="tok-nc">hotels</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-p">[</span><span class="tok-s">&quot;gran sevilla&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-nc">HISTORIC_HOTEL</span><span class="tok-p">)</span> <span class="tok-p">&lt;...&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>maps to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;destinations</span> <span class="tok-na">id=</span><span class="tok-s">&quot;seville&quot;</span> <span class="tok-na">rm:type=</span><span class="tok-s">&quot;TOURIST_DESTINATION&quot;</span><span class="tok-nt">&gt;</span>
	<span class="tok-nt">&lt;profile</span> <span class="tok-na">rm:type=</span><span class="tok-s">&quot;DESTINATION_PROFILE&quot;</span><span class="tok-nt">&gt;</span>
		...
	<span class="tok-nt">&lt;/profile&gt;</span>
	<span class="tok-nt">&lt;hotels</span> <span class="tok-na">id=</span><span class="tok-s">&quot;gran sevilla&quot;</span> <span class="tok-na">rm:type=</span><span class="tok-s">&quot;HISTORIC_HOTEL&quot;</span><span class="tok-nt">&gt;</span>
		...
	<span class="tok-nt">&lt;/hotels&gt;</span>
<span class="tok-nt">&lt;/destinations&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_json"><a class="anchor" href="#_json"></a>A.2. JSON</h3>
<div class="paragraph">
<p>The JavaScript Object Notation (JSON) was designed with the aim of representing JavaScript data objects in a programming language independent way, primarily for use with the web and JavaScript. The majority of use was for small fragments, although in more recent years it is starting to be used for more complex data representation tasks, for example with REST web services.</p>
</div>
<div class="sect3">
<h4 id="_leaf_types"><a class="anchor" href="#_leaf_types"></a>A.2.1. Leaf types</h4>
<div class="paragraph">
<p>ODIN has more terminal types than JSON, including the date/time types, and the Interval types.</p>
</div>
<div class="paragraph">
<p>Date/time types would typically be mapped to and from Strings containing ISO 8601 syntax dates and times.</p>
</div>
<div class="paragraph">
<p>The interval is a built-in ODIN type that would need to be explicitly expanded into a JSON structure, with an assumed model of the parts of the Interval. For this purpose, the following model is recommended as a basis for constructing the JSON equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="idl">class Interval <span class="tok-o">&lt;</span>T<span class="tok-o">:</span> Ordered<span class="tok-o">&gt;</span> {
    T lower;
    T upper;
    Boolean lower_included;
    Boolean upper_included;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_typing"><a class="anchor" href="#_typing"></a>A.2.2. Typing</h4>
<div class="paragraph">
<p>ODIN supports optional type markers, which are not available with JSON. In a conversion situation these would need to be converted to an explicit structure.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_syntax_specification"><a class="anchor" href="#_syntax_specification"></a>Appendix B: Syntax Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The grammar and lexical specification for the standard ODIN syntax is shown below in ANTLR4 form.
 </p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="antlr-java"><span class="tok-c">//</span><span class="tok-w"></span>
<span class="tok-c">//	description: Antlr4 grammar for Object Data Instance Notation (ODIN)</span><span class="tok-w"></span>
<span class="tok-c">//	author:      Thomas Beale &lt;thomas.beale@openehr.org&gt;</span><span class="tok-w"></span>
<span class="tok-c">//	support:     openEHR Specifications PR tracker &lt;https://openehr.atlassian.net/projects/SPECPR/issues&gt;</span><span class="tok-w"></span>
<span class="tok-c">//	copyright:   Copyright (c) 2015 openEHR Foundation</span><span class="tok-w"></span>
<span class="tok-c">//	license:     Apache 2.0 License &lt;http://www.apache.org/licenses/LICENSE-2.0.html&gt;</span><span class="tok-w"></span>
<span class="tok-c">//</span><span class="tok-w"></span>

<span class="tok-k">grammar</span><span class="tok-w"> </span><span class="tok-nc">odin</span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">import</span><span class="tok-w"> </span><span class="tok-err">odin_values;</span><span class="tok-w"></span>

<span class="tok-c">//</span><span class="tok-w"></span>
<span class="tok-c">// -------------------------- Parse Rules --------------------------</span><span class="tok-w"></span>
<span class="tok-c">//</span><span class="tok-w"></span>

<span class="tok-err">odin_text</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-nv">attr_vals</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">object_value_block</span><span class="tok-w"></span>
<span class="tok-w">	</span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">attr_vals</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-nv">attr_val</span><span class="tok-w"> </span><span class="tok-s">&#39;;&#39;</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">attr_val</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">rm_attribute_id</span><span class="tok-w"> </span><span class="tok-s">&#39;=&#39;</span><span class="tok-w"> </span><span class="tok-nv">object_block</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">object_block</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-nv">object_value_block</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">object_reference_block</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">object_value_block</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;(&#39;</span><span class="tok-w"> </span><span class="tok-nv">rm_type_id</span><span class="tok-w"> </span><span class="tok-s">&#39;)&#39;</span><span class="tok-w"> </span><span class="tok-o">)?</span><span class="tok-w"> </span><span class="tok-s">&#39;&lt;&#39;</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-nv">primitive_object</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">attr_vals</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">keyed_object</span><span class="tok-o">*</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-s">&#39;&gt;&#39;</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">keyed_object</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;[&#39;</span><span class="tok-w"> </span><span class="tok-nv">key_id</span><span class="tok-w"> </span><span class="tok-s">&#39;]&#39;</span><span class="tok-w"> </span><span class="tok-s">&#39;=&#39;</span><span class="tok-w"> </span><span class="tok-nv">object_block</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">key_id</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-nv">string_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">integer_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">date_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">time_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">date_time_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-c">// ------ leaf types ------</span><span class="tok-w"></span>

<span class="tok-nl">primitive_object</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-nv">primitive_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">primitive_list_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">primitive_interval_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">primitive_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-nv">string_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">integer_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">real_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">boolean_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">character_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">term_code_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">date_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">time_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">date_time_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">duration_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">uri_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">primitive_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-nv">string_list_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">integer_list_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">real_list_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">boolean_list_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">character_list_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">term_code_list_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">date_list_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">time_list_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">date_time_list_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">duration_list_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">primitive_interval_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-nv">integer_interval_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">real_interval_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">date_interval_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">time_interval_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">date_time_interval_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">duration_interval_value</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">object_reference_block</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;&lt;&#39;</span><span class="tok-w"> </span><span class="tok-nv">odin_path_list</span><span class="tok-w"> </span><span class="tok-s">&#39;&gt;&#39;</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">odin_path_list</span><span class="tok-w">     </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">odin_path</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">odin_path</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)?</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">odin_path</span><span class="tok-w">          </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;/&#39;</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-nv">odin_path_segment</span><span class="tok-o">+</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">odin_path_segment</span><span class="tok-w">  </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;/&#39;</span><span class="tok-w"> </span><span class="tok-nv">odin_path_element</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">odin_path_element</span><span class="tok-w">  </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">rm_attribute_id</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;[&#39;</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-no">STRING</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">INTEGER</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-s">&#39;]&#39;</span><span class="tok-w"> </span><span class="tok-o">)?</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following grammar defines ODIN terminal value syntax, and can be imported by any parser needing the ODIN values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="antlr-java"><span class="tok-c">//</span><span class="tok-w"></span>
<span class="tok-c">// grammar defining ODIN terminal value types, including atoms, lists and intervals</span><span class="tok-w"></span>
<span class="tok-c">//</span><span class="tok-w"></span>

<span class="tok-k">grammar</span><span class="tok-w"> </span><span class="tok-nc">odin_values</span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">import</span><span class="tok-w"> </span><span class="tok-err">base_patterns;</span><span class="tok-w"></span>

<span class="tok-err">string_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">STRING</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">string_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">string_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">string_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">integer_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;+&#39;</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;-&#39;</span><span class="tok-w"> </span><span class="tok-o">)?</span><span class="tok-w"> </span><span class="tok-no">INTEGER</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">integer_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">integer_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">integer_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">integer_interval_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_GT</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">integer_value</span><span class="tok-w"> </span><span class="tok-no">SYM_INTERVAL_SEP</span><span class="tok-w"> </span><span class="tok-no">SYM_LT</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">integer_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-nv">relop</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">integer_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-nv">integer_value</span><span class="tok-w"> </span><span class="tok-no">SYM_PLUS_OR_MINUS</span><span class="tok-w"> </span><span class="tok-nv">integer_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">integer_interval_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">integer_interval_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">integer_interval_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">real_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;+&#39;</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;-&#39;</span><span class="tok-w"> </span><span class="tok-o">)?</span><span class="tok-w"> </span><span class="tok-no">REAL</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">real_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">real_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">real_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">real_interval_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_GT</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">real_value</span><span class="tok-w"> </span><span class="tok-no">SYM_INTERVAL_SEP</span><span class="tok-w"> </span><span class="tok-no">SYM_LT</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">real_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-nv">relop</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">real_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-nv">real_value</span><span class="tok-w"> </span><span class="tok-no">SYM_PLUS_OR_MINUS</span><span class="tok-w"> </span><span class="tok-nv">real_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">real_interval_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">real_interval_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">real_interval_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">boolean_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">SYM_TRUE</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_FALSE</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">boolean_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">boolean_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">boolean_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">character_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">CHARACTER</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">character_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">character_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">character_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">date_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">ISO8601_DATE</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">date_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">date_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">date_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">date_interval_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_GT</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">date_value</span><span class="tok-w"> </span><span class="tok-no">SYM_INTERVAL_SEP</span><span class="tok-w"> </span><span class="tok-no">SYM_LT</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">date_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-nv">relop</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">date_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-nv">date_value</span><span class="tok-w"> </span><span class="tok-no">SYM_PLUS_OR_MINUS</span><span class="tok-w"> </span><span class="tok-nv">duration_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">date_interval_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">date_interval_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">date_interval_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">time_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">ISO8601_TIME</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">time_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">time_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">time_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">time_interval_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_GT</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">time_value</span><span class="tok-w"> </span><span class="tok-no">SYM_INTERVAL_SEP</span><span class="tok-w"> </span><span class="tok-no">SYM_LT</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">time_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-nv">relop</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">time_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-nv">time_value</span><span class="tok-w"> </span><span class="tok-no">SYM_PLUS_OR_MINUS</span><span class="tok-w"> </span><span class="tok-nv">duration_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">time_interval_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">time_interval_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">time_interval_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">date_time_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">ISO8601_DATE_TIME</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">date_time_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">date_time_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">date_time_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">date_time_interval_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_GT</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">date_time_value</span><span class="tok-w"> </span><span class="tok-no">SYM_INTERVAL_SEP</span><span class="tok-w"> </span><span class="tok-no">SYM_LT</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">date_time_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-nv">relop</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">date_time_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-nv">date_time_value</span><span class="tok-w"> </span><span class="tok-no">SYM_PLUS_OR_MINUS</span><span class="tok-w"> </span><span class="tok-nv">duration_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">date_time_interval_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">date_time_interval_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">date_time_interval_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">duration_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">ISO8601_DURATION</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">duration_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">duration_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">duration_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">duration_interval_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"></span>
<span class="tok-w">      </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_GT</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">duration_value</span><span class="tok-w"> </span><span class="tok-no">SYM_INTERVAL_SEP</span><span class="tok-w"> </span><span class="tok-no">SYM_LT</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">duration_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-nv">relop</span><span class="tok-o">?</span><span class="tok-w"> </span><span class="tok-nv">duration_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"> </span><span class="tok-nv">duration_value</span><span class="tok-w"> </span><span class="tok-no">SYM_PLUS_OR_MINUS</span><span class="tok-w"> </span><span class="tok-nv">duration_value</span><span class="tok-w"> </span><span class="tok-s">&#39;|&#39;</span><span class="tok-w"></span>
<span class="tok-w">    </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">duration_interval_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">duration_interval_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">duration_interval_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">term_code_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">TERM_CODE_REF</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">term_code_list_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-nv">term_code_value</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">term_code_value</span><span class="tok-w"> </span><span class="tok-o">)+</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-no">SYM_LIST_CONTINUE</span><span class="tok-w"> </span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">uri_value</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">URI</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">relop</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">SYM_GT</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_LT</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_LE</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">SYM_GE</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following grammar defines syntax of generic base patterns.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="antlr-java"><span class="tok-c">//</span><span class="tok-w"></span>
<span class="tok-c">//  General purpose patterns used in all openEHR parser and lexer tools</span><span class="tok-w"></span>
<span class="tok-c">//</span><span class="tok-w"></span>

<span class="tok-k">grammar</span><span class="tok-w"> </span><span class="tok-nc">base_patterns</span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-c">//</span><span class="tok-w"></span>
<span class="tok-c">// -------------------------- Parse Rules --------------------------</span><span class="tok-w"></span>
<span class="tok-c">//</span><span class="tok-w"></span>

<span class="tok-nl">rm_type_id</span><span class="tok-w">      </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">ALPHA_UC_ID</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;&lt;&#39;</span><span class="tok-w"> </span><span class="tok-nv">rm_type_id</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-w"> </span><span class="tok-s">&#39;,&#39;</span><span class="tok-w"> </span><span class="tok-nv">rm_type_id</span><span class="tok-w"> </span><span class="tok-o">)*</span><span class="tok-w"> </span><span class="tok-s">&#39;&gt;&#39;</span><span class="tok-w"> </span><span class="tok-o">)?</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">rm_attribute_id</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">ALPHA_LC_ID</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">identifier</span><span class="tok-w">   </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">ALPHA_UC_ID</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">ALPHA_LC_ID</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">archetype_ref</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-no">ARCHETYPE_HRID</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">ARCHETYPE_REF</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-c">//</span><span class="tok-w"></span>
<span class="tok-c">// -------------------------- Lexer patterns --------------------------</span><span class="tok-w"></span>
<span class="tok-c">//</span><span class="tok-w"></span>

<span class="tok-c">// ---------- symbols ----------</span><span class="tok-w"></span>

<span class="tok-nl">SYM_GT</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;&gt;&#39;</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">SYM_LT</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;&lt;&#39;</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">SYM_LE</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;&lt;=&#39;</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">SYM_GE</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;&gt;=&#39;</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">SYM_NE</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;/=&#39;</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;!=&#39;</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">SYM_EQ</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;=&#39;</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-nl">SYM_LIST_CONTINUE</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;...&#39;</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">SYM_INTERVAL_SEP</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;..&#39;</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">SYM_PLUS_OR_MINUS</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;+/-&#39;</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-s">&#39;±&#39;</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>

<span class="tok-c">// ---------- whitespace &amp; comments ----------</span><span class="tok-w"></span>

<span class="tok-nl">WS</span><span class="tok-w">         </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">[</span> <span class="tok-err">\</span><span class="tok-n">t</span><span class="tok-err">\</span><span class="tok-n">r</span><span class="tok-p">]</span><span class="tok-o">+</span><span class="tok-w">    </span><span class="tok-o">-&gt;</span><span class="tok-w"> </span><span class="tok-nv">skip</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-nl">LINE</span><span class="tok-w">       </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;\n&#39;</span><span class="tok-w">        </span><span class="tok-o">-&gt;</span><span class="tok-w"> </span><span class="tok-nv">skip</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w">     </span><span class="tok-c">// increment line count</span><span class="tok-w"></span>
<span class="tok-nl">H_CMT_LINE</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;--------&#39;</span><span class="tok-w"> </span><span class="tok-s">&#39;-&#39;</span><span class="tok-o">*?</span><span class="tok-w"> </span><span class="tok-s">&#39;\n&#39;</span><span class="tok-w">  </span><span class="tok-p">;</span><span class="tok-w">  </span><span class="tok-c">// special type of comment for splitting template overlays</span><span class="tok-w"></span>
<span class="tok-nl">CMT_LINE</span><span class="tok-w">   </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;--&#39;</span><span class="tok-w"> </span><span class="tok-o">.*?</span><span class="tok-w"> </span><span class="tok-s">&#39;\n&#39;</span><span class="tok-w">  </span><span class="tok-o">-&gt;</span><span class="tok-w"> </span><span class="tok-nv">skip</span><span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w">  </span><span class="tok-c">// (increment line count)</span><span class="tok-w"></span>

<span class="tok-c">// ---------- Delimited Regex matcher ------------</span><span class="tok-w"></span>
<span class="tok-c">// allows for &#39;/&#39; or &#39;^&#39; delimiters</span><span class="tok-w"></span>
<span class="tok-c">// logical form - REGEX: &#39;/&#39; ( &#39;\\/&#39; | ~&#39;/&#39; )+ &#39;/&#39; | &#39;^&#39; ( &#39;\\^&#39; | ~&#39;^&#39; )+ &#39;^&#39;;</span><span class="tok-w"></span>
<span class="tok-c">// The following is used to ensure REGEXes don&#39;t get mixed up with paths, which use &#39;/&#39; chars</span><span class="tok-w"></span>
<span class="tok-c">// In ADL, a regexp can only exist between {}. It can optionally have an assumed value, by adding ;&quot;value&quot;</span><span class="tok-w"></span>
<span class="tok-nl">CONTAINED_REGEX</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;{&#39;</span><span class="tok-no">WS</span><span class="tok-o">*</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-no">SLASH_REGEX</span><span class="tok-w"> </span><span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-no">CARET_REGEX</span><span class="tok-o">)</span><span class="tok-w"> </span><span class="tok-no">WS</span><span class="tok-o">*</span><span class="tok-w"> </span><span class="tok-o">(</span><span class="tok-s">&#39;;&#39;</span><span class="tok-w"> </span><span class="tok-no">WS</span><span class="tok-o">*</span><span class="tok-w"> </span><span class="tok-no">STRING</span><span class="tok-o">)?</span><span class="tok-w"> </span><span class="tok-no">WS</span><span class="tok-o">*</span><span class="tok-w"> </span><span class="tok-s">&#39;}&#39;</span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-k">fragment</span><span class="tok-w"> </span><span class="tok-nl">SLASH_REGEX</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">&#39;/&#39;</span><span class="tok-w"> </span><span class="tok-no">SLASH_REGEX_CHAR</span><span class="tok-o">+</span><span class="tok-w"> </span><span class="tok-s">&#39;/&#39;</span><span class="tok-p">;</span><span class="tok-w"></span>
<span class="tok-k">fragment</span><span class="tok-w"> </span><span class="tok-nl">SLASH_REGEX_CHAR</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-o">~</span><span class="tok-p">[</span><span class="tok-o">/</span><span class="tok-err">\</span><span class="tok-n">n</span><span class="tok-err">\</span><span class="tok-n">r</span><span class="tok-o">]</span> <span class="tok-o">|</span> <span class="tok-n">ESCAPE_SEQ</span> <span class="tok-o">|</span> <span class="tok-err">&#39;\\</span><span class="tok-o">/</span><span class="tok-err">&#39;</span><span class="tok-o">;</span>

<span class="tok-n">fragment</span> <span class="tok-n">CARET_REGEX</span><span class="tok-o">:</span> <span class="tok-sc">&#39;^&#39;</span> <span class="tok-n">CARET_REGEX_CHAR</span><span class="tok-o">+</span> <span class="tok-sc">&#39;^&#39;</span><span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">CARET_REGEX_CHAR</span><span class="tok-o">:</span> <span class="tok-o">~[^</span><span class="tok-err">\</span><span class="tok-n">n</span><span class="tok-err">\</span><span class="tok-n">r</span><span class="tok-o">]</span> <span class="tok-o">|</span> <span class="tok-n">ESCAPE_SEQ</span> <span class="tok-o">|</span> <span class="tok-err">&#39;\\</span><span class="tok-o">^</span><span class="tok-err">&#39;</span><span class="tok-o">;</span>

<span class="tok-c1">// ---------- ISO8601 Date/Time values ----------</span>

<span class="tok-n">ISO8601_DATE</span>      <span class="tok-o">:</span> <span class="tok-n">YEAR</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">MONTH</span> <span class="tok-o">(</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">DAY</span> <span class="tok-o">)?</span> <span class="tok-o">|</span> <span class="tok-n">YEAR</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">MONTH</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">UNKNOWN_DT</span> <span class="tok-o">|</span> <span class="tok-n">YEAR</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">UNKNOWN_DT</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">UNKNOWN_DT</span> <span class="tok-o">;</span>
<span class="tok-n">ISO8601_TIME</span>      <span class="tok-o">:</span> <span class="tok-o">(</span> <span class="tok-n">HOUR</span> <span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">MINUTE</span> <span class="tok-o">(</span> <span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">SECOND</span> <span class="tok-o">(</span> <span class="tok-o">[,.]</span> <span class="tok-n">DIGIT</span><span class="tok-o">+</span> <span class="tok-o">)?)?</span> <span class="tok-o">|</span> <span class="tok-n">HOUR</span> <span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">MINUTE</span> <span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">UNKNOWN_DT</span> <span class="tok-o">|</span> <span class="tok-n">HOUR</span> <span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">UNKNOWN_DT</span> <span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">UNKNOWN_DT</span> <span class="tok-o">)</span> <span class="tok-n">TIMEZONE</span><span class="tok-o">?</span> <span class="tok-o">;</span>
<span class="tok-n">ISO8601_DATE_TIME</span> <span class="tok-o">:</span> <span class="tok-o">(</span> <span class="tok-n">YEAR</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">MONTH</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">DAY</span> <span class="tok-sc">&#39;T&#39;</span> <span class="tok-n">HOUR</span> <span class="tok-o">(</span><span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">MINUTE</span> <span class="tok-o">(</span><span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">SECOND</span> <span class="tok-o">(</span> <span class="tok-o">[,.]</span> <span class="tok-n">DIGIT</span><span class="tok-o">+</span> <span class="tok-o">)?)?)?</span> <span class="tok-o">|</span> <span class="tok-n">YEAR</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">MONTH</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">DAY</span> <span class="tok-sc">&#39;T&#39;</span> <span class="tok-n">HOUR</span> <span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">MINUTE</span> <span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">UNKNOWN_DT</span> <span class="tok-o">|</span> <span class="tok-n">YEAR</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">MONTH</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">DAY</span> <span class="tok-sc">&#39;T&#39;</span> <span class="tok-n">HOUR</span> <span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">UNKNOWN_DT</span> <span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">UNKNOWN_DT</span> <span class="tok-o">)</span> <span class="tok-n">TIMEZONE</span><span class="tok-o">?</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">TIMEZONE</span> <span class="tok-o">:</span> <span class="tok-sc">&#39;Z&#39;</span> <span class="tok-o">|</span> <span class="tok-o">[+-]</span> <span class="tok-n">HOUR</span> <span class="tok-o">(</span> <span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">MINUTE</span> <span class="tok-o">)?</span> <span class="tok-o">;</span>   <span class="tok-c1">// hour offset, e.g. `+09:30`, or else literal `Z` indicating +0000.</span>
<span class="tok-n">fragment</span> <span class="tok-n">YEAR</span>     <span class="tok-o">:</span> <span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">-</span><span class="tok-mi">9</span><span class="tok-o">]{</span><span class="tok-mi">4</span><span class="tok-o">}</span> <span class="tok-o">;</span>					 <span class="tok-c1">// Year in ISO8601:2004 is 4 digits with 0-filling as needed</span>
<span class="tok-n">fragment</span> <span class="tok-n">MONTH</span>    <span class="tok-o">:</span> <span class="tok-o">(</span> <span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">][</span><span class="tok-mi">1</span><span class="tok-o">-</span><span class="tok-mi">9</span><span class="tok-o">]</span> <span class="tok-o">|</span> <span class="tok-o">[</span><span class="tok-mi">1</span><span class="tok-o">][</span><span class="tok-mi">0</span><span class="tok-o">-</span><span class="tok-mi">2</span><span class="tok-o">]</span> <span class="tok-o">)</span> <span class="tok-o">;</span>    <span class="tok-c1">// month in year</span>
<span class="tok-n">fragment</span> <span class="tok-n">DAY</span>      <span class="tok-o">:</span> <span class="tok-o">(</span> <span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">][</span><span class="tok-mi">1</span><span class="tok-o">-</span><span class="tok-mi">9</span><span class="tok-o">]</span> <span class="tok-o">|</span> <span class="tok-o">[</span><span class="tok-mi">12</span><span class="tok-o">][</span><span class="tok-mi">0</span><span class="tok-o">-</span><span class="tok-mi">9</span><span class="tok-o">]</span> <span class="tok-o">|</span> <span class="tok-o">[</span><span class="tok-mi">3</span><span class="tok-o">][</span><span class="tok-mi">0</span><span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-o">]</span> <span class="tok-o">)</span> <span class="tok-o">;</span>  <span class="tok-c1">// day in month</span>
<span class="tok-n">fragment</span> <span class="tok-n">HOUR</span>     <span class="tok-o">:</span> <span class="tok-o">(</span> <span class="tok-o">[</span><span class="tok-mi">01</span><span class="tok-o">]?[</span><span class="tok-mi">0</span><span class="tok-o">-</span><span class="tok-mi">9</span><span class="tok-o">]</span> <span class="tok-o">|</span> <span class="tok-o">[</span><span class="tok-mi">2</span><span class="tok-o">][</span><span class="tok-mi">0</span><span class="tok-o">-</span><span class="tok-mi">3</span><span class="tok-o">]</span> <span class="tok-o">)</span> <span class="tok-o">;</span>  <span class="tok-c1">// hour in 24 hour clock</span>
<span class="tok-n">fragment</span> <span class="tok-n">MINUTE</span>   <span class="tok-o">:</span> <span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">-</span><span class="tok-mi">5</span><span class="tok-o">][</span><span class="tok-mi">0</span><span class="tok-o">-</span><span class="tok-mi">9</span><span class="tok-o">]</span> <span class="tok-o">;</span>                 <span class="tok-c1">// minutes</span>
<span class="tok-n">fragment</span> <span class="tok-n">SECOND</span>   <span class="tok-o">:</span> <span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">-</span><span class="tok-mi">5</span><span class="tok-o">][</span><span class="tok-mi">0</span><span class="tok-o">-</span><span class="tok-mi">9</span><span class="tok-o">]</span> <span class="tok-o">;</span>                 <span class="tok-c1">// seconds</span>
<span class="tok-n">fragment</span> <span class="tok-n">UNKNOWN_DT</span>  <span class="tok-o">:</span> <span class="tok-err">&#39;</span><span class="tok-o">??</span><span class="tok-err">&#39;</span> <span class="tok-o">;</span>                    <span class="tok-c1">// any unknown date/time value, except years.</span>

<span class="tok-c1">// ISO8601 DURATION PnYnMnWnDTnnHnnMnn.nnnS</span>
<span class="tok-c1">// here we allow a deviation from the standard to allow weeks to be // mixed in with the rest since this commonly occurs in medicine</span>
<span class="tok-c1">// TODO: the following will incorrectly match just &#39;P&#39;</span>
<span class="tok-n">ISO8601_DURATION</span> <span class="tok-o">:</span> <span class="tok-sc">&#39;P&#39;</span> <span class="tok-o">(</span><span class="tok-n">DIGIT</span><span class="tok-o">+</span> <span class="tok-o">[</span><span class="tok-n">yY</span><span class="tok-o">])?</span> <span class="tok-o">(</span><span class="tok-n">DIGIT</span><span class="tok-o">+</span> <span class="tok-o">[</span><span class="tok-n">mM</span><span class="tok-o">])?</span> <span class="tok-o">(</span><span class="tok-n">DIGIT</span><span class="tok-o">+</span> <span class="tok-o">[</span><span class="tok-n">wW</span><span class="tok-o">])?</span> <span class="tok-o">(</span><span class="tok-n">DIGIT</span><span class="tok-o">+[</span><span class="tok-n">dD</span><span class="tok-o">])?</span> <span class="tok-o">(</span><span class="tok-sc">&#39;T&#39;</span> <span class="tok-o">(</span><span class="tok-n">DIGIT</span><span class="tok-o">+[</span><span class="tok-n">hH</span><span class="tok-o">])?</span> <span class="tok-o">(</span><span class="tok-n">DIGIT</span><span class="tok-o">+[</span><span class="tok-n">mM</span><span class="tok-o">])?</span> <span class="tok-o">(</span><span class="tok-n">DIGIT</span><span class="tok-o">+</span> <span class="tok-o">(</span><span class="tok-sc">&#39;.&#39;</span><span class="tok-n">DIGIT</span><span class="tok-o">+)?[</span><span class="tok-n">sS</span><span class="tok-o">])?)?</span> <span class="tok-o">;</span>

<span class="tok-c1">// ------------------- special word symbols --------------</span>
<span class="tok-n">SYM_TRUE</span>  <span class="tok-o">:</span> <span class="tok-o">[</span><span class="tok-n">Tt</span><span class="tok-o">][</span><span class="tok-n">Rr</span><span class="tok-o">][</span><span class="tok-n">Uu</span><span class="tok-o">][</span><span class="tok-n">Ee</span><span class="tok-o">]</span> <span class="tok-o">;</span>
<span class="tok-n">SYM_FALSE</span> <span class="tok-o">:</span> <span class="tok-o">[</span><span class="tok-n">Ff</span><span class="tok-o">][</span><span class="tok-n">Aa</span><span class="tok-o">][</span><span class="tok-n">Ll</span><span class="tok-o">][</span><span class="tok-n">Ss</span><span class="tok-o">][</span><span class="tok-n">Ee</span><span class="tok-o">]</span> <span class="tok-o">;</span>

<span class="tok-c1">// ---------------------- Identifiers ---------------------</span>

<span class="tok-n">ARCHETYPE_HRID</span>      <span class="tok-o">:</span> <span class="tok-n">ARCHETYPE_HRID_ROOT</span> <span class="tok-err">&#39;</span><span class="tok-o">.</span><span class="tok-na">v</span><span class="tok-err">&#39;</span> <span class="tok-n">VERSION_ID</span> <span class="tok-o">;</span>
<span class="tok-n">ARCHETYPE_REF</span>       <span class="tok-o">:</span> <span class="tok-n">ARCHETYPE_HRID_ROOT</span> <span class="tok-err">&#39;</span><span class="tok-o">.</span><span class="tok-na">v</span><span class="tok-err">&#39;</span> <span class="tok-n">INTEGER</span> <span class="tok-o">(</span> <span class="tok-sc">&#39;.&#39;</span> <span class="tok-n">DIGIT</span><span class="tok-o">+</span> <span class="tok-o">)*</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">ARCHETYPE_HRID_ROOT</span> <span class="tok-o">:</span> <span class="tok-o">(</span><span class="tok-n">NAMESPACE</span> <span class="tok-err">&#39;</span><span class="tok-o">::</span><span class="tok-err">&#39;</span><span class="tok-o">)?</span> <span class="tok-n">IDENTIFIER</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">IDENTIFIER</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-n">IDENTIFIER</span> <span class="tok-sc">&#39;.&#39;</span> <span class="tok-n">LABEL</span> <span class="tok-o">;</span>
<span class="tok-n">VERSION_ID</span>          <span class="tok-o">:</span> <span class="tok-n">DIGIT</span><span class="tok-o">+</span> <span class="tok-sc">&#39;.&#39;</span> <span class="tok-n">DIGIT</span><span class="tok-o">+</span> <span class="tok-sc">&#39;.&#39;</span> <span class="tok-n">DIGIT</span><span class="tok-o">+</span> <span class="tok-o">(</span> <span class="tok-o">(</span> <span class="tok-err">&#39;</span><span class="tok-o">-</span><span class="tok-n">rc</span><span class="tok-err">&#39;</span> <span class="tok-o">|</span> <span class="tok-err">&#39;</span><span class="tok-o">-</span><span class="tok-n">alpha</span><span class="tok-err">&#39;</span> <span class="tok-o">)</span> <span class="tok-o">(</span> <span class="tok-sc">&#39;.&#39;</span> <span class="tok-n">DIGIT</span><span class="tok-o">+</span> <span class="tok-o">)?</span> <span class="tok-o">)?</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">IDENTIFIER</span> <span class="tok-o">:</span> <span class="tok-n">ALPHA_CHAR</span> <span class="tok-n">WORD_CHAR</span><span class="tok-o">*</span> <span class="tok-o">;</span>

<span class="tok-c1">// --------------------- composed primitive types -------------------</span>

<span class="tok-n">TERM_CODE_REF</span> <span class="tok-o">:</span> <span class="tok-err">&#39;</span><span class="tok-p">[</span><span class="tok-err">&#39;</span> <span class="tok-n">NAME_CHAR</span><span class="tok-o">+</span> <span class="tok-o">(</span> <span class="tok-sc">&#39;(&#39;</span> <span class="tok-n">NAME_CHAR</span><span class="tok-o">+</span> <span class="tok-sc">&#39;)&#39;</span> <span class="tok-o">)?</span> <span class="tok-err">&#39;</span><span class="tok-o">::</span><span class="tok-err">&#39;</span> <span class="tok-n">NAME_CHAR</span><span class="tok-o">+</span> <span class="tok-err">&#39;</span><span class="tok-p">]</span><span class="tok-err">&#39;</span> <span class="tok-o">;</span>  <span class="tok-c1">// e.g. [ICD10AM(1998)::F23]; [ISO_639-1::en]</span>

<span class="tok-c1">// URIs - simple recogniser based on https://tools.ietf.org/html/rfc3986 and</span>
<span class="tok-c1">// http://www.w3.org/Addressing/URL/5_URI_BNF.html</span>
<span class="tok-n">URI</span> <span class="tok-o">:</span> <span class="tok-n">URI_SCHEME</span> <span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">URI_HIER_PART</span> <span class="tok-o">(</span> <span class="tok-sc">&#39;?&#39;</span> <span class="tok-n">URI_QUERY</span> <span class="tok-o">)?</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">URI_HIER_PART</span> <span class="tok-o">:</span> <span class="tok-o">(</span> <span class="tok-err">&#39;</span><span class="tok-c1">//&#39; URI_AUTHORITY )? URI_PATH ;</span>
<span class="tok-n">fragment</span> <span class="tok-n">URI_AUTHORITY</span> <span class="tok-o">:</span> <span class="tok-o">(</span> <span class="tok-n">URI_USER</span> <span class="tok-sc">&#39;@&#39;</span> <span class="tok-o">)?</span> <span class="tok-n">URI_HOST</span> <span class="tok-o">(</span> <span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">NATURAL</span> <span class="tok-o">)?</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">URI_HOST</span> <span class="tok-o">:</span> <span class="tok-n">IP_LITERAL</span> <span class="tok-o">|</span> <span class="tok-n">NAMESPACE</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">URI_USER</span> <span class="tok-o">:</span> <span class="tok-n">URI_RESERVED</span><span class="tok-o">+</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">URI_SCHEME</span> <span class="tok-o">:</span> <span class="tok-n">ALPHANUM_CHAR</span> <span class="tok-n">URI_XALPHA</span><span class="tok-o">*</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">URI_PATH</span>   <span class="tok-o">:</span> <span class="tok-o">(</span> <span class="tok-sc">&#39;/&#39;</span> <span class="tok-n">URI_XPALPHA</span><span class="tok-o">+</span> <span class="tok-o">)+</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">URI_QUERY</span>  <span class="tok-o">:</span> <span class="tok-n">URI_XALPHA</span><span class="tok-o">+</span> <span class="tok-o">(</span> <span class="tok-sc">&#39;+&#39;</span> <span class="tok-n">URI_XALPHA</span><span class="tok-o">+</span> <span class="tok-o">)*</span> <span class="tok-o">;</span>

<span class="tok-n">fragment</span> <span class="tok-n">IP_LITERAL</span>   <span class="tok-o">:</span> <span class="tok-n">IPV4_LITERAL</span> <span class="tok-o">|</span> <span class="tok-n">IPV6_LITERAL</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">IPV4_LITERAL</span> <span class="tok-o">:</span> <span class="tok-n">NATURAL</span> <span class="tok-sc">&#39;.&#39;</span> <span class="tok-n">NATURAL</span> <span class="tok-sc">&#39;.&#39;</span> <span class="tok-n">NATURAL</span> <span class="tok-sc">&#39;.&#39;</span> <span class="tok-n">NATURAL</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">IPV6_LITERAL</span> <span class="tok-o">:</span> <span class="tok-n">HEX_QUAD</span> <span class="tok-o">(</span><span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">HEX_QUAD</span> <span class="tok-o">)*</span> <span class="tok-err">&#39;</span><span class="tok-o">::</span><span class="tok-err">&#39;</span> <span class="tok-n">HEX_QUAD</span> <span class="tok-o">(</span><span class="tok-sc">&#39;:&#39;</span> <span class="tok-n">HEX_QUAD</span> <span class="tok-o">)*</span> <span class="tok-o">;</span>

<span class="tok-n">fragment</span> <span class="tok-n">URI_XPALPHA</span> <span class="tok-o">:</span> <span class="tok-n">URI_XALPHA</span> <span class="tok-o">|</span> <span class="tok-sc">&#39;+&#39;</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">URI_XALPHA</span> <span class="tok-o">:</span> <span class="tok-n">ALPHANUM_CHAR</span> <span class="tok-o">|</span> <span class="tok-n">URI_SAFE</span> <span class="tok-o">|</span> <span class="tok-n">URI_EXTRA</span> <span class="tok-o">|</span> <span class="tok-n">URI_ESCAPE</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">URI_SAFE</span>   <span class="tok-o">:</span> <span class="tok-p">[</span><span class="tok-n">$</span><span class="tok-err">@</span><span class="tok-o">.&amp;</span><span class="tok-n">_</span><span class="tok-o">-</span><span class="tok-p">]</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">URI_EXTRA</span>  <span class="tok-o">:</span> <span class="tok-p">[</span><span class="tok-o">!*</span><span class="tok-s">&quot;&#39;()] ;</span>
<span class="tok-s">fragment URI_ESCAPE : &#39;%&#39; HEX_DIGIT HEX_DIGIT ;</span>
<span class="tok-s">fragment URI_RESERVED : [=;/#?: ] ;</span>

<span class="tok-s">fragment NATURAL  : [1-9][0-9]* ;</span>
<span class="tok-s">fragment HEX_QUAD : HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT ;</span>

<span class="tok-s">// According to IETF http://tools.ietf.org/html/rfc1034[RFC 1034] and http://tools.ietf.org/html/rfc1035[RFC 1035],</span>
<span class="tok-s">// as clarified by http://tools.ietf.org/html/rfc2181[RFC 2181] (section 11)</span>
<span class="tok-s">fragment NAMESPACE : LABEL (&#39;.&#39; LABEL)+ ;</span>
<span class="tok-s">fragment LABEL : ALPHA_CHAR ( NAME_CHAR* ALPHANUM_CHAR )? ;</span>

<span class="tok-s">GUID : HEX_DIGIT+ &#39;-&#39; HEX_DIGIT+ &#39;-&#39; HEX_DIGIT+ &#39;-&#39; HEX_DIGIT+ &#39;-&#39; HEX_DIGIT+ ;</span>

<span class="tok-s">ALPHA_UC_ID : ALPHA_UCHAR WORD_CHAR* ;           // used for type ids</span>
<span class="tok-s">ALPHA_LC_ID : ALPHA_LCHAR WORD_CHAR* ;           // used for attribute / method ids</span>

<span class="tok-s">// --------------------- atomic primitive types -------------------</span>

<span class="tok-s">INTEGER : DIGIT+ E_SUFFIX? ;</span>
<span class="tok-s">REAL :    DIGIT+ &#39;.&#39; DIGIT+ E_SUFFIX? ;</span>
<span class="tok-s">fragment E_SUFFIX : [eE][+-]? DIGIT+ ;</span>

<span class="tok-s">STRING : &#39;&quot;</span><span class="tok-err">&#39;</span> <span class="tok-n">STRING_CHAR</span><span class="tok-o">*?</span> <span class="tok-sc">&#39;&quot;&#39;</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">STRING_CHAR</span> <span class="tok-o">:</span> <span class="tok-o">~[</span><span class="tok-s">&quot;\\</span><span class="tok-p">]</span><span class="tok-s"> | ESCAPE_SEQ | UTF8CHAR ; // strings can be multi-line</span>

<span class="tok-s">CHARACTER : &#39;\&#39;&#39; CHAR &#39;\&#39;&#39; ;</span>
<span class="tok-s">fragment CHAR : ~</span><span class="tok-p">[</span><span class="tok-s">&#39;\\\r\n] | ESCAPE_SEQ | UTF8CHAR  ;</span>

<span class="tok-s">fragment ESCAPE_SEQ: &#39;\\&#39; [&#39;&quot;</span><span class="tok-o">?</span><span class="tok-n">abfnrtv</span><span class="tok-err">\\</span><span class="tok-p">]</span> <span class="tok-o">;</span>

<span class="tok-c1">// ------------------- character fragments ------------------</span>

<span class="tok-n">fragment</span> <span class="tok-n">NAME_CHAR</span>     <span class="tok-o">:</span> <span class="tok-n">WORD_CHAR</span> <span class="tok-o">|</span> <span class="tok-sc">&#39;-&#39;</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">WORD_CHAR</span>     <span class="tok-o">:</span> <span class="tok-n">ALPHANUM_CHAR</span> <span class="tok-o">|</span> <span class="tok-sc">&#39;_&#39;</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">ALPHANUM_CHAR</span> <span class="tok-o">:</span> <span class="tok-n">ALPHA_CHAR</span> <span class="tok-o">|</span> <span class="tok-n">DIGIT</span> <span class="tok-o">;</span>

<span class="tok-n">fragment</span> <span class="tok-n">ALPHA_CHAR</span>  <span class="tok-o">:</span> <span class="tok-p">[</span><span class="tok-n">a</span><span class="tok-o">-</span><span class="tok-n">zA</span><span class="tok-o">-</span><span class="tok-n">Z</span><span class="tok-p">]</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">ALPHA_UCHAR</span> <span class="tok-o">:</span> <span class="tok-p">[</span><span class="tok-n">A</span><span class="tok-o">-</span><span class="tok-n">Z</span><span class="tok-p">]</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">ALPHA_LCHAR</span> <span class="tok-o">:</span> <span class="tok-p">[</span><span class="tok-n">a</span><span class="tok-o">-</span><span class="tok-n">z</span><span class="tok-p">]</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">UTF8CHAR</span>    <span class="tok-o">:</span> <span class="tok-err">&#39;\\</span><span class="tok-n">u</span><span class="tok-err">&#39;</span> <span class="tok-n">HEX_DIGIT</span> <span class="tok-n">HEX_DIGIT</span> <span class="tok-n">HEX_DIGIT</span> <span class="tok-n">HEX_DIGIT</span> <span class="tok-o">;</span>

<span class="tok-n">fragment</span> <span class="tok-n">DIGIT</span>     <span class="tok-o">:</span> <span class="tok-p">[</span><span class="tok-mi">0</span><span class="tok-o">-</span><span class="tok-mi">9</span><span class="tok-p">]</span> <span class="tok-o">;</span>
<span class="tok-n">fragment</span> <span class="tok-n">HEX_DIGIT</span> <span class="tok-o">:</span> <span class="tok-p">[</span><span class="tok-mi">0</span><span class="tok-o">-</span><span class="tok-mi">9</span><span class="tok-n">a</span><span class="tok-o">-</span><span class="tok-n">fA</span><span class="tok-o">-</span><span class="tok-n">F</span><span class="tok-p">]</span> <span class="tok-o">;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-09-08 14:04:50 BST
</div>
</div>
</body>
</html>